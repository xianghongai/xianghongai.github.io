!function(r){r(document).ready(function(){console.log("本博客由 Hexo 强力驱动，主题Frok了官方的 Landscape 主题进行了调整");var t=r("#search-form-wrap"),e=!1,n=function(){e=!0},o=function(t){setTimeout(function(){e=!1,t&&t()},200)};r("#nav-search-btn").on("click",function(){e||(n(),t.addClass("on"),o(function(){r(".search-form-input").focus()}))}),r(".search-form-input").on("blur",function(){n(),t.removeClass("on"),o()}),r("body").on("click",function(){r(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e=r(this),n=e.attr("data-url"),o=encodeURIComponent(n),a="article-share-box-"+e.attr("data-id"),i=e.offset();if(r("#"+a).length){if((c=r("#"+a)).hasClass("on"))return void c.removeClass("on")}else{var s=['<div id="'+a+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+o+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+o+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+o+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+o+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join(""),c=r(s);r("body").append(c)}r(".article-share-box.on").hide(),c.css({top:i.top+25,left:i.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){r(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}),r(".article-entry").each(function(t){r(this).find("img").each(function(){if(!r(this).parent().hasClass("fancybox")){var t=this.alt;t&&r(this).after('<span class="caption">'+t+"</span>"),r(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}}),r(this).find(".fancybox").each(function(){r(this).attr("rel","article"+t)})}),r.fancybox&&r(".fancybox").fancybox();var a=r("body"),i=!1;r("#main-nav-toggle").on("click",function(){i||(i=!0,a.toggleClass("mobile-nav-on"),setTimeout(function(){i=!1},200))}),r("#page").on("click",function(){!i&&a.hasClass("mobile-nav-on")&&a.removeClass("mobile-nav-on")}),r(window).scroll(function(){100<r(window).scrollTop()?r(".js_top").removeClass("hidden").fadeIn(1500):r(".js_top").fadeOut(500).addClass("hidden")}),r(".js_top").on("click",function(){return console.log("fuck"),r("body,html").animate({scrollTop:0},300),!1})})}(jQuery),function(e){"use strict";var t={backToTop:function(){var t=$(".js-top");$(e).scroll(function(){100<$(e).scrollTop()?t.fadeIn(1e3):t.fadeOut(1e3)}),t.click(function(){$("body,html").animate({scrollTop:0})})},visits:function(){var o,n,t,a,i,s=$(".post-visits");function c(t,e){var n=t.text()+" "+e;t.text(n).css("visibility","visible")}if("object"==typeof AV){var e=AV.Object.extend("Counter");console.log(e),1===s.length?(n=e,t=new AV.Query(n),a=s.data("url").trim(),i=s.data("title").trim(),t.equalTo("url",a),t.find().then(function(t){if(0<t.length)t[0].save(null,{fetchWhenSave:!0}).then(function(t){return t.increment("time",1),t.save()}).then(function(t){c(s,t.get("time"))});else{var e=new n;e.set("title",i),e.set("url",a),e.set("time",1),e.save().then(function(t){c(s,e.get("time"))})}},function(t){console.log("Error:"+t.code+" "+t.message)})):(o=e,s.each(function(){var n=$(this),t=new AV.Query(o),e=n.data("url").trim();t.equalTo("url",e),t.find().then(function(t){if(0===t.length)c(n,0);else{var e=t[0];c(n,e.get("time"))}},function(t){console.log("Error:"+t.code+" "+t.message)})}))}}};e.Even=t}(window);