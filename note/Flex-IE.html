<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="Flex 布局, Flex Layout" />
    <meta name="author" content="山茶树和葡萄树/xianghongai@gmail.com" />
    <link rel="icon" type="image/png" href="https://xinlu.ink/favicon.png" />
    <link rel="shortcut icon" type="image/x-icon" href="https://xinlu.ink/favicon.ico" />
    <title>Flex 布局</title>
    <script>
      /* Polyfill */
      // === ECMAScript

      // https://tc39.github.io/ecma262/#sec-array.prototype.includes
      if (!Array.prototype.includes) {
        Object.defineProperty(Array.prototype, 'includes', {
          value: function (valueToFind, fromIndex) {
            if (this == null) {
              throw new TypeError('"this" is null or not defined');
            }

            // 1. Let O be ? ToObject(this value).
            var o = Object(this);

            // 2. Let len be ? ToLength(? Get(O, "length")).
            var len = o.length >>> 0;

            // 3. If len is 0, return false.
            if (len === 0) {
              return false;
            }

            // 4. Let n be ? ToInteger(fromIndex).
            //    (If fromIndex is undefined, this step produces the value 0.)
            var n = fromIndex | 0;

            // 5. If n ≥ 0, then
            //  a. Let k be n.
            // 6. Else n < 0,
            //  a. Let k be len + n.
            //  b. If k < 0, let k be 0.
            var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

            function sameValueZero(x, y) {
              return x === y || (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y));
            }

            // 7. Repeat, while k < len
            while (k < len) {
              // a. Let elementK be the result of ? Get(O, ! ToString(k)).
              // b. If SameValueZero(valueToFind, elementK) is true, return true.
              if (sameValueZero(o[k], valueToFind)) {
                return true;
              }
              // c. Increase k by 1.
              k++;
            }

            // 8. Return false
            return false;
          },
        });
      }

      // Production steps of ECMA-262, Edition 5, 15.4.4.18
      // Reference: http://es5.github.io/#x15.4.4.18
      if (!Array.prototype.forEach) {
        Array.prototype.forEach = function (callback, thisArg) {
          var T, k;

          if (this == null) {
            throw new TypeError(' this is null or not defined');
          }

          // 1. Let O be the result of calling toObject() passing the
          // |this| value as the argument.
          var O = Object(this);

          // 2. Let lenValue be the result of calling the Get() internal
          // method of O with the argument "length".
          // 3. Let len be toUint32(lenValue).
          var len = O.length >>> 0;

          // 4. If isCallable(callback) is false, throw a TypeError exception.
          // See: http://es5.github.com/#x9.11
          if (typeof callback !== 'function') {
            throw new TypeError(callback + ' is not a function');
          }

          // 5. If thisArg was supplied, let T be thisArg; else let
          // T be undefined.
          if (arguments.length > 1) {
            T = thisArg;
          }

          // 6. Let k be 0
          k = 0;

          // 7. Repeat, while k < len
          while (k < len) {
            var kValue;

            // a. Let Pk be ToString(k).
            //    This is implicit for LHS operands of the in operator
            // b. Let kPresent be the result of calling the HasProperty
            //    internal method of O with argument Pk.
            //    This step can be combined with c
            // c. If kPresent is true, then
            if (k in O) {
              // i. Let kValue be the result of calling the Get internal
              // method of O with argument Pk.
              kValue = O[k];

              // ii. Call the Call internal method of callback with T as
              // the this value and argument list containing kValue, k, and O.
              callback.call(T, kValue, k, O);
            }
            // d. Increase k by 1.
            k++;
          }
          // 8. return undefined
        };
      }

      // === DOM

      // https://developer.mozilla.org/en-US/docs/Web/API/DOMTokenList/forEach
      if (window.DOMTokenList && !DOMTokenList.prototype.forEach) {
        DOMTokenList.prototype.forEach = function (callback, thisArg) {
          thisArg = thisArg || window;
          for (var i = 0; i < this.length; i++) {
            callback.call(thisArg, this[i], i, this);
          }
        };
      }

      // https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach
      if (window.NodeList && !NodeList.prototype.forEach) {
        NodeList.prototype.forEach = function (callback, thisArg) {
          thisArg = thisArg || window;
          for (var i = 0; i < this.length; i++) {
            callback.call(thisArg, this[i], i, this);
          }
        };
      }

      if ('classList' in document.createElement('_')) {
        // There is full or partial native classList support, so just check
        // if we need to normalize the add/remove and toggle APIs.

        !(function () {
          'use strict';

          var c1 = 'c1';
          var c2 = 'c2';
          var testElement = document.createElement('_');

          // Polyfill for IE 10/11 and Firefox <26, where classList.add and
          // classList.remove exist but support only one argument at a time.

          testElement.classList.add(c1, c2);

          if (!testElement.classList.contains(c2)) {
            var createMethod = function (method) {
              var _method = DOMTokenList.prototype[method];

              DOMTokenList.prototype[method] = function (token) {
                for (var i = -1, len = arguments.length; ++i < len; ) {
                  token = arguments[i];
                  _method.call(this, token);
                }
              };
            };
            createMethod('add');
            createMethod('remove');
          }

          // Polyfill for IE 10 and Firefox <24, where classList.toggle does not
          // support the second argument.

          testElement.classList.toggle(c1, true);

          if (!testElement.classList.contains(c1)) {
            var _toggle = DOMTokenList.prototype.toggle;

            DOMTokenList.prototype.toggle = function (token, force) {
              if (1 in arguments && !this.contains(token) === !force) {
                return force;
              }
              return _toggle.call(this, token);
            };
          }

          testElement = null;
        })();
      } else {
        //-------------------------------------------------------------------
        // Full polyfill for browsers with no classList support
        //-------------------------------------------------------------------

        'Element' in view &&
          (function (view) {
            'use strict';

            var proto = 'prototype';
            var arrIndexOf = Array[proto].indexOf;

            // Vendors: please allow content code to instantiate DOMExceptions
            var DOMEx = function (type, message) {
              this.name = type;
              this.code = DOMException[type];
              this.message = message;
            };

            // Most DOMException implementations don't allow calling DOMException's toString()
            // on non-DOMExceptions. Error's toString() is sufficient here.
            DOMEx[proto] = Error[proto];

            var checkTokenAndGetIndex = function (classList, token) {
              if (token === '') {
                throw new DOMEx('SYNTAX_ERR', 'An invalid or illegal string was specified');
              }
              if (/\s/.test(token)) {
                throw new DOMEx('INVALID_CHARACTER_ERR', 'String contains an invalid character');
              }
              return arrIndexOf.call(classList, token);
            };

            //-- The ClassList "class"

            var ClassList = function (elem) {
              var classes = (elem.getAttribute('class') || '').trim();
              if (classes) {
                var classlist = classes.split(/\s+/);
                for (var i = -1, len = classlist.length; ++i < len; ) {
                  this.push(classlist[i]);
                }
              }

              // privileged method, called from public methods of classList
              this._updateClassName = function () {
                elem.setAttribute('class', this.toString());
              };
            };

            // ClassList inherit from Array
            var classListPrototype = (ClassList[proto] = []);

            //-- Element.classList[i]: string || null

            classListPrototype.item = function (i) {
              return this[i] || null;
            };

            //-- Element.classList.add(...)
            // Adds a class to an element's list of classes.
            // If class already exists in the element's list of classes,
            // it will not add the class again.

            classListPrototype.add = function () {
              var tokens = arguments;
              var updated = false;

              for (var i = -1, len = tokens.length; ++i < len; ) {
                var token = tokens[i] + '';
                if (checkTokenAndGetIndex(this, token) === -1) {
                  this.push(token);
                  updated = true;
                }
              }
              if (updated) {
                this._updateClassName();
              }
            };

            //-- Element.classList.remove(...)
            // Removes a class from an element's list of classes.
            // If class does not exist in the element's list of classes,
            // it will not throw an error or exception.

            classListPrototype.remove = function () {
              var tokens = arguments;
              var updated = false;
              var index;

              for (var i = -1, len = tokens.length; ++i < len; ) {
                var token = tokens[i] + '';
                while ((index = checkTokenAndGetIndex(this, token)) !== -1) {
                  this.splice(index, 1);
                  updated = true;
                }
              }
              if (updated) {
                this._updateClassName();
              }
            };

            //-- Element.classList.toogle(... [, force])
            // Toggles the existence of a class in an element's list of classes
            // force: will force the class name to be added or removed based on the truthiness
            // of 'force'.
            // For example, to remove a class (if it exists or not) you can call
            // element.classList.toggle('classToBeRemoved', false);
            // and to add a class (if it exists or not) you can call
            // element.classList.toggle('classToBeAdded', true);

            classListPrototype.toggle = function (token, force) {
              token += ''; // ensure that is string

              if (this.contains(token)) {
                return force === true || (this.remove(token), false);
              }
              return force === false ? false : (this.add(token), true);
            };

            //-- Element.classList.toString()

            classListPrototype.toString = function () {
              return this.join(' ');
            };

            //-- Element.classList.contains(token): boolean
            // Checks if an element's list of classes contains a specific class.

            classListPrototype.contains = function (token) {
              return checkTokenAndGetIndex(this, token + '') !== -1;
            };

            // Element.classList Getter

            var classListGetter = function () {
              return new ClassList(this);
            };

            Object.defineProperty(view.Element[proto], 'classList', {
              get: classListGetter,
              enumerable: true,
              configurable: true,
            });
          })(self); // if ('Element' in view) && (function(v){..})(v)
      }

      // Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md
      (function (arr) {
        arr.forEach(function (item) {
          if (item.hasOwnProperty('append')) {
            return;
          }
          Object.defineProperty(item, 'append', {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function append() {
              var argArr = Array.prototype.slice.call(arguments),
                docFrag = document.createDocumentFragment();

              argArr.forEach(function (argItem) {
                var isNode = argItem instanceof Node;
                docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));
              });

              this.appendChild(docFrag);
            },
          });
        });
      })([Element.prototype, Document.prototype, DocumentFragment.prototype]);

      /*
       * @preserve dataset polyfill for IE < 11. See https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset and http://caniuse.com/#search=dataset
       *
       * @author ShirtlessKirk copyright 2015
       * @license WTFPL (http://www.wtfpl.net/txt/copying)
       */
      /*global define: false, module: false */
      /*jslint nomen: true, regexp: true, unparam: true */
      (function datasetModule(global, definition) {
        // non-exporting module magic dance
        'use strict';

        var amd = 'amd',
          exports = 'exports'; // keeps the method names for CommonJS / AMD from being compiled to single character variable

        if (typeof define === 'function' && define[amd]) {
          define(function definer() {
            return definition(global);
          });
        } else if (typeof module === 'function' && module[exports]) {
          module[exports] = definition(global);
        } else {
          definition(global);
        }
      })(this, function datasetPolyfill(global) {
        'use strict';

        var attribute,
          attributes,
          counter,
          dash,
          dataRegEx,
          document = global.document,
          hasEventListener,
          length,
          match,
          mutationSupport,
          test = document.createElement('_'),
          DOMAttrModified = 'DOMAttrModified';

        function clearDataset(event) {
          delete event.target._datasetCache;
        }

        function toCamelCase(string) {
          return string.replace(dash, function (m, letter) {
            return letter.toUpperCase();
          });
        }

        function getDataset() {
          var dataset = {};

          attributes = this.attributes;
          for (counter = 0, length = attributes.length; counter < length; counter += 1) {
            attribute = attributes[counter];
            match = attribute.name.match(dataRegEx);
            if (match) {
              dataset[toCamelCase(match[1])] = attribute.value;
            }
          }

          return dataset;
        }

        function mutation() {
          if (hasEventListener) {
            test.removeEventListener(DOMAttrModified, mutation, false);
          } else {
            test.detachEvent('on' + DOMAttrModified, mutation);
          }

          mutationSupport = true;
        }

        if (test.dataset !== undefined) {
          return;
        }

        dash = /\-([a-z])/gi;
        dataRegEx = /^data\-(.+)/;
        hasEventListener = !!document.addEventListener;
        mutationSupport = false;

        if (hasEventListener) {
          test.addEventListener(DOMAttrModified, mutation, false);
        } else {
          test.attachEvent('on' + DOMAttrModified, mutation);
        }

        // trigger event (if supported)
        test.setAttribute('foo', 'bar');

        Object.defineProperty(global.Element.prototype, 'dataset', {
          get: mutationSupport
            ? function get() {
                if (!this._datasetCache) {
                  this._datasetCache = getDataset.call(this);
                }

                return this._datasetCache;
              }
            : getDataset,
        });

        if (mutationSupport && hasEventListener) {
          // < IE9 supports neither
          document.addEventListener(DOMAttrModified, clearDataset, false);
        }
      });
    </script>

    <style>
      html {
        height: 100%;
      }

      body {
        margin: 0;
        height: auto;
        min-height: 100%;
      }

      .settings {
        display: flex;
        position: fixed;
        z-index: 9;
        left: 20px;
        padding: 1em;
        background-color: rgba(255, 255, 255, 0.9);
        box-shadow: 0 0 0 20px rgba(0, 0, 0, 0.05);
        border-radius: 1em;
        touch-action: none;
        box-sizing: border-box;
      }

      .list {
        display: flex;
      }

      dl {
        margin-right: 2em;
        flex: 0 0 none;
      }

      dt,
      dd {
        white-space: nowrap;
      }

      dd {
        margin-left: 0;
      }

      span[data-operate] {
        display: inline-block;
        width: 24px;
        padding: 0.2em 0;
        margin-left: 0.5em;
        cursor: pointer;
        user-select: none;
        background-color: #eee;
        border-radius: 5px;
        text-align: center;
      }

      span[data-operate]:hover {
        background-color: #f2f2f2;
      }

      .drag {
        position: absolute;
        border-radius: 50%;
        touch-action: none;
        user-select: none;
        width: 10px;
        height: 10px;
        background-color: rgb(255, 255, 255);
        border: 5px solid rgba(0, 0, 0, 0.075);
        transform: translate(-50%, -50%);
        cursor: move;
      }

      .drag:hover {
        opacity: 0.6;
      }

      .drag-top {
        top: 0;
      }

      .drag-middle {
        top: 50%;
      }

      .drag-bottom {
        top: 100%;
      }

      .drag-start {
        left: 0;
      }

      .drag-center {
        left: 50%;
      }

      .drag-end {
        left: 100%;
      }
    </style>

    <style>
      /* Flex Layout */
      .flex {
        display: flex;
        width: 100%;
        min-height: 100vh;
      }

      .flex__item {
        position: relative;
        border-radius: 8px;
      }

      .flex__item p {
        margin: 0;
      }

      .style-1 {
        background-color: #2bcbba;
      }
      .style-2 {
        background-color: #27ae60;
      }
      .style-3 {
        background-color: #9b59b6;
      }
      .style-4 {
        background-color: #3498db;
      }
      .style-5 {
        background-color: #f7b731;
      }

      .flex__item:nth-child(5n + 1) {
        width: 100px;
        height: 100px;
        z-index: 5;
      }

      .flex__item:nth-child(5n + 2) {
        width: 200px;
        height: 200px;
        z-index: 4;
      }

      .flex__item:nth-child(5n + 3) {
        width: 50px;
        height: 50px;
        z-index: 3;
      }

      .flex__item:nth-child(5n + 4) {
        width: 150px;
        height: 150px;
        z-index: 2;
      }

      .flex__item:nth-child(5n + 5) {
        width: 300px;
        height: 300px;
        z-index: 1;
      }

      .origin,
      .origin-shadow,
      .result {
        white-space: nowrap;
        transform: scale(0.8);
        transform-origin: left center;
      }

      .origin,
      .result {
        position: absolute;
      }

      .origin {
        bottom: 1em;
      }

      .operate {
        margin-left: 0.5em;
      }

      .result {
        bottom: 0;
      }

      .origin-shadow {
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <section class="settings">
      <div>
        <h3>flex container</h3>
        <div class="list">
          <dl data-key="flex-direction">
            <dt>flex-direction:</dt>
            <dd data-value="row">
              <input type="radio" name="flexDirection" id="flexDirectionRow" />
              <label for="flexDirectionRow">row *</label>
            </dd>
            <dd data-value="column">
              <input type="radio" name="flexDirection" id="flexDirectionColumn" />
              <label for="flexDirectionColumn">column</label>
            </dd>
            <dd data-value="row-reverse">
              <input type="radio" name="flexDirection" id="flexDirectionRowReverse" />
              <label for="flexDirectionRowReverse">row-reverse</label>
            </dd>
            <dd data-value="column-reverse">
              <input type="radio" name="flexDirection" id="flexDirectionColumnReverse" />
              <label for="flexDirectionColumnReverse">column-reverse</label>
            </dd>
          </dl>
          <dl data-key="flex-wrap">
            <dt>flex-wrap:</dt>
            <dd data-value="nowrap">
              <input type="radio" name="flexWrap" id="flexWrapNowrap" />
              <label for="flexWrapNowrap">nowrap *</label>
            </dd>
            <dd data-value="wrap">
              <input type="radio" name="flexWrap" id="flexWrapWrap" />
              <label for="flexWrapWrap">wrap</label>
            </dd>
            <dd data-value="wrap-reverse">
              <input type="radio" name="flexWrap" id="flexWrapWrapReverse" />
              <label for="flexWrapWrapReverse">wrap-reverse</label>
            </dd>
          </dl>
          <dl data-key="justify-content">
            <dt>justify-content:</dt>
            <dd data-value="center">
              <input type="radio" name="justifyContent" id="justifyContentCenter" />
              <label for="justifyContentCenter">center</label>
            </dd>
            <dd data-value="start">
              <input type="radio" name="justifyContent" id="justifyContentStart" />
              <label for="justifyContentStart">start</label>
            </dd>
            <dd data-value="end">
              <input type="radio" name="justifyContent" id="justifyContentEnd" />
              <label for="justifyContentEnd">end</label>
            </dd>
            <dd data-value="flex-start">
              <input type="radio" name="justifyContent" id="justifyContentFlexStart" />
              <label for="justifyContentFlexStart">flex-start</label>
            </dd>
            <dd data-value="flex-end">
              <input type="radio" name="justifyContent" id="justifyContentFlexEnd" />
              <label for="justifyContentFlexEnd">flex-end</label>
            </dd>
            <dd data-value="left">
              <input type="radio" name="justifyContent" id="justifyContentLeft" />
              <label for="justifyContentLeft">left</label>
            </dd>
            <dd data-value="right">
              <input type="radio" name="justifyContent" id="justifyContentRight" />
              <label for="justifyContentRight">right</label>
            </dd>
            <dd data-value="normal">
              <input type="radio" name="justifyContent" id="justifyContentNormal" />
              <label for="justifyContentNormal">normal *</label>
            </dd>
            <dd data-value="space-between">
              <input type="radio" name="justifyContent" id="justifyContentSpaceBetween" />
              <label for="justifyContentSpaceBetween">space-between</label>
            </dd>
            <dd data-value="space-around">
              <input type="radio" name="justifyContent" id="justifyContentSpaceAround" />
              <label for="justifyContentSpaceAround">space-around</label>
            </dd>
            <dd data-value="space-evenly">
              <input type="radio" name="justifyContent" id="justifyContentSpaceEvenly" />
              <label for="justifyContentSpaceEvenly">space-evenly</label>
            </dd>
            <dd data-value="stretch">
              <input type="radio" name="justifyContent" id="justifyContentStretch" />
              <label for="justifyContentStretch">stretch</label>
            </dd>
            <dd data-value="safe center">
              <input type="radio" name="justifyContent" id="justifyContentSafeCenter" />
              <label for="justifyContentSafeCenter">safe center</label>
            </dd>
            <dd data-value="unsafe center">
              <input type="radio" name="justifyContent" id="justifyContentUnsafeCenter" />
              <label for="justifyContentUnsafeCenter">unsafe center</label>
            </dd>
          </dl>
          <dl data-key="align-items">
            <dt>align-items:</dt>
            <dd data-value="normal">
              <input type="radio" name="alignItems" id="alignItemsNormal" />
              <label for="alignItemsNormal">normal *</label>
            </dd>
            <dd data-value="stretch">
              <input type="radio" name="alignItems" id="alignItemsStretch" />
              <label for="alignItemsStretch">stretch</label>
            </dd>
            <dd data-value="center">
              <input type="radio" name="alignItems" id="alignItemsCenter" />
              <label for="alignItemsCenter">center</label>
            </dd>
            <dd data-value="start">
              <input type="radio" name="alignItems" id="alignItemsStart" />
              <label for="alignItemsStart">start</label>
            </dd>
            <dd data-value="end">
              <input type="radio" name="alignItems" id="alignItemsEnd" />
              <label for="alignItemsEnd">end</label>
            </dd>
            <dd data-value="flex-start">
              <input type="radio" name="alignItems" id="alignItemsFlexStart" />
              <label for="alignItemsFlexStart">flex-start</label>
            </dd>
            <dd data-value="flex-end">
              <input type="radio" name="alignItems" id="alignItemsFlexEnd" />
              <label for="alignItemsFlexEnd">flex-end</label>
            </dd>
            <dd data-value="baseline">
              <input type="radio" name="alignItems" id="alignItemsBaseline" />
              <label for="alignItemsBaseline">baseline</label>
            </dd>
            <dd data-value="first baseline">
              <input type="radio" name="alignItems" id="alignItemsFirstBaseline" />
              <label for="alignItemsFirstBaseline">first baseline</label>
            </dd>
            <dd data-value="last baseline">
              <input type="radio" name="alignItems" id="alignItemsLastBaseline" />
              <label for="alignItemsLastBaseline">last baseline</label>
            </dd>
            <dd data-value="safe center">
              <input type="radio" name="alignItems" id="alignItemsSafeCenter" />
              <label for="alignItemsSafeCenter">safe center</label>
            </dd>
            <dd data-value="unsafe center">
              <input type="radio" name="alignItems" id="alignItemsUnsafeCenter" />
              <label for="alignItemsUnsafeCenter">unsafe center</label>
            </dd>
          </dl>
          <dl data-key="align-content">
            <dt title="容器需要高度空间/Container needs height space">align-content:</dt>
            <dd data-value="center">
              <input type="radio" name="alignContent" id="alignContentCenter" />
              <label for="alignContentCenter">center</label>
            </dd>
            <dd data-value="start">
              <input type="radio" name="alignContent" id="alignContentStart" />
              <label for="alignContentStart">start</label>
            </dd>
            <dd data-value="end">
              <input type="radio" name="alignContent" id="alignContentEnd" />
              <label for="alignContentEnd">end</label>
            </dd>
            <dd data-value="flex-start">
              <input type="radio" name="alignContent" id="alignContentFlexStart" />
              <label for="alignContentFlexStart">flex-start</label>
            </dd>
            <dd data-value="flex-end">
              <input type="radio" name="alignContent" id="alignContentFlexEnd" />
              <label for="alignContentFlexEnd">flex-end</label>
            </dd>
            <dd data-value="normal">
              <input type="radio" name="alignContent" id="alignContentNormal" />
              <label for="alignContentNormal">normal *</label>
            </dd>
            <dd data-value="baseline">
              <input type="radio" name="alignContent" id="alignContentBaseline" />
              <label for="alignContentBaseline">baseline</label>
            </dd>
            <dd data-value="first baseline">
              <input type="radio" name="alignContent" id="alignContentFirstBaseline" />
              <label for="alignContentFirstBaseline">first baseline</label>
            </dd>
            <dd data-value="last baseline">
              <input type="radio" name="alignContent" id="alignContentLastBaseline" />
              <label for="alignContentLastBaseline">last baseline</label>
            </dd>
            <dd data-value="space-between">
              <input type="radio" name="alignContent" id="alignContentSpaceBetween" />
              <label for="alignContentSpaceBetween">space-between</label>
            </dd>
            <dd data-value="space-around">
              <input type="radio" name="alignContent" id="alignContentSpaceAround" />
              <label for="alignContentSpaceAround">space-around</label>
            </dd>
            <dd data-value="space-evenly">
              <input type="radio" name="alignContent" id="alignContentSpaceEvenly" />
              <label for="alignContentSpaceEvenly">space-evenly</label>
            </dd>
            <dd data-value="stretch">
              <input type="radio" name="alignContent" id="alignContentStretch" />
              <label for="alignContentStretch">stretch</label>
            </dd>
            <dd data-value="safe center">
              <input type="radio" name="alignContent" id="alignContentSafeCenter" />
              <label for="alignContentSafeCenter">safe center</label>
            </dd>
            <dd data-value="unsafe center">
              <input type="radio" name="alignContent" id="alignContentUnsafeCenter" />
              <label for="alignContentUnsafeCenter">unsafe center</label>
            </dd>
          </dl>
        </div>
      </div>
      <div>
        <header style="display: flex; align-items: center">
          <h3>flex item:</h3>
          <div class="operate"><span data-operate="append">+</span> <span data-operate="remove">-</span></div>
        </header>
        <div class="list">
          <dl data-key="flex-grow">
            <dt>flex-grow:</dt>
            <dd data-value="0">
              <input type="radio" name="flexGrow" id="flexGrow0" />
              <label for="flexGrow0">0 *</label>
            </dd>
            <dd data-value="1">
              <input type="radio" name="flexGrow" id="flexGrow1" />
              <label for="flexGrow1">1</label>
            </dd>
            <dd data-value="2">
              <input type="radio" name="flexGrow" id="flexGrow2" />
              <label for="flexGrow2">2</label>
            </dd>
            <dd data-value="3">
              <input type="radio" name="flexGrow" id="flexGrow3" />
              <label for="flexGrow3">3</label>
            </dd>
          </dl>
          <dl data-key="flex-shrink">
            <dt>flex-shrink:</dt>
            <dd data-value="0">
              <input type="radio" name="flexShrink" id="flexShrink0" />
              <label for="flexShrink0">0</label>
            </dd>
            <dd data-value="1">
              <input type="radio" name="flexShrink" id="flexShrink1" />
              <label for="flexShrink1">1 *</label>
            </dd>
            <dd data-value="2">
              <input type="radio" name="flexShrink" id="flexShrink2" />
              <label for="flexShrink2">2</label>
            </dd>
          </dl>
          <dl data-key="flex-basis">
            <dt title="关键字 content 相关属性目前仅 Firefox 浏览器生效">flex-basis:</dt>
            <dd data-value="auto">
              <input type="radio" name="flexBasis" id="flexBasisAuto" />
              <label for="flexBasisAuto">auto *</label>
            </dd>
            <dd data-value="fill">
              <input type="radio" name="flexBasis" id="flexBasisFill" />
              <label for="flexBasisFill">fill</label>
            </dd>
            <dd data-value="max-content">
              <input type="radio" name="flexBasis" id="flexBasisMaxContent" />
              <label for="flexBasisMaxContent">max-content</label>
            </dd>
            <dd data-value="min-content">
              <input type="radio" name="flexBasis" id="flexBasisMinContent" />
              <label for="flexBasisMinContent">min-content</label>
            </dd>
            <dd data-value="fit-content">
              <input type="radio" name="flexBasis" id="flexBasisFitContent" />
              <label for="flexBasisFitContent">fit-content</label>
            </dd>
            <dd data-value="content">
              <input type="radio" name="flexBasis" id="flexBasisContent" />
              <label for="flexBasisContent">content</label>
            </dd>
          </dl>
          <dl data-key="flex">
            <dt title="flex-grow flex-shrink flex-basis">flex:</dt>
            <!--
              1. 只有一个值时，分给 <flex-grow>：flex: <number> 1 0；
              2. 两个值时：第一个值给 flex-grow；第二个值如果符合 <number> 格式，就分给 <flex-shrink>；如果符合 <width> 格式，就分给 <flex-basis>
              3. 三个值时：<flex-grow>:<number> <flex-shrink>:<number> <flex-basis>:<width>
             -->
            <dd data-value="initial">
              <input type="radio" name="flex" id="flexInitial" />
              <label for="flexInitial">initial (0, 1, auto) *</label>
            </dd>
            <dd data-value="auto">
              <input type="radio" name="flex" id="flexAuto" />
              <label for="flexAuto">auto (1, 1, auto)</label>
            </dd>
            <dd data-value="none">
              <input type="radio" name="flex" id="flexNone" />
              <label for="flexNone">none (0, 0, auto)</label>
            </dd>
          </dl>
        </div>
      </div>
      <span data-drag class="drag drag-top drag-start"></span>
      <span data-drag class="drag drag-top drag-center"></span>
      <span data-drag class="drag drag-top drag-end"></span>
      <span data-drag class="drag drag-middle drag-start"></span>
      <span data-drag class="drag drag-middle drag-end"></span>
      <span data-drag class="drag drag-bottom drag-start"></span>
      <span data-drag class="drag drag-bottom drag-center"></span>
      <span data-drag class="drag drag-bottom drag-end"></span>
    </section>
    <section class="flex"></section>
    <!-- <script src="./polyfill-manual.js"></script> -->
    <!-- <script src="./core-js.min.js"></script> -->
    <!-- <script src="./polyfill-ie.js"></script> -->

    <script>
      var flexEl = document.querySelector('.flex');

      function handlerFlexSize() {
        var height = window.innerHeight;
        flexEl.style.height = height + 'px';
      }

      handlerFlexSize();
      window.addEventListener('resize', handlerFlexSize);
    </script>

    <script>
      /**
       * Get all of an element's parent elements up the DOM tree
       *
       * @param {Node} elem
       * @param {String} selector
       * @returns {Node}
       */
      function getParents(elem, selector) {
        // Element.matches() polyfill
        if (!Element.prototype.matches) {
          Element.prototype.matches =
            Element.prototype.matchesSelector ||
            Element.prototype.mozMatchesSelector ||
            Element.prototype.msMatchesSelector ||
            Element.prototype.oMatchesSelector ||
            Element.prototype.webkitMatchesSelector ||
            function (s) {
              var matches = (this.document || this.ownerDocument).querySelectorAll(s);
              var i = matches.length;

              while (--i >= 0 && matches.item(i) !== this) {}

              return i > -1;
            };
        } // Get the closest matching element

        for (; elem && elem !== document; elem = elem.parentNode) {
          if (elem.matches(selector)) {
            return elem;
          }
        }

        return null;
      }
      /**
       * Getting a random integer between two values, inclusive
       *
       * @param {Number} min
       * @param {Number} max
       * @returns {Number}
       */

      function getRandomIntInclusive(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1) + min); // The maximum is inclusive and the minimum is inclusive
      }
      /**
       * Available space when the screen is maximized
       * @returns {Object}
       * ```
       * {
       *   availHeight,
       *   availWidth
       * }
       * ```
       */

      function getViewAvailHeight() {
        // 屏幕可用尺寸
        var screenAvailHeight = window.screen.availHeight;
        var screenAvailWidth = window.screen.availWidth; // 浏览器控件尺寸

        var windowOuterHeight = window.outerHeight;
        var windowInnerHeight = window.innerHeight;
        var browserOuterHeight = windowOuterHeight - windowInnerHeight;
        var windowOuterWidth = window.outerWidth;
        var windowInnerWidth = window.innerWidth;
        var browserOuterWidth = windowOuterWidth - windowInnerWidth; // 基于屏幕的可用区域

        var availHeight = screenAvailHeight - browserOuterHeight;
        var availWidth = screenAvailWidth - browserOuterWidth;
        return {
          availHeight: availHeight,
          availWidth: availWidth,
        };
      }

      var settingsEl = document.querySelector('.settings');
      var radioEls = document.querySelectorAll('input[type="radio"]'); // 动态生成 Flex Item 个数

      var initCount = getRandomIntInclusive(3, 21); // 动态设置 Flex 样式属性

      var flexEl = document.querySelector('.flex');
      var flexItemEl = null; // 提示当前元素的尺寸

      var flexItemEl1 = null;
      var flexItemEl2 = null;
      var flexItemEl3 = null;
      var flexItemEl4 = null;
      var flexItemEl5 = null;
      var flexItems = null; // 初始尺寸

      var flexItemsSize = ['100*100', '200*200', '50*50', '150*150', '300*300']; // 设定中属性有关联的元素

      var flexGrow0El = document.querySelector('#flexGrow0');
      var flexGrow1El = document.querySelector('#flexGrow1');
      var flexShrink0El = document.querySelector('#flexShrink0');
      var flexShrink1El = document.querySelector('#flexShrink1');
      var flexBasisAutoEl = document.querySelector('#flexBasisAuto');
      var flexInitialEl = document.querySelector('#flexInitial');
      var flexAutoEl = document.querySelector('#flexAuto');
      var flexNoneEl = document.querySelector('#flexNone'); // 只能在 flex item 上设定的属性

      var flexItemKey = ['flex-grow', 'flex-shrink', 'flex-basis', 'flex']; // 记录随机样式索引

      var randomResult = []; // 获取随机样式索引

      function getRandom() {
        var num = getRandomIntInclusive(1, 5); // 最近两次的结果不能相同

        var temp = [];

        if (randomResult.length === 1) {
          temp = [randomResult[0]];
        } else if (randomResult.length > 1) {
          temp = [randomResult[randomResult.length - 1], randomResult[randomResult.length - 2]];
        }

        if (randomResult.length && temp.includes(num)) {
          return getRandom();
        }

        randomResult.push(num);
        return num;
      } // 获取元素，动态创建时需要重新调用

      function getFlexItem() {
        flexItemEl = document.querySelectorAll('.flex__item');
        flexItemEl1 = document.querySelectorAll('.flex__item:nth-child(5n + 1)');
        flexItemEl2 = document.querySelectorAll('.flex__item:nth-child(5n + 2)');
        flexItemEl3 = document.querySelectorAll('.flex__item:nth-child(5n + 3)');
        flexItemEl4 = document.querySelectorAll('.flex__item:nth-child(5n + 4)');
        flexItemEl5 = document.querySelectorAll('.flex__item:nth-child(5n + 5)');
        flexItems = [flexItemEl1, flexItemEl2, flexItemEl3, flexItemEl4, flexItemEl5];
      } // 创建 Flex Item

      function createFlexItem() {
        var _flexItemEl$length, _flexItemEl;

        var length =
          (_flexItemEl$length =
            (_flexItemEl = flexItemEl) === null || _flexItemEl === void 0 ? void 0 : _flexItemEl.length) !== null &&
          _flexItemEl$length !== void 0
            ? _flexItemEl$length
            : 0;
        var itemEl = document.createElement('div');
        itemEl.classList.add('flex__item', 'style-'.concat(getRandom()));
        var indexEl = document.createElement('p');
        indexEl.classList.add('index');
        var indexText = document.createTextNode(length + 1);
        itemEl.append(indexText);
        var originEl = document.createElement('p');
        originEl.classList.add('origin'); // 用来占位，用以 max/min-content 生效

        var originShadowEl = document.createElement('p');
        originShadowEl.classList.add('origin-shadow');
        var resultEl = document.createElement('p');
        resultEl.classList.add('result');
        itemEl.append(indexEl);
        itemEl.append(originEl);
        itemEl.append(originShadowEl);
        itemEl.append(resultEl);
        flexEl.append(itemEl);
      } // 移除 Flex Item

      function removeFlexItem() {
        flexEl.removeChild(flexEl.lastChild);
      } // 设定原始尺寸

      function setFlexItemOriginSize() {
        flexItems.forEach(function (flexItemEls, flexItemIndex) {
          flexItemEls.forEach(function (flexItemEl) {
            var el = flexItemEl.querySelector('.origin');
            var shadowEl = flexItemEl.querySelector('.origin-shadow');
            var size = document.createTextNode('origin: '.concat(flexItemsSize[flexItemIndex]));
            el.innerHTML = '';
            el.append(size.cloneNode());
            shadowEl.innerHTML = '';
            shadowEl.append(size);
          });
        });
      } // 设定不同属性下的尺寸

      function setFlexItemResultSize() {
        flexItems.forEach(function (flexItemEls, flexItemIndex) {
          flexItemEls.forEach(function (flexItemEl) {
            var rect = flexItemEl.getBoundingClientRect();
            var el = flexItemEl.querySelector('.result');
            var size = document.createTextNode(
              'result: '.concat(Math.ceil(rect.width), '*').concat(Math.ceil(rect.height))
            );
            el.innerHTML = '';
            el.append(size);
          });
        });
      } // 设定 Flex Item 样式

      function setFlexItemAttribute(key, value) {
        if (key === 'flex') {
          switch (value) {
            case 'initial':
              flexGrow0El.checked = true;
              flexShrink1El.checked = true;
              flexBasisAutoEl.checked = true;
              break;

            case 'auto':
              flexGrow1El.checked = true;
              flexShrink1El.checked = true;
              flexBasisAutoEl.checked = true;
              break;

            default:
              flexGrow0El.checked = true;
              flexShrink0El.checked = true;
              flexBasisAutoEl.checked = true;
              break;
          }
        } else {
          if (flexGrow0El.checked && flexShrink1El.checked && flexBasisAutoEl.checked) {
            flexInitialEl.checked = true;
          } else if (flexGrow1El.checked && flexShrink1El.checked && flexBasisAutoEl.checked) {
            flexAutoEl.checked = true;
          } else if (flexGrow0El.checked && flexShrink0El.checked && flexBasisAutoEl.checked) {
            flexNoneEl.checked = true;
          } else {
            if (flexInitialEl.checked) {
              flexInitialEl.checked = false;
            }

            if (flexAutoEl.checked) {
              flexAutoEl.checked = false;
            }

            if (flexNoneEl.checked) {
              flexNoneEl.checked = false;
            }
          }
        }

        flexItemEl.forEach(function (item) {
          item.style[key] = value;
        });
      } // 设定 Flex Container 样式

      function setFlexAttribute(key, value) {
        flexEl.style[key] = value;
      } // 初始

      function init(initCount) {
        for (var i = 0; i < initCount; i++) {
          createFlexItem();
          getFlexItem();
        }

        setFlexItemOriginSize();
        setFlexItemResultSize();
      } // 事件处理

      function handler(event) {
        // Label 触发会两次 Click 事件，跳过
        if (event.target.nodeName === 'LABEL') {
          return;
        }

        var operate = event.target.dataset.operate; // 元素增删操作

        if (operate) {
          switch (operate) {
            case 'append':
              createFlexItem();
              getFlexItem();
              setFlexItemOriginSize();
              setFlexItemResultSize();
              break;

            default:
              removeFlexItem();
              getFlexItem();
              break;
          }

          return;
        } // 元素排版操作

        var ddEl = getParents(event.target, 'dd');
        var dlEl = getParents(event.target, 'dl');

        if (ddEl && dlEl) {
          var key = dlEl.dataset.key;
          var value = ddEl.dataset.value;

          if (flexItemKey.includes(key)) {
            setFlexItemAttribute(key, value);
          }

          setFlexAttribute(key, value);
          setFlexItemResultSize();
        }
      }

      init(initCount); // 事件监听

      settingsEl.addEventListener('click', handler); // 刷新时重置

      window.addEventListener('beforeunload', function () {
        radioEls.forEach(function (radioEl) {
          radioEl.checked = false;
        });
        flexEl.setAttribute('style', '');
        flexItemEl.forEach(function (item) {
          item.setAttribute('style', '');
        });
      }); // 基于屏幕的可用区域

      var _getViewAvailHeight = getViewAvailHeight(),
        availHeight = _getViewAvailHeight.availHeight;

      var rect = settingsEl.getBoundingClientRect();
      var settingsHeight = Math.ceil(rect.height);
      settingsEl.style.top = ''.concat(availHeight - settingsHeight - 40 - 32, 'px'); // 拖动配置框
      // [Create a Draggable Element in JavaScript | KIRUPA](https://www.kirupa.com/html5/drag.htm)

      var container = document.querySelector('body');
      var activeItem = null;
      var active = false;

      function dragStart(e) {
        if (e.target.dataset.drag !== undefined) {
          active = true; // this is the item we are interacting with

          activeItem = settingsEl;

          if (activeItem !== null) {
            if (!activeItem.xOffset) {
              activeItem.xOffset = 0;
            }

            if (!activeItem.yOffset) {
              activeItem.yOffset = 0;
            }

            if (e.type === 'touchstart') {
              activeItem.initialX = e.touches[0].clientX - activeItem.xOffset;
              activeItem.initialY = e.touches[0].clientY - activeItem.yOffset;
            } else {
              activeItem.initialX = e.clientX - activeItem.xOffset;
              activeItem.initialY = e.clientY - activeItem.yOffset;
            }
          }
        }
      }

      function dragEnd(e) {
        if (activeItem !== null) {
          activeItem.initialX = activeItem.currentX;
          activeItem.initialY = activeItem.currentY;
        }

        active = false;
        activeItem = null;
      }

      function drag(e) {
        if (active) {
          if (e.type === 'touchmove') {
            e.preventDefault();
            activeItem.currentX = e.touches[0].clientX - activeItem.initialX;
            activeItem.currentY = e.touches[0].clientY - activeItem.initialY;
          } else {
            activeItem.currentX = e.clientX - activeItem.initialX;
            activeItem.currentY = e.clientY - activeItem.initialY;
          }

          activeItem.xOffset = activeItem.currentX;
          activeItem.yOffset = activeItem.currentY;
          setTranslate(activeItem.currentX, activeItem.currentY, activeItem);
        }
      }

      function setTranslate(xPos, yPos, el) {
        el.style.transform = 'translate3d(' + xPos + 'px, ' + yPos + 'px, 0)';
      }

      container.addEventListener('touchstart', dragStart, false);
      container.addEventListener('touchend', dragEnd, false);
      container.addEventListener('touchmove', drag, false);
      container.addEventListener('mousedown', dragStart, false);
      container.addEventListener('mouseup', dragEnd, false);
      container.addEventListener('mousemove', drag, false);
    </script>
  </body>
</html>
