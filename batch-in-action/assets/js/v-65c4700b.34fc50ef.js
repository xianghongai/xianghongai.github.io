(self.webpackChunkfeatures=self.webpackChunkfeatures||[]).push([[853],{3298:(s,a,n)=>{"use strict";n.r(a),n.d(a,{data:()=>e});const e={key:"v-65c4700b",path:"/export-high-quality-gif-pictures-from-video.html",title:"从视频导出高质量 GIF 图片",lang:"zh-CN",frontmatter:{},excerpt:'<h1 id="从视频导出高质量-gif-图片" tabindex="-1"><a class="header-anchor" href="#从视频导出高质量-gif-图片" aria-hidden="true">#</a> 从视频导出高质量 GIF 图片</h1>\n<p>依赖 <a href="https://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer">ffmpeg<OutboundLink/></a>，配置 ffmpeg 到环境变量。</p>\n',headers:[{level:2,title:"1. 从视频片断导出高质量GIF",slug:"_1-从视频片断导出高质量gif",children:[]},{level:2,title:"2. 整个视频导出高质量GIF",slug:"_2-整个视频导出高质量gif",children:[{level:3,title:"FPS",slug:"fps",children:[]}]}],filePathRelative:"export-high-quality-gif-pictures-from-video.md",git:{updatedTime:null,contributors:[]}}},5166:(s,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>c});var e=n(6252);const t=(0,e.Wm)("h1",{id:"从视频导出高质量-gif-图片",tabindex:"-1"},[(0,e.Wm)("a",{class:"header-anchor",href:"#从视频导出高质量-gif-图片","aria-hidden":"true"},"#"),(0,e.Uk)(" 从视频导出高质量 GIF 图片")],-1),l=(0,e.Uk)("依赖 "),p={href:"https://www.ffmpeg.org/",target:"_blank",rel:"noopener noreferrer"},i=(0,e.Uk)("ffmpeg"),r=(0,e.Uk)("，配置 ffmpeg 到环境变量。"),o=(0,e.uE)('<h2 id="_1-从视频片断导出高质量gif" tabindex="-1"><a class="header-anchor" href="#_1-从视频片断导出高质量gif" aria-hidden="true">#</a> 1. 从视频片断导出高质量GIF</h2><p>新建文本文件，将下面代码保存，并改文件名和后缀名为 <code>gif.bat</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>@echo off\nsetlocal enabledelayedexpansion\n\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">gif_filename</span><span class="token operator">=</span><span class="token string">&quot;%2.gif&quot;</span>\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">start_time</span><span class="token operator">=</span>%3\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">duration</span><span class="token operator">=</span>%4\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">palette</span><span class="token operator">=</span><span class="token string">&quot;palette.png&quot;</span>\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">filters</span><span class="token operator">=</span><span class="token string">&quot;fps=%5,scale=%6:-1:flags=lanczos&quot;</span>\n\nffmpeg -v warning -ss %start_time% -t %duration% -i %1 -vf <span class="token string">&quot;%filters%,palettegen=max_colors=%7:stats_mode=diff&quot;</span> -y %palette%\nffmpeg -v warning -ss %start_time% -t %duration% -i %1 -i %palette% -lavfi <span class="token string">&quot;%filters% [x]; [x][1:v] paletteuse=dither=floyd_steinberg&quot;</span> -y %gif_filename%\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>将 <code>gif.bat</code> 放在视频所在文件夹，</p><p>在视频文件夹图标上，按住 Shift， 点击鼠标右键选择：在此处打开命令窗口</p><p>运行命令：</p><p><code>gif.bat input.mp4 output 00:00:25 00:00:35 10 640 256</code></p><p>对应解释：</p><p><code>gif.bat 导入视频源 导出Gif图片名 开始时间 结束/持续时间 帧率 宽度 色彩数(4-256)</code></p><h2 id="_2-整个视频导出高质量gif" tabindex="-1"><a class="header-anchor" href="#_2-整个视频导出高质量gif" aria-hidden="true">#</a> 2. 整个视频导出高质量GIF</h2><p>同样准备文件 <code>gif-all.bat</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>@echo off\nsetlocal enabledelayedexpansion\n\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">gif_filename</span><span class="token operator">=</span><span class="token string">&quot;%2.gif&quot;</span>\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">palette</span><span class="token operator">=</span><span class="token string">&quot;palette.png&quot;</span>\n<span class="token builtin class-name">set</span> <span class="token assign-left variable">filters</span><span class="token operator">=</span><span class="token string">&quot;fps=%3,scale=%4:-1:flags=lanczos&quot;</span>\n\nffmpeg -v warning -i %1 -vf <span class="token string">&quot;%filters%,palettegen=max_colors=%5:stats_mode=diff&quot;</span> -y %palette%\nffmpeg -v warning -i %1 -i %palette% -lavfi <span class="token string">&quot;%filters% [x]; [x][1:v] paletteuse=dither=floyd_steinberg&quot;</span> -y %gif_filename%\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>调用：<code>gif-all.bat input.mp4 output 10 640 256</code></p><h3 id="fps" tabindex="-1"><a class="header-anchor" href="#fps" aria-hidden="true">#</a> FPS</h3><ul><li>5 (max 60 seconds)</li><li>7 (max 40 seconds)</li><li>10 (max 30 seconds)</li><li>20 (max 15 seconds)</li><li>25 (max 10 seconds)</li></ul><hr><p>如果要导多个 gif 图片，可以先记录好视频中各出入点，一行行编写到另一个批处理文件，然后再 <code>start</code>。</p><hr><p>更新日志：</p><ul><li>2017-05-27</li></ul>',20),c={render:function(s,a){const n=(0,e.up)("OutboundLink");return(0,e.wg)(),(0,e.j4)(e.HY,null,[t,(0,e.Wm)("p",null,[l,(0,e.Wm)("a",p,[i,(0,e.Wm)(n)]),r]),o],64)}}}}]);