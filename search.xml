<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>关于编辑器</title>
    <link href="/tech/editor.html"/>
    <url>/tech/editor.html</url>
    <content type="html">
      <![CDATA[<p>编辑器适合在计算机上从事生产活动用，不仅用于编码。</p><a id="more"></a><h2 id="前话"><a href="#前话" class="headerlink" title="前话"></a>前话</h2><p>我深度使用 Visual Studio Code 和 Sublime Text 3 这两个编辑器，主力 Visual Studio Code，配合使用 Sublime Text 3，稳定轻巧快速，得心应手。</p><p>IDE 用过 VS、JetBrains IDEA &amp; WebStorm、Eclipse；</p><p>弱集成、无集成编辑器用过 Dreamweaver、Brackets、Notepad++、Atom；</p><p>IDE 活好，尤其是引用追踪，比普通编辑器精准；当然 IDE <strong>消费、消耗</strong>也高；</p><p>Editor 不装扩展不调教和系统自带的文本编辑器没区别，装了扩展都是怪兽，这一点比 IDE 更为灵活和强大；</p><p>编辑器需要常常调教，日久生情难舍难分。</p><h2 id="调教思路"><a href="#调教思路" class="headerlink" title="调教思路"></a>调教思路</h2><p>调教就“三前提”、“两方向”和“一备份”：</p><ul><li>前提<ul><li>8G 以上内存</li><li>SSD 硬盘</li><li>安装扩展/插件</li></ul></li><li>方向<ul><li>配置(Settings)</li><li>快捷键(Shortcuts)</li></ul></li><li>备份<ul><li>备份调教信息，不同时空依然如旧(Sync)</li></ul></li></ul><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>编辑器社区会有大量的扩展资源，按需找扩展，我是按以下分类找的：</p><ul><li>语言编写支持</li><li>语法校验</li><li>注释</li><li>代码块</li><li>插入字符(insert 日期时间、数字…)</li><li>格式化文档</li><li>书签、标记与识别</li><li><strong>行、列、符号范围字符快速选择与操作</strong></li><li>文件对比，diff</li><li>文件名、路径</li><li>Markdown (文档标记语言，使用计算机必知必会)</li><li>Git (文档存储，使用计算机必知必会，推荐 Github、GitLab、Bitbucket 私有仓库)</li></ul><p>这里贴几个跟具体语言无关、通用的插件：</p><p>Visual Studio Code：书签 <a href="https://marketplace.visualstudio.com/items?itemName=alefragnani.Bookmarks" target="_blank" rel="noopener">Bookmarks</a>、彩色括号对 <a href="https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer" target="_blank" rel="noopener">Bracket Pair Colorizer</a>、命名方式 <a href="https://marketplace.visualstudio.com/items?itemName=wmaurer.change-case" target="_blank" rel="noopener">Change Case</a>、扩展选择 <a href="https://marketplace.visualstudio.com/items?itemName=letrieu.expand-region" target="_blank" rel="noopener">Expand Region</a>、范围选择 <a href="https://marketplace.visualstudio.com/items?itemName=dbankier.vscode-quick-select" target="_blank" rel="noopener">Quick and Simple Text Selection、Markdown Preview Enhanced</a>、<a href="https://marketplace.visualstudio.com/items?itemName=wayou.vscode-todo-highlight" target="_blank" rel="noopener">TODO Highlight</a>、<a href="https://marketplace.visualstudio.com/items?itemName=ryu1kn.partial-diff" target="_blank" rel="noopener">Partial Diff</a>、同步 <a href="https://marketplace.visualstudio.com/items?itemName=Shan.code-settings-sync" target="_blank" rel="noopener">Settings Sync</a>。</p><p>Sublime Text 3：范围选择 <a href="https://packagecontrol.io/packages/ExpandRegion" target="_blank" rel="noopener">Expand​ Region</a>、命名方式 <a href="https://packagecontrol.io/packages/Case%20Conversion" target="_blank" rel="noopener">Case Conversion</a>、彩色括号对 <a href="https://packagecontrol.io/packages/BracketHighlighter" target="_blank" rel="noopener">BracketHighlighter</a>、删除空白行 <a href="https://packagecontrol.io/packages/DeleteBlankLines" target="_blank" rel="noopener">DeleteBlankLines</a>、文件对比 <a href="https://packagecontrol.io/packages/FileDiffs" target="_blank" rel="noopener">FileDiffs</a>、<a href="https://packagecontrol.io/packages/Markdown%20Extended" target="_blank" rel="noopener">Markdown Extended</a>、<a href="https://packagecontrol.io/packages/MarkdownPreview" target="_blank" rel="noopener">MarkdownPreview</a>、同步 <a href="https://packagecontrol.io/packages/Sync%20Settings" target="_blank" rel="noopener">Sync Settings</a>。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>不要深度配置，避免工具和扩展功能调整带来影响：</p><ul><li>字体，<code>&#39;Source Code Variable&#39;,&#39;Ubuntu Mono&#39;</code></li><li>主题，要什么主题，顶多加个文件图标扩展</li><li>忽略某些文件</li><li>忽略某些文件夹</li></ul><h2 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h2><p>快捷键算是调教中最重要的；</p><p>所有编辑器都存在快捷键泛滥的情况；</p><p>你们想想，你带着妹纸敲上了代码，写着脚本还调着样式，突然想来个骚操作可就怎么都不行了，所以，<strong>没有预设快捷键的扩展才是好扩展！甚至没有预设快捷键的编辑器才是真正的好编辑器</strong>。</p><p>配置快捷键之前，先了解一下计算机键盘，按用处可分为调节键(Modifier keys)、编辑键(Editing)、导航键(Navigation keys)、锁定键(Lock keys)、综合键(Contextual)等键位；</p><p>再了解一下 Alt、Ctrl、Shift <strong>调节键</strong>的功能：</p><ul><li>Alt (Alternate)，修饰键，切换，转换，侧重“动”，如：实现切换窗口、关闭当前应用程序、选择(访问)菜单等功能；</li><li>Ctrl (Control)，控制键，侧重“控”；</li><li>Shift 转换键，辅助控制键，范围获取键，侧重“辅助”(挂档)，如：字符选择，输入切换、字母大小写及数字字符转换。</li></ul><p>下面谈谈所有软件快捷键的配置方式：</p><ul><li>IDE 和 大型专业软件，不配置自定义快捷键，按它的方式操作；</li><li>有用 IDE 和 编辑器，可将编辑器的快捷键、配置调教成 IDE 的操作方式；</li><li>编辑器领域几个常用的按键不要被覆盖：<code>Ctrl+Shift+P</code>、<code>Ctrl+P</code>、<code>Ctrl+R</code>、<code>Ctrl+G</code>、<code>Ctrl+;</code>、<code>Ctrl+~</code>、<code>Ctrl+D</code>；</li><li>计算机领域几个常用的按键不要被覆盖：<code>Ctrl+A</code>/<code>C</code>/<code>V</code>/<code>X</code>/<code>F</code>/<code>H</code>/<code>N</code>/<code>O</code>/<code>P</code>/<code>Q</code>/<code>S</code>/<code>W</code>/<code>Z</code>，<code>F1</code>；</li><li>不可单独使用 <code>Shift</code> 按键；</li><li>不单独使用 <code>F1~F12</code> 功能键，编码类操作不用功能键，太大，一手无法掌控；</li><li>不要分配其它功能到 <code>F3</code>/查找、<code>F5</code>/构建、<code>F12</code>/定义引用 三个键；</li><li>不要分配其它功能到 Left、Right 导航键；</li><li>不使用 <code>Alt+字母</code> 按键，此操作通常访问菜单；</li><li>不要四键及以上触发</li></ul><p>定睛一看，留给我们用户可自定义的字母按键，没几个！二键触发日常使用几乎不可能实现了，想想 VIM 多任性，一键触发。</p><p>接下来再谈谈，编辑器中常用快捷键种类：</p><ul><li>编辑器窗口分屏、移动、聚焦；</li><li>代码类操作：行、关键字、定义引用定位跳转，书签跳转，提示，注释，行前行后插入编辑，缩进，折叠展开，格式化，调试断点，变量命名；</li><li>行、列、标签对上属性字符选择与操作；</li><li>文件和目录操作。</li></ul><p>差不多了，其它操作就 <code>Ctrl+Shift+P</code> 输入指令调用吧。</p><p>下面是我对编辑器快捷键的部分配置，这么多年用下来感觉比较便捷。</p><p>Visual Studio Code 中生效，<sup>(v)</sup>；</p><p>Sublime Text 3 中生效，<sup>(s)</sup>；</p><h3 id="编辑器通用指令"><a href="#编辑器通用指令" class="headerlink" title="编辑器通用指令"></a>编辑器通用指令</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>执行编辑器和插件的命令</td><td><code>Ctrl+Shift+P</code></td></tr><tr><td>定位文件</td><td><code>Ctrl+P</code></td></tr><tr><td>跳转到行(Line)</td><td><code>Ctrl+G</code></td></tr><tr><td>跳转到符号(Symbol)</td><td><code>Ctrl+R</code></td></tr><tr><td>列模式选择</td><td><code>Ctrl+D</code></td></tr><tr><td>行选择</td><td><code>Ctrl+L</code></td></tr></tbody></table><p><code>Ctrl+P</code>，输入<code>:</code> 转到行，输入<code>@</code> 转到符号(Symbol)；输入<code>@:</code> 转到符号(分类) <sup>(v)</sup></p><h3 id="书签"><a href="#书签" class="headerlink" title="书签"></a>书签</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>添加、取消书签</td><td><code>Ctrl+K+K</code></td></tr><tr><td>跳至下一书签</td><td><code>Ctrl+K+N</code></td></tr><tr><td>跳至上一书签</td><td><code>Ctrl+K+P</code></td></tr><tr><td>清除当前文档所有书签</td><td><code>Ctrl+K+C</code></td></tr><tr><td>当前文档所有书签</td><td><code>Ctrl+K+A</code></td></tr></tbody></table><h3 id="缩进和折叠"><a href="#缩进和折叠" class="headerlink" title="缩进和折叠"></a>缩进和折叠</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>缩</td><td><code>Ctrl+[</code></td></tr><tr><td>进</td><td><code>Ctrl+]</code></td></tr><tr><td>折叠当前层级</td><td><code>Ctrl+Shift+[</code></td></tr><tr><td>展开当前层级</td><td><code>Ctrl+Shift+]</code></td></tr><tr><td>折叠所有</td><td><code>Ctrl+K+0</code><sup>(v)</sup></td></tr><tr><td>层级折叠</td><td><code>Ctrl+K+1</code>-<code>7</code></td></tr><tr><td>展开所有</td><td><code>Ctrl+K+J</code></td></tr><tr><td>折叠 HTML 标签属性</td><td><code>Ctrl+K+T</code><sup>(s)</sup></td></tr><tr><td>折叠块级注释</td><td><code>Ctrl+K+/</code><sup>(v)</sup></td></tr></tbody></table><h3 id="变量命名方式"><a href="#变量命名方式" class="headerlink" title="变量命名方式"></a>变量命名方式</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td><code>change_case</code> snake</td><td><code>Ctrl+U+S</code></td></tr><tr><td><code>change-case</code> kebab</td><td><code>Ctrl+U+K</code></td></tr><tr><td><code>changeCase</code> camel</td><td><code>Ctrl+U+C</code></td></tr><tr><td><code>ChangeCase</code> pascal</td><td><code>Ctrl+U+P</code></td></tr><tr><td><code>CHANGE_CASE</code> screaming_snake(constant)</td><td><code>Ctrl+U+U</code></td></tr><tr><td><code>change.case</code> dot</td><td><code>Ctrl+U+D</code></td></tr><tr><td><code>change/case</code> slash(path)</td><td><code>Ctrl+U+/</code></td></tr><tr><td><code>change case</code> separate words</td><td><code>Ctrl+U+W</code></td></tr><tr><td><code>Change Case</code> title</td><td><code>Ctrl+U+T</code><sup>(v)</sup></td></tr></tbody></table><h3 id="强大的选择功能"><a href="#强大的选择功能" class="headerlink" title="强大的选择功能"></a>强大的选择功能</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>列模式选择所有项</td><td><code>Alt+F3</code></td></tr><tr><td>列模式选择</td><td><code>Ctrl+Shift+↑</code>/<code>↓</code></td></tr><tr><td>复制内容到上/下一位置</td><td><code>Alt+Shift+↑</code>/<code>↓</code></td></tr><tr><td>向内(inner)、外(outer)选择</td><td><code>Alt+Shift+I</code>/<code>O</code></td></tr><tr><td>扩展选择至 行(line)</td><td><code>Ctrl+E+L</code><sup>(s)</sup></td></tr><tr><td>扩展选择至 括号对(brackets)</td><td><code>Ctrl+E+B</code><sup>(s)</sup></td></tr><tr><td>扩展选择至 同层级(indentation)</td><td><code>Ctrl+E+I</code><sup>(s)</sup></td></tr><tr><td>扩展选择至 同标签(tag)</td><td><code>Ctrl+E+T</code><sup>(s)</sup></td></tr><tr><td>扩展选择至 同作用域(scope)</td><td><code>Ctrl+E+S</code><sup>(s)</sup></td></tr><tr><td>扩展选择至 同段落(paragraph)</td><td><code>Ctrl+E+P</code><sup>(s)</sup></td></tr><tr><td>删除行</td><td><code>Ctrl+Shift+K</code></td></tr><tr><td>扩展选择至 <code>( )</code></td><td><code>Alt+Shift+(</code><sup>(v)</sup></td></tr><tr><td>扩展选择至 <code>[ ]</code></td><td><code>Alt+Shift+[</code><sup>(v)</sup></td></tr><tr><td>扩展选择至 <code>&lt; &gt;</code></td><td><code>Alt+Shift+&lt;</code><sup>(v)</sup></td></tr><tr><td>扩展选择至 <code>&#39; &#39;</code>、<code>&quot; &quot;</code></td><td><code>Alt+Shift+&#39;</code><sup>(v)</sup></td></tr><tr><td>扩展选择至 ` `</td><td><code>Alt+Shift+`</code><sup>(v)</sup></td></tr><tr><td>扩展选择至 <code>{ }</code></td><td><code>Ctrl+Alt+Shift+{</code><sup>(v)</sup></td></tr></tbody></table><h3 id="编辑器容器"><a href="#编辑器容器" class="headerlink" title="编辑器容器"></a>编辑器容器</h3><p>编辑器它是这样的：窗口器/Window → 组/Group → 编辑器/Editor → 文件/File。</p><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>新建文件</td><td><code>Ctrl+N</code></td></tr><tr><td>新建窗口</td><td><code>Ctrl+Shift+N</code></td></tr><tr><td>打开文件</td><td><code>Ctrl+O</code></td></tr><tr><td>打开文件夹</td><td><code>Ctrl+Shift+O</code></td></tr><tr><td>在新窗口打开当前文件</td><td><code>Ctrl+Alt+Shift+O</code><sup>(v)</sup></td></tr><tr><td>关闭当前文件</td><td><code>Ctrl+W</code></td></tr><tr><td>关闭所有编辑器</td><td><code>Ctrl+K+W *</code></td></tr><tr><td>退出当前程序</td><td><code>Ctrl+Shift+W</code><sup>(v)</sup></td></tr><tr><td>资源管理器打开文件所在位置</td><td><code>Alt+X</code></td></tr><tr><td>菜单栏显示隐藏 Toggle</td><td><code>Ctrl+T+M</code></td></tr><tr><td>状态栏显示隐藏</td><td><code>Ctrl+T+S</code></td></tr><tr><td>侧边栏显示隐藏</td><td><code>Ctrl+B</code></td></tr><tr><td>打开或关闭命令终端</td><td><code>Ctrl+~</code></td></tr></tbody></table><h3 id="分屏-组-与移动"><a href="#分屏-组-与移动" class="headerlink" title="分屏(组)与移动"></a>分屏(组)与移动</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>分屏</td><td><code>Ctrl+\</code></td></tr><tr><td>撤销分屏</td><td><code>Ctrl+Shift+\</code></td></tr><tr><td>聚焦左/右一文件</td><td><code>Ctrl+PageUp/PageDown</code></td></tr><tr><td>文件组内左/右移</td><td><code>Ctrl+Alt+PageUp</code>/<code>PageDown</code><sup>(v)</sup></td></tr><tr><td>文件移至上、下一组</td><td><code>Ctrl+Shift+PageUp</code>/<code>PageDown</code></td></tr><tr><td>组左、右移</td><td><code>Alt+Shift+PageUp</code>/<code>PageDown</code><sup>(v)</sup></td></tr><tr><td>聚焦第1-9个文件</td><td><code>Alt+1</code>-<code>9</code></td></tr><tr><td>聚焦第1-9组</td><td><code>Ctrl+1</code>-<code>9</code></td></tr><tr><td>聚焦侧边栏</td><td><code>Ctrl+0</code></td></tr><tr><td>文件移至第1至9组</td><td><code>Ctrl+Shift+1</code>-<code>9</code><sup>(s)</sup></td></tr><tr><td>分屏</td><td><code>Alt+Shift+1</code>/<code>2</code>(水平)/<code>3</code>/<code>4</code>/<code>5</code>(四宫格)/<code>8</code>(2个垂直)/<code>9</code>(3个垂直) <sup>(s)</sup></td></tr><tr><td>垂直、水平方向分屏(Layout)</td><td><code>Shift+Alt+L</code><sup>(v)</sup></td></tr></tbody></table><h3 id="编辑器内置指令"><a href="#编辑器内置指令" class="headerlink" title="编辑器内置指令"></a>编辑器内置指令</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>光标在括号对前后移动(Brackets)</td><td><code>Ctrl+M+B</code></td></tr><tr><td>光标在标签对前后移动(Tag)</td><td><code>Ctrl+M+T</code></td></tr><tr><td>查看定义(Definition)</td><td><code>F12</code></td></tr><tr><td>查看引用(Reference)</td><td><code>Shift+F12</code></td></tr><tr><td>整个工程中的 Symbol</td><td><code>Ctrl+Shift+R</code></td></tr><tr><td>上一 Symbol</td><td><code>Shift+F7</code><sup>(v)</sup></td></tr><tr><td>下一 Symbol</td><td><code>F7</code><sup>(v)</sup></td></tr><tr><td>字符换行 Word Wrap</td><td><code>Alt+z</code></td></tr><tr><td>全屏</td><td><code>F11</code></td></tr></tbody></table><h3 id="Emmet"><a href="#Emmet" class="headerlink" title="Emmet"></a>Emmet</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>HTML 标签、CSS 选择器前、后选择“属性、值”</td><td><code>Alt+&lt;</code>/<code>&gt;</code></td></tr><tr><td>HTML 中上、下一编辑点</td><td><code>Ctrl+Alt+&lt;</code>/<code>&gt;</code></td></tr><tr><td>HTML 中向层级内、外选择</td><td><code>Alt+Shift+-</code>/<code>=</code></td></tr><tr><td>HTML 添加包裹标签</td><td><code>Ctrl+Shift+G</code></td></tr><tr><td>HTML 更新标签</td><td><code>Ctrl+Shift+;</code></td></tr><tr><td>HTML 移除标签</td><td><code>Ctrl+Shift+&quot;</code></td></tr><tr><td>太多…</td></tr></tbody></table><h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><table><thead><tr><th>Fn</th><th>Key</th></tr></thead><tbody><tr><td>触发建议</td><td><code>Alt+/</code></td></tr><tr><td>触发建议细节</td><td><code>Ctrl+Alt+/</code></td></tr><tr><td>触发参数提示</td><td><code>Ctrl+Shift+Alt+/</code></td></tr><tr><td>预览Markdown</td><td><code>Ctrl+K+V</code><sup>(v)</sup></td></tr></tbody></table><hr><p><a href="http://link.zhihu.com/?target=https%3A//code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a> 可安装 <a href="http://link.zhihu.com/?target=https%3A//marketplace.visualstudio.com/items%3FitemName%3DShan.code-settings-sync" target="_blank" rel="noopener">Settings Sync</a> 同步 “gist_id”: “5f0eb9482b96be16eb6865cbc7728d29”;</p><p><a href="http://link.zhihu.com/?target=http%3A//sublimetext.com/" target="_blank" rel="noopener">Sublime Text 3</a> 可安装 <a href="http://link.zhihu.com/?target=https%3A//packagecontrol.io/packages/Sync%2520Settings" target="_blank" rel="noopener">Sync Settings</a> 同步 “gist_id”: “22d1bb9a4e2deb93fc772542ad15433c”;</p><p><a href="https://pan.baidu.com/s/1TItZc90LQTOSlqaIhyAdWQ" target="_blank" rel="noopener">字体：Share/Font/Source-Code-Pro.zip</a> 提取码：1024</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> editor </tag>
    </tags>
  </entry>
  <entry>
    <title>Adobe XD 操作</title>
    <link href="/tech/adobe-xd.html"/>
    <url>/tech/adobe-xd.html</url>
    <content type="html">
      <![CDATA[<p>Adobe XD ，简单、优雅，功能介于 Axure 和 Sketch 之间，既能 Prototype 又能 UI。</p><p>目前 14.0.42.14 版本，更多功能实现是 UI 设计，原型交互效果这部分不及 <a href="https://www.flinto.com/" target="_blank" rel="noopener">Flinto</a>、<a href="http://principleformac.com/" target="_blank" rel="noopener">Principle</a>、<a href="https://www.protopie.io/" target="_blank" rel="noopener">ProtoPie</a>这类工具，Adobe XD 基础部分已经夯实，Apple、巨硬 Fluent、Google Materail 几个大厂已经有 XD 资源包，加上免费策略，应该是设计界的 Visual Studio Code，冉冉新星。</p><a id="more"></a><ul><li>了解 “画布”、“图层”、“对象”、“编组”、“路径”、“锚点” 等图形处理术语；</li><li>工具箱按键：选择(V)、矩形(R)、椭圆形(E)、线条(L)、画笔(P)、文字(T)、画布(A)、缩放(Z)</li><li>滚动视图：按住 <code>Space/空格</code> 键，抓手工具，以滚动视图；按住 <code>Shift+鼠标滚轮</code>，左右滚动视图；</li><li>缩放：<ul><li>按住 <code>Ctrl+Shift+鼠标滚轮</code>，快速缩放；好用</li><li>按一下 <code>Z</code> 键，点击、拖动<code>放大</code>；按住 <code>Alt</code> 键不放，点击、拖动<code>缩小</code>；难用</li><li>视图辅助用按键: <code>Ctrl+0/1/2/3/-/+</code> 对应 <code>所有/100%/200%/当前选择画布/缩小/放大</code></li></ul></li><li>选择： <code>Shift</code> 加左键点击挑选多个对象；按住左键拖，范围内选择多个图层；</li><li>绘制/调整对象大小<ul><li>按 <code>Shift</code> 键，从对象“左上”保持宽高比</li><li>按 <code>Alt+Shift</code> 键，从对象“中心”保持宽高比</li><li>按 <code>Alt</code> 键，从对象“中心”对称调整</li></ul></li><li>复制：<code>Alt + 左键拖</code>，复制图层；<code>Alt+Shift+左键拖</code>，限定方向复制图层； <code>Ctrl+D</code> 再制；</li><li>移动：按 <code>Shift</code> 键可限定方向移动对象；按 <code>Shift+↑↓←→</code> 以每 <code>10px</code> 单位移动对象；按 <code>Ctrl+Shift+↑↓←→</code> 将对象移至画布最边上；</li><li>旋转：按 <code>Shift</code> 键以每 <code>15°</code> 旋转对象；一般加 <code>Shift</code> 上档键可视为约束操作；</li><li>对齐、分布：选中对象，点右侧“对齐”面板图标实现各种对齐和分布；</li><li>层次排列: <code>Ctrl+[</code>/<code>Ctrl+]</code>，图层后/前移一层，加一个 <code>Shift</code> 就是移至“底/顶”；</li><li>编组： 对图层进行编组，为了维护、复用、导出；选择对象，鼠标右键→“Group”/<code>Ctrl+G</code>；</li><li>锁定： 做完防止手误移动，可 鼠标右键→“Lock”/<code>Ctrl+L</code> 锁定对象；</li><li>Symbols：组件化，对一个/组对象 鼠标右键→“Make Symbols”/<code>Ctrl+K</code>，在左侧工具栏下方 “Assets” 面板中，可以看到这个 Symbols，可以拖入画板复用；</li><li>色卡：选择“颜色”时候，确定了要用这个色彩，就点一下 “+” Save Color Swatch，将常用的色彩保存到色卡；</li><li>色彩资源：选中一个对象，鼠标右键→“Add Color to Assets”/<code>Shift+Ctrl+C</code>，或在 “Assets” 面板， “Colors” 面板点 “+”，将颜色参数化；对应项鼠标右键→“Edit”，可以统一调整；</li><li>文字资源：选中一个文本对象，鼠标右键→“Add Character Styles to Assets”/<code>Shift+Ctrl+T</code>，或在 “Assets” 面板， “Character Styles” 面板点 “+”，将文字排版参数化；对应项鼠标右键→“Edit”，可以统一调整；</li><li>蒙版遮盖：先 <code>Ctrl+Shift+i</code> 导入一张图形素材(后)，再画一个形状用作蒙版(前)，选中这两个对象，鼠标右键→“Mask With Shape”/<code>Ctrl+Shift+M</code>，将图形嵌入形状中，双击进入可拖动图形位置；鼠标右键→“Ungroup Mask”/<code>Ctrl+Shift+G</code> 可取消遮罩；</li><li>重复网格：选中一个/组对象，右侧操作面板 “Repeat Grid” ，拖动以重复；</li><li>透明度：1 = 10％，2 = 20％，… 0 = 100%；</li><li>布尔运算组合对象：两个形状，可以进行 “Add”、“Subtract/减去顶层”、“Intersect/相交”、“Exclude Overlap/排除重叠”；取消编组可复原；</li><li>锚点<ul><li>双击形状，<code>BackSpace</code> 键可删除路径中选中的锚点，用以生成绘制其它形状</li><li>双击锚点，在曲线和角度之间切换</li><li>按 <code>Alt</code> 键拖动曲线手柄，可控制手柄范围</li></ul></li><li>画布，点击标题可选择；按住 <code>Shift</code> 可选择多个，可进行移动、对齐操作；<code>Ctrl+D</code>可再制画布；</li><li>导出：可将画布、对象导出为各种格式图形文档；</li><li>原型设计和预览：就是加页面之间的跳转与过渡效果，自己点点点琢磨一下；</li><li><strong>边做边保存</strong>，习惯性按 <code>Ctrl+S</code>，这应该是计算机上操作所有软件的习惯。</li></ul><p><img src="https://i.loli.net/2019/01/03/5c2daddbaf376.png" alt="Adobe XD"></p><hr><ul><li><a href="https://pan.baidu.com/s/1p2TldK-wEfK8BFFxmJfv2Q" target="_blank" rel="noopener">示例文件</a></li><li><a href="https://helpx.adobe.com/cn/xd/user-guide.html" target="_blank" rel="noopener">Adobe XD 用户指南</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> design </tag>
    </tags>
  </entry>
  <entry>
    <title>也致第一次安装Rime的你</title>
    <link href="/tech/rime.html"/>
    <url>/tech/rime.html</url>
    <content type="html">
      <![CDATA[<p>我的需求是需要一套跨平台的输入方案:</p><p>因此，我选择了 <a href="http://rime.im/" target="_blank" rel="noopener">Rime</a>。</p><a id="more"></a><h2 id="0、安装"><a href="#0、安装" class="headerlink" title="0、安装"></a>0、安装</h2><p>先按系统平台安装Rime，本笔记以<strong>Windows平台/五笔输入方案</strong>为例 (<a href="https://pan.baidu.com/s/106MA9_h9loatX7pho1_viA#list/path=%2F&amp;parentPath=%2FShare" target="_blank" rel="noopener">配置下载</a>，提取码 1024.)：</p><p>下载安装<a href="http://rime.im/download/" target="_blank" rel="noopener">小狼毫 Weasel</a>和<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">编辑器 visual studio code</a>。<small>保证文件UTF-8编码</small></p><p>安装Rime之后，有默认的预置输入方案，各输入方案切换初始快捷键是<code>Ctrl+~</code>。</p><p>如果没有适合自己的输入方案，看完本笔记第2、3、4章节后，在浏览器中打开<a href="https://github.com/rime/plum" target="_blank" rel="noopener">Plum</a>项目，<code>Ctrl+F</code>查找并下载相关输入方案到<strong>用户配置目录</strong>，<strong>重新部署</strong>。</p><p>如：查找<code>wubi</code>，打开<a href="https://github.com/rime/rime-wubi" target="_blank" rel="noopener">rime-wubi</a>项目，点绿色按钮<code>Download ZIP</code>到桌面解压，把几个<code>*.yaml</code>后缀文件剪切到<code>%appdata%\Rime</code><small>(复制，<code>Windows+R</code>运行中粘贴回车即可进入)</small> 目录，重新部署。</p><p>Plum 是 Rime 配置管理器和输入模式库。</p><h2 id="1、认识“Rime”"><a href="#1、认识“Rime”" class="headerlink" title="1、认识“Rime”"></a>1、认识“Rime”</h2><p>要配置和操控 Rime，首先要知道它是什么，</p><p>Rime：</p><ul><li><p>一套<strong>文字输入解决方案</strong>，由基础引擎<sup>*</sup>、跨操作平台发行<sup>*</sup>、多种输入方案<sup>*</sup>组成，</p></li><li><p>支持“拼音、双拼、注音、声调、五笔、仓颉”等<strong>音码</strong>和<strong>形码</strong>输入；</p></li><li><p>支持“吴语、粤语，中古汉语”等多种方言拼音；</p></li><li><p>支持 Windows、Linux、Android、Mac OS X 等作业平台。</p><ul><li><a href="https://github.com/rime/home/wiki/RimeWithIBus" target="_blank" rel="noopener">ibus-rime</a> → Linux</li><li><a href="https://bintray.com/rime/weasel/release" target="_blank" rel="noopener">Weasel/小狼毫</a> → Windows</li><li><a href="https://bintray.com/lotem/rime/Squirrel" target="_blank" rel="noopener">Squirrel/鼠须管</a> → Mac OS X</li><li><a href="https://github.com/osfans/trime" target="_blank" rel="noopener">同文輸入法</a> → Android</li></ul></li><li><p>繁体拼音能正确的输入繁体字。</p></li></ul><p>上面有标<sup>*</sup>号几个部分，就是我们要配置调教的部分。</p><h2 id="2、认识“部署”与“同步”"><a href="#2、认识“部署”与“同步”" class="headerlink" title="2、认识“部署”与“同步”"></a>2、认识“部署”与“同步”</h2><p>每当更改了配置文件，就要进行一次<strong>部署</strong>以生效预期功能，同时执行一次<strong>同步</strong>以备份相关配置。</p><p>Windows 部署：</p><ul><li><p>在开始菜单中找到 <code>小狼毫輸入法 → 【小狼毫】重新部署</code>，执行即生效；</p></li><li><p>在<code>C:\ProgramData\Microsoft\Windows\Start Menu\Programs\小狼毫輸入法</code> 中执行 <code>【小狼毫】重新部署</code>；</p></li><li><p>如果配置中有开启托盘图标，右键选择<code>重新部署</code>。</p></li></ul><p>其它保作系统更简单，如iBus在输入法切换下拉菜单即可<code>部署</code>，鼠鬚管在系统语言文字选单中选择<code>重新部署</code></p><p>同步亦然，这里同步只是根据用户配置目录<code>installation.yaml</code>中的<code>installation_id</code>和<code>sync_dir</code>生成了配置和词典文件，至于同步之后备份在何处，是需要用户自己安排的，如各SaaS厂商的云盘。</p><h2 id="3、认识“源文件目录”和“用户配置目录”"><a href="#3、认识“源文件目录”和“用户配置目录”" class="headerlink" title="3、认识“源文件目录”和“用户配置目录”"></a>3、认识“源文件目录”和“用户配置目录”</h2><p>“源文件目录”和“用户配置目录”是整个输入方案的配置文件所在目录。</p><p>输入方案<strong>源文件目录</strong>，升级或重装会被替换，用户不能修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">【中州韻】 /usr/share/rime-data/</span><br><span class="line">【小狼毫】 &quot;安装目录\data&quot;</span><br><span class="line">【鼠鬚管】 &quot;/Library/Input Methods/Squirrel.app/Contents/SharedSupport/&quot;</span><br></pre></td></tr></table></figure></p><p>输入方案<strong>用户配置目录</strong>，用户可以部分修改：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">【中州韻】 ~/.config/ibus/rime/</span><br><span class="line">          ~/.config/fcitx/rime/</span><br><span class="line">【小狼毫】 &quot;%appdata%\Rime&quot;</span><br><span class="line">【鼠鬚管】 ~/Library/Rime/</span><br></pre></td></tr></table></figure></p><h2 id="4、认识“用户配置目录”数据文件分布"><a href="#4、认识“用户配置目录”数据文件分布" class="headerlink" title="4、认识“用户配置目录”数据文件分布"></a>4、认识“用户配置目录”数据文件分布</h2><p>数据文件和目录在各版本中可能会有不同。</p><ul><li><p>主要文件</p><ul><li><code>default.yaml</code>，全局设定</li><li><code>weasel.yaml</code>，发行版设定</li><li><code>installation.yaml</code>，安装信息(可配置同步目录)</li><li><code>user.yaml</code>，用户状态信息</li><li><code>*.schema.yaml</code>，输入方案</li><li><code>*.dict.yaml</code>，输入方案配套的词典源文件</li><li><code>*.custom.yaml</code><sup>+</sup>，用户对Rime全局配置、各输入方案配置、自制输入方案等定制文件</li></ul></li><li><p>用户配置同步目录及词典文件</p><ul><li><code>*.userdb</code>，Rime记录用户输入习惯的目录文件</li><li><code>UUID/</code>，用户配置同步目录</li><li><code>UUID/*.userdb.txt</code>，Rime生成的用以同步的用户词典</li></ul></li><li><p>Rime编译生成的二进制文件：</p><ul><li><code>build/*</code></li><li><code>*.prism.bin</code>，棱镜文件</li><li><code>*.reverse.bin</code>，反查词典</li><li><code>*.table.bin</code>，固态词典</li></ul></li></ul><h2 id="5、折腾"><a href="#5、折腾" class="headerlink" title="5、折腾"></a>5、折腾</h2><p>要折腾的不是很多，普通用户安装即用，我折腾它主要是按键部分和我开发工具冲突，还有增强输入方案。</p><p>我们要配置四个文件，因为以后要升级，不能直接在原作者默认文件内修改和调整，所以要这样建立文件关联：</p><ul><li><strong>基础引擎框架配置 <code>default.yaml</code></strong> → <code>default.custom.yaml</code>，输入法按键、方案预选等全局设定</li><li><strong>输入方案配置 <code>wubi86.schema.yaml</code></strong> → <code>wubi86.custom.yaml</code>，每种形码、音码输入方案都可以单独配置</li><li><strong>增强输入方案配置 <code>symbols.yaml</code></strong> → <code>symbols.custom.yaml</code>，如： /jq 将调用二十四节气名</li><li><strong>Windows发行版配置 <code>weasel.yaml</code></strong> → <code>weasel.custom.yaml</code>，如进入相关应用程序，转换为英文状态</li></ul><p>我进行的配置有：</p><ul><li><code>Control+Alt+F8</code> 调出输入方案设定，原来的 <code>Ctrl+`</code> 会与大部分软件的关键按键冲突</li><li><code>,</code>、<code>.</code>输入时左右翻页</li><li><code>Enter</code>清屏，<code>;</code>、<code>&#39;</code>，输入时第二、三候选词选定</li><li>因为经常编码和用Markdown语法，很多字符为英文状态下字符，如<code>[]()</code>等</li><li><code>/</code>用来触发特殊字符输入，如<code>/fh</code>、<code>/0~9</code>、<code>/jt</code>等，具体参考<code>symbols.custom.yaml</code>文件</li><li><code>Shift+Delete</code> 或 <code>Control+Delete</code>（Mac <code>Shift+Fn+Delete</code>）删除候选词</li></ul><h3 id="5-1-目的"><a href="#5-1-目的" class="headerlink" title="5.1 目的"></a>5.1 目的</h3><ul><li>覆盖原默认配置</li><li>选择和扩展功能</li></ul><h3 id="5-2-调教"><a href="#5-2-调教" class="headerlink" title="5.2 调教"></a>5.2 调教</h3><ul><li>先三分钟了解一下 <a href="http://www.ruanyifeng.com/blog/2016/07/yaml.html" target="_blank" rel="noopener">yaml</a> 配置文件语言</li><li>打开配置目录：Windows + R : <code>$ %appdata%/rime</code></li><li>用 VS Code 编辑器新建四个文件：<code>default.custom.yaml</code>，<code>wubi86.custom.yaml</code>，<code>symbols.custom.yaml</code>，<code>weasel.custom.yaml</code>，这四个文件配置完可以备份一份，方便在其它计算机上用。</li></ul><h4 id="5-2-1-基础引擎框架配置-：default-custom-yaml"><a href="#5-2-1-基础引擎框架配置-：default-custom-yaml" class="headerlink" title="5.2.1 基础引擎框架配置 ：default.custom.yaml"></a>5.2.1 基础引擎框架配置 ：default.custom.yaml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此文档是对 rime 基础引擎框架配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">customization:</span></span><br><span class="line"><span class="attr">  distribution_code_name:</span><span class="string">Weasel</span></span><br><span class="line"><span class="attr">  distribution_version:</span><span class="number">0.9</span><span class="number">.30</span></span><br><span class="line"><span class="attr">  generator:</span><span class="string">"Rime::SwitcherSettings"</span></span><br><span class="line"><span class="attr">  modified_time:</span><span class="string">"Mon Mar 12 14:30:01 2018"</span></span><br><span class="line"><span class="attr">  rime_version:</span><span class="number">1.3</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">patch:</span></span><br><span class="line"><span class="string">"translator/enable_user_dict"</span><span class="string">:</span><span class="literal">false</span><span class="comment"># 关闭用户词典和字频调整</span></span><br><span class="line"><span class="string">"translator/enable_sentence"</span><span class="string">:</span><span class="literal">false</span><span class="comment"># 关闭码表输入法连打</span></span><br><span class="line"><span class="string">"key_binder/bindings"</span><span class="string">:</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;accept:</span><span class="string">"Control+Shift+space"</span><span class="string">,</span><span class="attr">toggle:</span><span class="string">full_shape,</span><span class="attr">when:</span><span class="string">always&#125;</span><span class="comment"># 全半角切换</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;accept:</span><span class="string">"Control+period"</span><span class="string">,</span><span class="attr">toggle:</span><span class="string">ascii_punct,</span><span class="attr">when:</span><span class="string">always&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;accept:</span><span class="string">comma,</span><span class="attr">send:</span><span class="string">Page_Up,</span><span class="attr">when:</span><span class="string">paging&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;accept:</span><span class="string">period,</span><span class="attr">send:</span><span class="string">Page_Down,</span><span class="attr">when:</span><span class="string">has_menu&#125;</span></span><br><span class="line"><span class="string">"ascii_composer/switch_key"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    Caps_Lock:</span><span class="string">commit_code</span></span><br><span class="line"><span class="attr">    Control_L:</span><span class="string">inline_ascii</span></span><br><span class="line"><span class="attr">    Control_R:</span><span class="string">noop</span></span><br><span class="line"><span class="attr">    Shift_L:</span><span class="string">commit_code</span><span class="comment"># 左右Shift上屏编码并切换为英文状态，inline_ascii 设定在有输入时不能切换至英文状态</span></span><br><span class="line"><span class="attr">    Shift_R:</span><span class="string">commit_code</span><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 原来的 Ctrl + ` 会与大部分软件的关键按键冲突</span></span><br><span class="line"><span class="string">"switcher/hotkeys"</span><span class="string">:</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">"Control+Shift+F8"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 除了输入翻页，应该取消所有的默认快捷鍵，输入法就是纯粹的输入用，用户按需分配快捷键，设定默认快捷键会与作业系统及其它软件产生冲突，适得其反，这样与用搜狐、腾讯输入法无二。</span></span><br><span class="line"><span class="comment"># minus/减号，equal/等号，comma/逗号，period/句号，exclam/感叹号，numbersign/井号，percent/百分号，semicolon/分号，apostrophe/单引号</span></span><br><span class="line"><span class="string">key_binder/bindings:</span></span><br><span class="line"><span class="comment"># hotkey switch</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">always,</span><span class="attr">accept:</span><span class="string">Shift+space,</span><span class="attr">toggle:</span><span class="string">full_shape</span><span class="string">&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">always,</span><span class="attr">accept:</span><span class="string">Control+period,</span><span class="attr">toggle:</span><span class="string">ascii_punct</span><span class="string">&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">accept:</span><span class="string">comma,</span><span class="attr">send:</span><span class="string">Page_Up,</span><span class="attr">when:</span><span class="string">paging</span><span class="string">&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">accept:</span><span class="string">period,</span><span class="attr">send:</span><span class="string">Page_Down,</span><span class="attr">when:</span><span class="string">has_menu</span><span class="string">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选定五笔等输入方案</span></span><br><span class="line"><span class="attr">  schema_list:</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">wubi86&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">wubi_pinyin&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">wubi_trad&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">luna_pinyin_simp&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">luna_pinyin_tw&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;schema:</span><span class="string">terra_pinyin&#125;</span></span><br></pre></td></tr></table></figure><h4 id="5-2-2-输入法配置-：wubi86-custom-yaml"><a href="#5-2-2-输入法配置-：wubi86-custom-yaml" class="headerlink" title="5.2.2 输入法配置 ：wubi86.custom.yaml"></a>5.2.2 输入法配置 ：wubi86.custom.yaml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此文档是对输入法的配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">patch:</span></span><br><span class="line"><span class="comment"># 标点及特殊表情，引入 symbols.custom.yaml 文件，设定触发条件</span></span><br><span class="line"><span class="string">'punctuator/import_preset'</span><span class="string">:</span><span class="string">symbols.custom</span></span><br><span class="line"><span class="string">'recognizer/patterns/punct'</span><span class="string">:</span><span class="string">"^/([a-z]+|[0-9])$"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.回车清屏(Escape)/上屏一候选词，2.分号上屏二候选词，3.引号上屏三候选词</span></span><br><span class="line"><span class="string">"key_binder/bindings"</span><span class="string">:</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">composing,</span><span class="attr">accept:</span><span class="string">Return,</span><span class="attr">send:</span><span class="string">Escape</span><span class="string">&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">has_menu,</span><span class="attr">accept:</span><span class="string">Return,</span><span class="attr">send:</span><span class="string">Escape</span><span class="string">&#125;</span></span><br><span class="line"><span class="comment"># - &#123;when: composing, accept: space, send: Escape&#125;</span></span><br><span class="line"><span class="comment"># - &#123;when: has_menu, accept: space, send: space&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">has_menu,</span><span class="attr">accept:</span><span class="string">semicolon,</span><span class="attr">send:</span><span class="number">2</span><span class="string">&#125;</span></span><br><span class="line"><span class="bullet">    -</span><span class="string">&#123;</span><span class="attr">when:</span><span class="string">has_menu,</span><span class="attr">accept:</span><span class="string">apostrophe,</span><span class="attr">send:</span><span class="number">3</span><span class="string">&#125;</span></span><br><span class="line"><span class="comment"># 更改‘西文’为‘英文’，‘增广’为‘扩展集’</span></span><br><span class="line"><span class="attr">  switches:</span></span><br><span class="line"><span class="attr">  - name:</span><span class="string">ascii_mode</span></span><br><span class="line"><span class="attr">    reset:</span><span class="number">0</span></span><br><span class="line"><span class="attr">    states:</span><span class="string">["中文",</span><span class="string">"英文"</span><span class="string">]</span></span><br><span class="line"><span class="attr">  - name:</span><span class="string">full_shape</span></span><br><span class="line"><span class="attr">    states:</span><span class="string">["半角",</span><span class="string">"全角"</span><span class="string">]</span></span><br><span class="line"><span class="attr">  - name:</span><span class="string">ascii_punct</span></span><br><span class="line"><span class="attr">    states:</span><span class="string">["，。",</span><span class="string">"，．"</span><span class="string">]</span></span><br><span class="line"><span class="attr">  - name:</span><span class="string">extended_charset</span></span><br><span class="line"><span class="attr">    states:</span><span class="string">["通用",</span><span class="string">"扩展集"</span><span class="string">]</span></span><br></pre></td></tr></table></figure><h4 id="5-2-3-Windows操作平台配置：weasel-custom-yaml"><a href="#5-2-3-Windows操作平台配置：weasel-custom-yaml" class="headerlink" title="5.2.3 Windows操作平台配置：weasel.custom.yaml"></a>5.2.3 Windows操作平台配置：weasel.custom.yaml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此文档是对rime在Windows平台上的配置</span></span><br><span class="line"></span><br><span class="line"><span class="attr">customization:</span></span><br><span class="line"><span class="attr">  distribution_code_name:</span><span class="string">Weasel</span></span><br><span class="line"><span class="attr">  distribution_version:</span><span class="number">0.9</span><span class="number">.30</span></span><br><span class="line"><span class="attr">  generator:</span><span class="string">"Weasel::UIStyleSettings"</span></span><br><span class="line"><span class="attr">  modified_time:</span><span class="string">"Fri Mar 09 15:08:29 2018"</span></span><br><span class="line"><span class="attr">  rime_version:</span><span class="number">1.1</span><span class="number">.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入相关应用程序，转换为英文状态</span></span><br><span class="line"><span class="attr">patch:</span></span><br><span class="line"><span class="string">"app_options/devenv.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/illustrator.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/photoshop.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/plantsvszombies"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/winkawaks.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/sublime_text.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"><span class="string">"app_options/Code.exe"</span><span class="string">:</span></span><br><span class="line"><span class="attr">    ascii_mode:</span><span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定主题</span></span><br><span class="line"><span class="string">"style/color_scheme"</span><span class="string">:</span><span class="string">ink</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设定显示托盘图标，在调配置时，方便右键图标快速执行“重新部署”，以及其它便捷入口。调配完日常使用就 false 隐藏掉吧。</span></span><br><span class="line"><span class="comment"># 没有托盘图标，Windows+R: $ "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\小狼毫輸入法"，里面有相关操作项</span></span><br><span class="line"><span class="comment"># Windows 10下已经发现问题：切换到小狼毫輸入法，Windows徽标就失灵，必须切换至其它输入法，Ctrl+Shift+Esc 中 “Windows 资源管理器” 鼠标右键“重新启动(R)”，才能正常使用。</span></span><br><span class="line"><span class="string">"style/display_tray_icon"</span><span class="string">:</span><span class="literal">false</span></span><br></pre></td></tr></table></figure><h4 id="5-2-4-增强输入方案配置：symbols-custom-yaml"><a href="#5-2-4-增强输入方案配置：symbols-custom-yaml" class="headerlink" title="5.2.4 增强输入方案配置：symbols.custom.yaml"></a>5.2.4 增强输入方案配置：symbols.custom.yaml</h4><p>直接从原作者复制内容过来，进行以下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># / 用来触发增强输入，如： /jq 将调用二十四节气名</span></span><br><span class="line"><span class="comment"># 星号直接上屏 *</span></span><br><span class="line"><span class="comment"># 圆括号为英文状态下的() ，建议文字工作者的你换成中文状态下的（）</span></span><br><span class="line"><span class="comment"># 顿号需要按键 \</span></span><br><span class="line"><span class="comment"># 井号直接上屏 #</span></span><br><span class="line"><span class="comment"># 添加常用网址</span></span><br></pre></td></tr></table></figure><p>代码过多就不贴了；</p><p>配置完重新部署，并执行同步以备份相关配置文件。</p><h2 id="6、存在问题与选择"><a href="#6、存在问题与选择" class="headerlink" title="6、存在问题与选择"></a>6、存在问题与选择</h2><p>操作存在极小可能的不稳定性，以及一些兼容性问题，在权衡了隐私性、调教性后，我能接受。</p><p>开始菜单中，将“小狼毫算法服務”、“【小狼毫】重新部署”和“【小狼毫】用戶資料同步” Pin to Start，方便应对不稳定性。</p><hr><p>扩展阅读与资源：</p><ul><li><a href="https://github.com/rime/home/wiki/UserGuide" target="_blank" rel="noopener">Rime 新手须知的使用方法和技巧</a></li><li><a href="https://github.com/rime/home/wiki/CustomizationGuide" target="_blank" rel="noopener">Rime 定制指南(初阶)</a></li><li><a href="https://github.com/rime/home/wiki/RimeWithSchemata" target="_blank" rel="noopener">Rime 输入方案(中阶)</a></li><li><a href="http://rime.im/code/" target="_blank" rel="noopener">Rime 程序开发(高阶)</a></li><li><a href="http://tieba.baidu.com/p/3288634121" target="_blank" rel="noopener">半月湾C：致第一次安装RIME的你</a></li><li><a href="https://zh.wikipedia.org/wiki/YAML" target="_blank" rel="noopener">wikipedia: YAML</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> rime </tag>
    </tags>
  </entry>
  <entry>
    <title>《批处理笔记》系列归档</title>
    <link href="/tech/batch-in-action.html"/>
    <url>/tech/batch-in-action.html</url>
    <content type="html">
      <![CDATA[<p>《批处理笔记》系列归档</p><ul><li><a href="https://xinlu.ink/tech/batch-in-action-1-preface.html">批处理笔记(1) - 基础</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-2-get-path.html">批处理笔记(2) - 获取目录名、文件名或路径</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-3-create-folders-from-each-line-of-a-textfile.html">批处理笔记(3) - 通过文本内容行创建文件夹</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-4-rename-files-from-text.html">批处理笔记(4) - 通过文本内容重命名文件</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-5-create-folder-using-part-of-filename-and-move-file-into.html">批处理笔记(5) - 根据文件名自动创建目录存放文件</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-6-multiple-times-rename-files.html">批处理笔记(6) - 多轮修改文件名</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-7-file-rename.html">批处理笔记(7) - 文件名操作</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-8-directory-rename.html">批处理笔记(8) - 目录名操作</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-9-extract-files-from-subfolders-into-the-main-folder.html">批处理笔记(9) - 提取所有子目录文件(拷贝/剪切)</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-10-multiple-audioclips.html">批处理笔记(10) - 批量剪辑音频</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-11-removing-a-text-after-and-before-specific-characters-in-files-names.html">批处理笔记(11) - 去除指定字符之前或之后的文件名</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-12-merge-text-files.html">批处理笔记(12) - 合并文本</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-13-export-high-quality-gif-pictures-from-video.html">批处理笔记(13) - 从视频导出高质量GIF图片</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-14-delims.html">批处理笔记(14) - 路径/时间/字符切分等DEMO操作</a></li><li><a href="https://xinlu.ink/tech/batch-in-action-15-run-batch-at-folder-context-menu.html">批处理笔记(15) - 右键菜单执行批处理文件</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(15) - 右键菜单执行批处理文件</title>
    <link href="/tech/batch-in-action-15-run-batch-at-folder-context-menu.html"/>
    <url>/tech/batch-in-action-15-run-batch-at-folder-context-menu.html</url>
    <content type="html">
      <![CDATA[<p>本篇无知识点，只是将前面写的，弄到右键菜单，方便随时调用。</p><a id="more"></a><p>对以前批处理代码进行调整，主要是对进入<strong>目录参数</strong>进行调整。</p><p>这里把一个批处理文件做两份处理：</p><ul><li>在文件上鼠标右键的：<code>set &quot;HandleDir=%~1&quot;</code> 对应到 <code>HKEY_CLASSES_ROOT\Directory\shell\</code></li><li>在目录空白区域右键的：<code>set &quot;HandleDir=%cd%&quot;</code> 对应到 <code>HKEY_CLASSES_ROOT\Directory\Background\</code></li></ul><p>执行时分别为：</p><ul><li><code>@=&quot;cmd.exe /c C:\\tool\\bat\\dir.bat %1 \&quot;%V\&quot;&quot;</code>；</li><li><code>@=&quot;cmd.exe /c C:\\tool\\bat\\dir-bg.bat %cd% \&quot;%V\&quot;&quot;</code></li></ul><p>不贴源码，在网盘下载<strong><a href="https://pan.baidu.com/s/1TItZc90LQTOSlqaIhyAdWQ#list/path=%2FShare%2FBatch-File%2Freg" target="_blank" rel="noopener">批处理文件和写入注册表文件</a></strong>(提取码1024)，注册表文件中引用批处理文件地址是<code>C:\tool\bat</code>。</p><ul><li>文件命名操作 - <code>file.bat</code>, <code>file-bg.bat</code></li><li>目录命名操作 - <code>dir.bat</code>, <code>dir-bg.bat</code></li><li>获取文件和目录名 - <code>name.bat</code>, <code>name-bg.bat</code></li></ul><p>建立对应路径关系后，执行<code>文件和目录命名操作.reg</code>，然后在目标目录鼠标右键就可以选择相关操作项了。</p><hr><p><code>右键菜单添加命令行入口.reg</code>保存并执行，在任何目录即可调用cmd。此功能跟批处理没关系，可忽略。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">; Remove Settings</span><br><span class="line">; [-HKEY_CLASSES_ROOT\Directory\shell\CommandPrompt]</span><br><span class="line">; [-HKEY_CLASSES_ROOT\Directory\Background\shell\CommandPrompt]</span><br><span class="line">; [-HKEY_CLASSES_ROOT\Drive\shell\CommandPrompt]</span><br><span class="line">; [-HKEY_CLASSES_ROOT\LibraryFolder\background\shell\CommandPrompt]</span><br><span class="line"></span><br><span class="line">; Command Prompt</span><br><span class="line">; ========================================================</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\CommandPrompt]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\CommandPrompt\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\Background\shell\CommandPrompt]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\Background\shell\CommandPrompt\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Drive\shell\CommandPrompt]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Drive\shell\CommandPrompt\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\LibraryFolder\background\shell\CommandPrompt]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line">[HKEY_CLASSES_ROOT\LibraryFolder\background\shell\CommandPrompt\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line">; Remove Settings</span><br><span class="line">;[-HKEY_CLASSES_ROOT\Directory\shell\runas]</span><br><span class="line">;[-HKEY_CLASSES_ROOT\Directory\Background\shell\runas]</span><br><span class="line">;[-HKEY_CLASSES_ROOT\Drive\shell\runas]</span><br><span class="line">;[-HKEY_CLASSES_ROOT\LibraryFolder\background\shell\runas]</span><br><span class="line"></span><br><span class="line">; Command Prompt Administrator</span><br><span class="line">; ========================================================</span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\runas]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt Administrator(&amp;X)"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line"><span class="string">"HasLUAShield"</span>=<span class="string">""</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\shell\runas\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\Background\shell\runas]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt Administrator(&amp;X)"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line"><span class="string">"HasLUAShield"</span>=<span class="string">""</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Directory\Background\shell\runas\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\Drive\shell\runas]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt Administrator(&amp;X)"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line"><span class="string">"HasLUAShield"</span>=<span class="string">""</span></span><br><span class="line">[HKEY_CLASSES_ROOT\Drive\shell\runas\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[HKEY_CLASSES_ROOT\LibraryFolder\background\shell\runas]</span><br><span class="line"><span class="string">"MUIVerb"</span>=<span class="string">"Command Prompt Administrator(&amp;X)"</span></span><br><span class="line"><span class="string">"Icon"</span>=<span class="string">"cmd.exe"</span></span><br><span class="line"><span class="string">"HasLUAShield"</span>=<span class="string">""</span></span><br><span class="line">[HKEY_CLASSES_ROOT\LibraryFolder\background\shell\runas\<span class="built_in">command</span>]</span><br><span class="line">@=<span class="string">"cmd.exe /s /k pushd \"%V\""</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(14) - 路径/时间/字符切分等DEMO操作</title>
    <link href="/tech/batch-in-action-14-delims.html"/>
    <url>/tech/batch-in-action-14-delims.html</url>
    <content type="html">
      <![CDATA[<p>本篇熟悉操作文件路径、时间，温习字符切分(Delims)。</p><a id="more"></a><p>路径</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line">:GTCONTINUE</span><br><span class="line">@<span class="built_in">echo</span> 正在运行的这个批处理：</span><br><span class="line">@<span class="built_in">echo</span> 完全路径[<span class="variable">%%0</span>]：%<span class="number">0</span></span><br><span class="line">@<span class="built_in">echo</span> 去掉引号[<span class="variable">%%~</span><span class="number">0</span>]：%~<span class="number">0</span></span><br><span class="line">@<span class="built_in">echo</span> 所在分区[<span class="variable">%%~</span>d0]：%~d0</span><br><span class="line">@<span class="built_in">echo</span> 所处路径[<span class="variable">%%~</span>p0]：%~p0</span><br><span class="line">@<span class="built_in">echo</span> 文件名[<span class="variable">%%~</span>n0]：%~n0</span><br><span class="line">@<span class="built_in">echo</span> 扩展名[<span class="variable">%%~</span>x0]：%~x0</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件属性：%~a0</span><br><span class="line">@<span class="built_in">echo</span> 修改时间：%~t0</span><br><span class="line">@<span class="built_in">echo</span> 文件大小：%~z0</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 盘符和路径[<span class="variable">%%~</span>dp0]：%~dp0</span><br><span class="line">@<span class="built_in">echo</span> 文件名和扩展名[<span class="variable">%%~</span>nx0]：%~nx0</span><br><span class="line">@<span class="built_in">echo</span> 当前<span class="built_in">CMD</span>默认目录[<span class="variable">%%c</span>d<span class="variable">%%]</span>：<span class="variable">%cd%</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">set</span> "CurrentDirName=%~dp0"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ("<span class="variable">%CurrentDirName:~0,-1%</span>") <span class="keyword">do</span> (<span class="built_in">echo</span> 目录名： <span class="variable">%%~</span>ni)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br></pre></td></tr></table></figure><hr><p>时间</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">set</span> varTimeTemp1=%<span class="built_in">time</span>: =<span class="number">0</span>%</span><br><span class="line"><span class="built_in">set</span> varTimeTemp2=<span class="variable">%varTimeTemp1::=%</span></span><br><span class="line"><span class="built_in">set</span> varTime=<span class="variable">%varTimeTemp2:~0,6%</span></span><br><span class="line"><span class="built_in">set</span> varDate=<span class="variable">%date:~0,4%</span><span class="variable">%date:~5,2%</span><span class="variable">%date:~8,2%</span><span class="variable">%varTime%</span></span><br><span class="line">@<span class="built_in">echo</span> 当前日期时间：<span class="variable">%varDate%</span></span><br><span class="line"><span class="comment">rem %a:~[m[,n]]%</span></span><br><span class="line">@<span class="built_in">echo</span><span class="variable">%varDate:~0,4%</span>年 <span class="variable">%varDate:~4,2%</span>月 <span class="variable">%varDate:~6,2%</span>日 <span class="variable">%varDate:~8,2%</span>时 <span class="variable">%varDate:~10,2%</span>分 <span class="variable">%varDate:~12%</span>秒</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><hr><p>字符切分</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem tokens=有时表示提取全部。</span></span><br><span class="line"><span class="comment">rem tokens=m表示提取第m列。</span></span><br><span class="line"><span class="comment">rem tokens=m,n表示提取第m列和第n列。</span></span><br><span class="line"><span class="comment">rem tokens=m-n表示提取第m列至第n列。</span></span><br><span class="line"><span class="comment">rem tokens=*表示删除每行前面的空格。忽略行首的所有空格。</span></span><br><span class="line"><span class="comment">rem tokens=m*提取第m列以后的所有字符，星号表示剩余的字符。</span></span><br><span class="line"><span class="comment">rem tokens=m,*提取第m列以后的所有字符，星号表示剩余的字符。</span></span><br><span class="line"><span class="comment">rem delims指明点号、减号、空格为分割符，默认是空格和tab为分割符，delims==及delims=表示不要分割符</span></span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> str="<span class="number">123</span>,<span class="number">456</span>,<span class="number">789</span>,<span class="number">0</span>,abc-def,ghi,jkl-mno,pqr,stu,vwx,yz"</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span> 字符:<span class="variable">%%i</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> tokens=<span class="number">1</span> delims=-</span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">1</span> delims=-" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%i</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> tokens=<span class="number">1</span>,<span class="number">6</span> delims=,-</span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">1</span>,<span class="number">6</span> delims=,-" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%i</span><span class="variable">%%j</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> tokens=<span class="number">2</span>-<span class="number">6</span> delims=,-</span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">3</span>-<span class="number">6</span> delims=,-" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%i</span><span class="variable">%%j</span><span class="variable">%%k</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> tokens=<span class="number">6</span>* delims=,-</span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">6</span>* delims=,-" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%i</span><span class="variable">%%j</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> tokens=<span class="number">6</span>,* delims=,-</span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">6</span>,* delims=,-" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%str%</span>) <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%i</span><span class="variable">%%j</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="built_in">pause</span>&gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(13) - 从视频导出高质量GIF图片</title>
    <link href="/tech/batch-in-action-13-export-high-quality-gif-pictures-from-video.html"/>
    <url>/tech/batch-in-action-13-export-high-quality-gif-pictures-from-video.html</url>
    <content type="html">
      <![CDATA[<p>需要<a href="https://www.ffmpeg.org/" target="_blank" rel="noopener">ffmpeg</a>，配置ffmpeg到环境变量。</p><a id="more"></a><h2 id="1-从视频片断导出高质量GIF"><a href="#1-从视频片断导出高质量GIF" class="headerlink" title="1.从视频片断导出高质量GIF"></a>1.从视频片断导出高质量GIF</h2><p>新建文本文件，将下面代码保存，并改文件名和后缀名为 <code>gif.bat</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> gif_filename=<span class="string">"%2.gif"</span></span><br><span class="line"><span class="built_in">set</span> start_time=%3</span><br><span class="line"><span class="built_in">set</span> duration=%4</span><br><span class="line"><span class="built_in">set</span> palette=<span class="string">"palette.png"</span></span><br><span class="line"><span class="built_in">set</span> filters=<span class="string">"fps=%5,scale=%6:-1:flags=lanczos"</span></span><br><span class="line"></span><br><span class="line">ffmpeg -v warning -ss %start_time% -t %duration% -i %1 -vf <span class="string">"%filters%,palettegen=max_colors=%7:stats_mode=diff"</span> -y %palette%</span><br><span class="line">ffmpeg -v warning -ss %start_time% -t %duration% -i %1 -i %palette% -lavfi <span class="string">"%filters% [x]; [x][1:v] paletteuse=dither=floyd_steinberg"</span> -y %gif_filename%</span><br></pre></td></tr></table></figure><p>将 <code>gif.bat</code> 放在视频所在文件夹，</p><p>在视频文件夹图标上，按住 Shift， 点击鼠标右键选择：在此处打开命令窗口</p><p>运行命令：</p><p><code>gif.bat input.mp4 output 00:00:25 00:00:35 10 640 256</code></p><p>对应解释：</p><p><code>gif.bat 导入视频源 导出Gif图片名 开始时间 结束/持续时间 帧率 宽度 色彩数(4-256)</code></p><h2 id="2-整个视频导出高质量GIF"><a href="#2-整个视频导出高质量GIF" class="headerlink" title="2.整个视频导出高质量GIF"></a>2.整个视频导出高质量GIF</h2><p>同样准备文件 <code>gif-all.bat</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> gif_filename=<span class="string">"%2.gif"</span></span><br><span class="line"><span class="built_in">set</span> palette=<span class="string">"palette.png"</span></span><br><span class="line"><span class="built_in">set</span> filters=<span class="string">"fps=%3,scale=%4:-1:flags=lanczos"</span></span><br><span class="line"></span><br><span class="line">ffmpeg -v warning -i %1 -vf <span class="string">"%filters%,palettegen=max_colors=%5:stats_mode=diff"</span> -y %palette%</span><br><span class="line">ffmpeg -v warning -i %1 -i %palette% -lavfi <span class="string">"%filters% [x]; [x][1:v] paletteuse=dither=floyd_steinberg"</span> -y %gif_filename%</span><br></pre></td></tr></table></figure><p>调用：<code>gif-all.bat input.mp4 output 10 640 256</code></p><h3 id="FPS"><a href="#FPS" class="headerlink" title="FPS"></a>FPS</h3><ul><li>5 (max 60 seconds)</li><li>7 (max 40 seconds)</li><li>10 (max 30 seconds)</li><li>20 (max 15 seconds)</li><li>25 (max 10 seconds)</li></ul><hr><p>如果要导多个gif图片，可以先记录好视频中各出入点，一行行编写到另一个批处理文件，然后再 <code>start</code>。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
      <tag> ffmpeg </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(12) - 合并文本</title>
    <link href="/tech/batch-in-action-12-merge-text-files.html"/>
    <url>/tech/batch-in-action-12-merge-text-files.html</url>
    <content type="html">
      <![CDATA[<p>本篇讲合并文本内容，如交叉合并、去除重复内容行和空行、行首行尾加特定字符、加指定分割线等操作。</p><a id="more"></a><p>交叉合并两个文本文件的内容：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Echo</span> Off</span><br><span class="line"><span class="built_in">title</span> 交叉合并文本内容  by：小可(xianghongai@gmail.com)</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 默认合并目录下 a.txt 和 b.txt 两个文本文件到 c.txt，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"><span class="built_in">pushd</span><span class="variable">%cd%</span></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b *.txt') <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">findstr</span> /r /c:"[^ ]" "<span class="variable">%%a</span>"&gt;#</span><br><span class="line"><span class="built_in">move</span> # "<span class="variable">%%a</span>"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line"><span class="keyword">For</span> /F "tokens=<span class="number">1</span>* delims=:" <span class="variable">%%i</span><span class="keyword">In</span> ('<span class="built_in">Findstr</span> /n .* b.txt') <span class="keyword">Do</span><span class="built_in">Set</span> "_<span class="variable">%%i</span>=<span class="variable">%%j</span>"</span><br><span class="line">(<span class="keyword">For</span> /F "delims=" <span class="variable">%%i</span><span class="keyword">In</span> ('<span class="built_in">Findstr</span> /n .* a.txt') <span class="keyword">Do</span> (</span><br><span class="line"><span class="built_in">Set</span> "Str=<span class="variable">%%i</span>"&amp; <span class="built_in">Set</span> /A Count+=<span class="number">1</span></span><br><span class="line"><span class="built_in">SetLocal</span> EnableDelayedExpansion</span><br><span class="line"><span class="keyword">For</span><span class="variable">%%j</span><span class="keyword">In</span> (<span class="variable">!Count!</span>) <span class="keyword">Do</span> (</span><br><span class="line"><span class="built_in">Echo</span>,<span class="variable">!Str:*:=!</span></span><br><span class="line"><span class="built_in">Echo</span>,<span class="variable">!_%%j!</span></span><br><span class="line">    )</span><br><span class="line"><span class="built_in">EndLocal</span></span><br><span class="line">))&gt;c.txt</span><br><span class="line"><span class="built_in">Start</span> c.txt</span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><p>合并所有文本内容，并去除重复内容行和空行：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">title</span> 合并文本删除重复行  by：小可(xianghongai@gmail.com)</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 默认合并目录下所有文本文件到 all.txt，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b /on *.txt') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%b</span><span class="keyword">in</span> ('<span class="built_in">type</span> "<span class="variable">%%a</span>"') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">defined</span><span class="variable">%%b</span><span class="built_in">set</span><span class="variable">%%b</span>=Def &amp; &gt;&gt;$ <span class="built_in">echo</span>,<span class="variable">%%b</span></span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line"><span class="built_in">move</span> $ "all.txt"</span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><p>行首行尾加特定字符，预置好字符，拖入要处理的文本到该批处理文件图标上，<br>这里加<code>&lt;p&gt;&lt;/p&gt;</code>：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="comment">@REM @Date:   2016-04-06 11:22:44</span></span><br><span class="line"><span class="built_in">title</span> 文本行首尾加字符  by：小可(xianghongai@gmail.com)</span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">type</span> "%~<span class="number">1</span>"') <span class="keyword">do</span><span class="built_in">echo</span> ^&lt;p^&gt;<span class="variable">%%~</span>a^&lt;/p^&gt;&gt;&gt;"<span class="variable">%~dp1%</span>~n1-temp%~x1"</span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br></pre></td></tr></table></figure><hr><p>将大批量图片放置在服务器，要组成图片HTML代码标签，<br>拖入要处理的文本到该批处理文件图标上：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 文本内容行首尾加字符  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">type</span> "%~<span class="number">1</span>"') <span class="keyword">do</span><span class="built_in">set</span> FilePath="<span class="variable">%~dp1%</span>~n1-done%~x1"</span><br><span class="line"><span class="keyword">if</span><span class="keyword">exist</span> "<span class="variable">%FilePath%</span>" <span class="built_in">DEL</span>/q "<span class="variable">%FilePath%</span>"</span><br><span class="line"><span class="built_in">cd</span>.&gt;<span class="variable">%FilePath%</span></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">type</span> "%~<span class="number">1</span>"') <span class="keyword">do</span><span class="built_in">echo</span> ^&lt;img src=^"<span class="variable">%%~</span>a^" /^&gt; &gt;&gt; "<span class="variable">%FilePath%</span>"</span><br><span class="line"><span class="built_in">set</span> "FilePath=<span class="variable">%FilePath:"=%</span>"</span><br><span class="line"><span class="built_in">start</span><span class="variable">%FilePath%</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><p>加指定分割线，和将要合并的文本处于同一目录，然后执行。</p><p>先设定分割线<code>&gt;&gt;all.temp echo ========================================================================</code></p><p>以及前后换行<code>&gt;&gt;all.temp echo,</code>，这里的<code>,</code>是空格，基础篇里有说。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="built_in">title</span> 合并文本(加指定分割线)  by：小可(xianghongai@gmail.com)</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 默认合并目录下所有文本文件到 all.txt，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> varTimeTemp1=%<span class="built_in">time</span>: =<span class="number">0</span>%</span><br><span class="line"><span class="built_in">set</span> varTimeTemp2=<span class="variable">%varTimeTemp1::=%</span></span><br><span class="line"><span class="built_in">set</span> varTime=<span class="variable">%varTimeTemp2:~0,6%</span></span><br><span class="line"><span class="built_in">set</span> varDate=<span class="variable">%date:~0,4%</span><span class="variable">%date:~5,2%</span><span class="variable">%date:~8,2%</span><span class="variable">%varTime%</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 自然合并所有，/b/od 开关可按指定规则按文件名排序进行合并 for /f %%i in ('dir /b *.txt') do ()</span></span><br><span class="line"></span><br><span class="line">&gt;all.temp <span class="built_in">type</span><span class="built_in">nul</span></span><br><span class="line"><span class="keyword">for</span><span class="variable">%%i</span><span class="keyword">in</span> (*.txt) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">echo</span> 正在处理文件：<span class="variable">%%i</span></span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">type</span> "<span class="variable">%%i</span>"</span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">echo</span>,</span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">echo</span>,</span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">echo</span> ========================================================================</span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">echo</span>,</span><br><span class="line">    &gt;&gt;all.temp <span class="built_in">echo</span>,</span><br><span class="line">)</span><br><span class="line"><span class="built_in">move</span> /y all.temp all-<span class="variable">%varDate%</span>.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem /O          用分类顺序列出文件。</span></span><br><span class="line"><span class="comment">rem N  按名称(字母顺序)     S  按大小(从小到大)</span></span><br><span class="line"><span class="comment">rem E  按扩展名(字母顺序)   D  按日期/时间(从先到后)</span></span><br><span class="line"><span class="comment">rem G  组目录优先           -  反转顺序的前缀</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(11) - 去除指定字符之前或之后的文件名</title>
    <link href="/tech/batch-in-action-11-removing-a-text-after-and-before-specific-characters-in-files-names.html"/>
    <url>/tech/batch-in-action-11-removing-a-text-after-and-before-specific-characters-in-files-names.html</url>
    <content type="html">
      <![CDATA[<p>本篇熟悉<code>&quot;tokens=1-3 delims=.-&quot;</code>结合操作</p><p>需要提前调整<strong>截取范围</strong>，<strong>分割字符</strong>，<strong>过滤文件类型</strong>，<strong>文件原名</strong>、<strong>新命名</strong></p><a id="more"></a><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="built_in">title</span> 去除指定字符之前或之后的文件名  by：小可(xianghongai@gmail.com)</span><br><span class="line">@<span class="built_in">echo</span> 需要提前调整截取范围，分割字符，过滤文件，调整文件前后名</span><br><span class="line"><span class="comment">rem tokens=有时表示提取全部。</span></span><br><span class="line"><span class="comment">rem tokens=m表示提取第m列。</span></span><br><span class="line"><span class="comment">rem tokens=m,n表示提取第m列和第n列。</span></span><br><span class="line"><span class="comment">rem tokens=m-n表示提取第m列至第n列。</span></span><br><span class="line"><span class="comment">rem tokens=*表示删除每行前面的空格。忽略行首的所有空格。</span></span><br><span class="line"><span class="comment">rem tokens=m*提取第m列以后的所有字符，星号表示剩余的字符。</span></span><br><span class="line"><span class="comment">rem tokens=m,*提取第m列以后的所有字符，星号表示剩余的字符。</span></span><br><span class="line"><span class="comment">rem delims指明点号、减号、空格为分割符，默认是空格和tab为分割符，delims==及delims=表示不要分割符</span></span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">1</span>-<span class="number">3</span> delims=.-" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /a-d *.png') <span class="keyword">do</span> (<span class="built_in">ren</span> "<span class="variable">%%i</span>-<span class="variable">%%j</span>.<span class="variable">%%k</span>" "<span class="variable">%%i</span>.<span class="variable">%%k</span>")</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><h4 id="作用到子目录"><a href="#作用到子目录" class="headerlink" title="作用到子目录"></a>作用到子目录</h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">setlocal</span> enabledelayedexpansion</span><br><span class="line"><span class="built_in">title</span> 去除指定字符之前或之后的文件名  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="comment">rem 需要提前调整截取范围，分割字符，过滤文件，文件原名、新命名</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /d %~dp0</span><br><span class="line"></span><br><span class="line">@<span class="built_in">echo</span> 将 [abc_abc-中文提示.png] 重命名为 [abc_abc.png]</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 影响当前目录、子目录带 - 字符的 png 文件！谨慎操作</span><br><span class="line">@<span class="built_in">echo</span> 建议只在单独的新建目录操作！</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 按Enter键继续，退出直接关闭窗口</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=<span class="number">1</span>-<span class="number">3</span> delims=.-" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /b /a-d *.png`) <span class="keyword">do</span> (<span class="built_in">ren</span> "<span class="variable">%%a</span>-<span class="variable">%%b</span>.<span class="variable">%%c</span>" "<span class="variable">%%a</span>.<span class="variable">%%c</span>")</span><br><span class="line">@<span class="built_in">echo</span> ...</span><br><span class="line">@<span class="built_in">echo</span> ================================================== 当前目录处理完毕</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=<span class="number">1</span>-<span class="number">3</span> delims=.-" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.png"`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%a</span>-<span class="variable">%%b</span>.<span class="variable">%%c</span>" "<span class="variable">%%a</span>.<span class="variable">%%c</span>") )</span><br><span class="line">@<span class="built_in">echo</span> ...</span><br><span class="line">@<span class="built_in">echo</span> ================================================== 所有子目录处理完毕</span><br><span class="line">@<span class="built_in">echo</span> 按Enter键退出</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(10) - 批量剪辑音频</title>
    <link href="/tech/batch-in-action-10-multiple-audioclips.html"/>
    <url>/tech/batch-in-action-10-multiple-audioclips.html</url>
    <content type="html">
      <![CDATA[<p>需要<a href="https://www.ffmpeg.org/" target="_blank" rel="noopener">ffmpeg</a>，配置ffmpeg到环境变量。</p><p>应用场景：购买了一个专辑的有声文件，音轨上固定时间有广告之类的插入，去除掉它。</p><a id="more"></a><p>这里展示的是去掉开头部分，提前设置好起始时间，务必备份好原始音频数据。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 音频剪辑操作  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 音频剪辑操作（提前设置好起始时间，备份好原始音频数据）</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line"><span class="built_in">set</span> /p HandleDir=需要处理的目录:</span><br><span class="line"></span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 音频剪辑操作</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 处理的目录：<span class="variable">%HandleDir%</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">1</span>.相同时间段剪辑-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">11</span> - 剪辑当前目录</span><br><span class="line">@<span class="built_in">echo</span><span class="number">12</span> - 剪辑层级子目录</span><br><span class="line">@<span class="built_in">echo</span> -------------------其它-------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span> - 重新选择目录</span><br><span class="line">@<span class="built_in">echo</span><span class="number">9</span> - 退出</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">set</span>  GTOperator=<span class="number">9</span></span><br><span class="line"><span class="built_in">set</span> /p GTOperator="选择操作数: "</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">11</span><span class="keyword">goto</span> GTDIRPREFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">12</span><span class="keyword">goto</span> GTSUBDIRPREFIX</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">8</span><span class="keyword">goto</span> GTBegin</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">9</span><span class="keyword">goto</span> GTExit</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 请选择正确的操作数</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem @echo 不能做文件名称的字符</span></span><br><span class="line"><span class="comment">rem @echo \ / : * ? " &lt; &gt; |</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem 11.当前目录：目录名-文件名</span></span><br><span class="line">:GTDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b *.MP3 <span class="number">2</span>^&gt;<span class="built_in">nul</span>') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line">        ffmpeg -ss <span class="number">00</span>:<span class="number">00</span>:<span class="number">47</span>.<span class="number">666</span> -i "<span class="variable">%%n</span>xi" -acodec <span class="built_in">copy</span> "O<span class="variable">%%~</span>nxi"</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 12.子目录：子目录名-文件名</span></span><br><span class="line">:GTSUBDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.MP3" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line">        ffmpeg -ss <span class="number">00</span>:<span class="number">00</span>:<span class="number">47</span>.<span class="number">666</span> -i "<span class="variable">%%i</span>\<span class="variable">%%j</span>" -acodec <span class="built_in">copy</span> "<span class="variable">%%i</span>\<span class="variable">%%~</span>nxi-O<span class="variable">%%~</span>nxj"</span><br><span class="line">        )   )</span><br><span class="line"><span class="built_in">echo</span> 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:GTExit</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
      <tag> ffmpeg </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(9) - 提取所有子目录文件(拷贝/剪切)</title>
    <link href="/tech/batch-in-action-9-extract-files-from-subfolders-into-the-main-folder.html"/>
    <url>/tech/batch-in-action-9-extract-files-from-subfolders-into-the-main-folder.html</url>
    <content type="html">
      <![CDATA[<p>提取当前目录及子目录下所有子文件到当前根目录，</p><p>在资源管理器搜索栏<code>*.*</code>也可以实现。</p><a id="more"></a><h4 id="拷贝模式"><a href="#拷贝模式" class="headerlink" title="拷贝模式"></a>拷贝模式</h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Echo</span> Off</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"><span class="built_in">title</span> 提取所有子目录文件  by：小可(xianghongai@gmail.com)</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 将以 复制 方式提取所有子目录文件，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b/s/a-d') <span class="keyword">do</span><span class="built_in">copy</span> /-y "<span class="variable">%%a</span>" "<span class="variable">%~dp0%</span>%~nxa"</span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><h4 id="剪切模式"><a href="#剪切模式" class="headerlink" title="剪切模式"></a>剪切模式</h4><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Echo</span> Off</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"><span class="built_in">title</span> 提取所有子目录文件  by：小可(xianghongai@gmail.com)</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 将以 剪切 方式提取所有子目录文件，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b/s/a-d') <span class="keyword">do</span><span class="built_in">move</span> /-y "<span class="variable">%%a</span>" "<span class="variable">%~dp0%</span>%~nxa"</span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(8) - 目录名操作</title>
    <link href="/tech/batch-in-action-8-directory-rename.html"/>
    <url>/tech/batch-in-action-8-directory-rename.html</url>
    <content type="html">
      <![CDATA[<p>批量对目录子目录进行加前缀、加后缀、替换字符、删除字符等操作，还有删除空目录。</p><a id="more"></a><p>利用批处理对目录名进行操作。</p><p>保存代码到<code>目录名操作.bat</code>执行，将要改动的目录拖放进来，按提示执行。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">mode</span><span class="built_in">con</span> cols=<span class="number">100</span> lines=<span class="number">38</span></span><br><span class="line"><span class="built_in">color</span><span class="number">02</span></span><br><span class="line"><span class="built_in">title</span> 文件夹操作  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 文件夹操作  [前后缀、序数、替换、删除、创建]</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 所有操作按回车键 (Enter) 继续</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line"><span class="built_in">set</span> /p HandleDir=拖一个需处理的文件夹进来:</span><br><span class="line"></span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 文件夹操作</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 当前目录：<span class="variable">%HandleDir%</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">1</span>.加前缀-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">11</span> - 仅第一层子目录：父目录名-本身目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">12</span> - 第一层下所有层级的目录名：上一层目录名-本身目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">13</span> - 仅第一层子目录：前缀字符-本身目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">14</span> - 第一层下所有层级的目录名：前缀字符-本身目录名</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">2</span>.加后缀-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">21</span> - 仅第一层子目录：本身目录名-后缀字符</span><br><span class="line">@<span class="built_in">echo</span><span class="number">22</span> - 第一层下所有层级的目录名：本身目录名-后缀字符</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">3</span>.替换删除-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">31</span> - 仅替换第一层子目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">32</span> - 替换第一层级下所有层级的目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">33</span> - 仅删除第一层子目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">34</span> - 删除第一层级下所有层级的目录名</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">4</span>.创建目录-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">41</span> - 创建目录（仅当前目录）</span><br><span class="line">@<span class="built_in">echo</span><span class="number">42</span> - 创建目录（第一层子目录）</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">5</span>.创建文件-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">51</span> - 创建文件（仅当前目录）</span><br><span class="line">@<span class="built_in">echo</span><span class="number">52</span> - 创建文件（仅第一层子目录）</span><br><span class="line">@<span class="built_in">echo</span><span class="number">53</span> - 创建文件（所有子目录）</span><br><span class="line">@<span class="built_in">echo</span> -------------------其它-------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span> - 重新选择目录</span><br><span class="line">@<span class="built_in">echo</span><span class="number">9</span> - 退出</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">set</span>  GTOperator=<span class="number">9</span></span><br><span class="line"><span class="built_in">set</span> /p GTOperator="选择操作数："</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">11</span><span class="keyword">goto</span> GTDIRPREFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">12</span><span class="keyword">goto</span> GTSUBDIRPREFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">13</span><span class="keyword">goto</span> GTDIRPREFIXCUSTOM</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">14</span><span class="keyword">goto</span> GTSUBDIRPREFIXCUSTOM</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">21</span><span class="keyword">goto</span> GTDIRSUFFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">22</span><span class="keyword">goto</span> GTSUBDIRSUFFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">23</span><span class="keyword">goto</span> GTDIRSUFFIXCUSTOM</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">24</span><span class="keyword">goto</span> GTSUBDIRSUFFIXCUSTOM</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">31</span><span class="keyword">goto</span> GTDIRREPLACE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">32</span><span class="keyword">goto</span> GTSUBDIRREPLACE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">33</span><span class="keyword">goto</span> GTDIRDEL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">34</span><span class="keyword">goto</span> GTSUBDIRDEL</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">41</span><span class="keyword">goto</span> GTMKDIR</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">42</span><span class="keyword">goto</span> GTSUBDIRMKDIR</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">51</span><span class="keyword">goto</span> GTMKFILE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">52</span><span class="keyword">goto</span> GTSUBDIRMKFILE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">53</span><span class="keyword">goto</span> GTAllSUBDIRMKFILE</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">8</span><span class="keyword">goto</span> GTBegin</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">9</span><span class="keyword">goto</span> GTExit</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 请选择正确的操作数</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem @echo 不能做文件名称的字符</span></span><br><span class="line"><span class="comment">rem @echo \ / : * ? " &lt; &gt; |</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem 11.仅第一层子目录：父目录名-本身目录名</span></span><br><span class="line">:GTDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ("<span class="variable">%cd%</span>") <span class="keyword">do</span><span class="built_in">set</span> "DirNamePrefix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b <span class="number">2</span>^&gt;<span class="built_in">nul</span>') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="variable">%%~</span>ni"</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 12.第一层下所有层级的目录名：上一层目录名-本身目录名</span></span><br><span class="line">:GTSUBDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="variable">%%~</span>nj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 13.仅第一层子目录：前缀字符-本身目录名</span></span><br><span class="line">:GTDIRPREFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> FilePrefix=""</span><br><span class="line"><span class="built_in">set</span> /p FilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad/b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"==%<span class="number">0</span><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%FilePrefix%</span><span class="variable">%%~</span>ni")</span><br><span class="line"><span class="built_in">set</span> FilePrefix=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 14.第一层下所有层级的目录名：前缀字符-本身目录名</span></span><br><span class="line">:GTSUBDIRPREFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">set</span> /p SubFilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!SubFilePrefix!</span><span class="variable">%%~</span>nj"))</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 21.仅第一层子目录：本身目录名-后缀字符</span></span><br><span class="line">:GTDIRSUFFIX</span><br><span class="line"><span class="built_in">set</span> FileSuffix=""</span><br><span class="line"><span class="built_in">set</span> /p FileSuffix="后缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad/b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"==%<span class="number">0</span><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%%~</span>ni<span class="variable">%FileSuffix%</span>")</span><br><span class="line"><span class="built_in">set</span> FileSuffix=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 22.第一层下所有层级的目录名：本身目录名-后缀字符</span></span><br><span class="line">:GTSUBDIRSUFFIX</span><br><span class="line"><span class="built_in">set</span> SubFileSuffix=""</span><br><span class="line"><span class="built_in">set</span> /p SubFileSuffix="后缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nj<span class="variable">!SubFileSuffix!</span>"))</span><br><span class="line"><span class="built_in">set</span> SubFileSuffix=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">rem 31.仅替换第一层子目录名</span></span><br><span class="line">:GTDIRREPLACE</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p oldStr=原字符:</span><br><span class="line"><span class="built_in">set</span> /p newStr=替换成:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">%%~</span>nxa"</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">!newFileName:%oldStr%=%newStr%!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%a</span>" "<span class="variable">!newFileName!</span>"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">set</span> oldStr=""</span><br><span class="line"><span class="built_in">set</span> newStr=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 32.替换第一层级下所有层级的目录名</span></span><br><span class="line">:GTSUBDIRREPLACE</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p oldStr=原字符:</span><br><span class="line"><span class="built_in">set</span> /p newStr=替换成:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">%%~</span>nxj"</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">!newFileName:%oldStr%=%newStr%!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!newFileName!</span>"))</span><br><span class="line"><span class="built_in">set</span> oldStr=""</span><br><span class="line"><span class="built_in">set</span> newStr=""</span><br><span class="line"><span class="built_in">set</span> newFileName=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 33.仅删除第一层子目录名</span></span><br><span class="line">:GTDIRDEL</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p DelStr=删除字符:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">%%a</span>"</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">!str:%DelStr%=!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%a</span>" "<span class="variable">!str!</span>"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">set</span> DelStr=""</span><br><span class="line"><span class="built_in">set</span> str=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 34.删除第一层级下所有层级的目录名</span></span><br><span class="line">:GTSUBDIRDEL</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p DelStr=删除字符:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">%%~</span>nxj"</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">!str:%DelStr%=!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!str!</span>"))</span><br><span class="line"><span class="built_in">set</span> DelStr=""</span><br><span class="line"><span class="built_in">set</span> str=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 41.创建目录（仅当前目录）</span></span><br><span class="line">:GTMKDIR</span><br><span class="line"><span class="built_in">set</span> /p CDirName=目录名:</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%CDirName%</span>"=="" <span class="keyword">goto</span> :GTMKDIR</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">md</span><span class="variable">%CDirName%</span></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 42.创建目录（第一层子目录）</span></span><br><span class="line">:GTSUBDIRMKDIR</span><br><span class="line"><span class="built_in">set</span> /p SubCDirName=目录名:</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%SubCDirName%</span>"=="" <span class="keyword">goto</span> :GTSUBDIRMKDIR</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /ad') <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">cd</span> "<span class="variable">%%i</span>"</span><br><span class="line"><span class="built_in">md</span><span class="variable">%SubCDirName%</span></span><br><span class="line"><span class="built_in">cd</span> "<span class="variable">%%~</span>dpi"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 51.创建文件（仅当前目录）</span></span><br><span class="line">:GTMKFILE</span><br><span class="line"><span class="built_in">set</span> /p CFileName=文件名:</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%CFileName%</span>"=="" <span class="keyword">goto</span> :GTMKFILE</span><br><span class="line"><span class="built_in">set</span> CFiledNameExpande="<span class="variable">%CFileName%</span>".txt</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">cd</span>.&gt;"<span class="variable">%CFiledNameExpande%</span>"</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 52.创建文件（第一层子目录）</span></span><br><span class="line">:GTSUBDIRMKFILE</span><br><span class="line"><span class="built_in">set</span> /p SubCFileName=文件名:</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%SubCFileName%</span>"=="" <span class="keyword">goto</span> :GTSUBDIRMKFILE</span><br><span class="line"><span class="built_in">set</span> CFiledNameExpande="<span class="variable">%SubCFileName%</span>".txt</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /ad') <span class="keyword">do</span><span class="built_in">cd</span>.&gt;"<span class="variable">%%i</span>\<span class="variable">%CFiledNameExpande%</span>"</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 53.创建文件（所有子目录）</span></span><br><span class="line">:GTAllSUBDIRMKFILE</span><br><span class="line"><span class="built_in">set</span> /p AllSubCFilesName=文件名:</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%AllSubCFilesName%</span>"=="" <span class="keyword">goto</span> :GTAllSUBDIRMKFILE</span><br><span class="line"><span class="built_in">set</span> CFiledNameExpande="<span class="variable">%AllSubCFilesName%</span>".txt</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /ad /s') <span class="keyword">do</span><span class="built_in">cd</span>.&gt;"<span class="variable">%%i</span>\<span class="variable">%CFiledNameExpande%</span>"</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> :)  搞定(回车继续其它操作)！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTExit</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><hr><p>删除所有空目录</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 删除所有空目录  by：小可(xianghongai@gmail.com)</span><br><span class="line">@<span class="built_in">echo</span> 删除所有空目录（含子目录）</span><br><span class="line">@<span class="built_in">echo</span> -----------------------------</span><br><span class="line">@ <span class="built_in">set</span> /p GTConfirm="继续操作吗？（y/n） "</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTConfirm:~0,1%</span>"=="y" (</span><br><span class="line"><span class="keyword">goto</span> GTYES</span><br><span class="line">) <span class="keyword">else</span> ( <span class="keyword">goto</span> GTNO )</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b /s^|sort /r') <span class="keyword">do</span><span class="built_in">rd</span> /q "<span class="variable">%%i</span>" <span class="number">2</span>&gt;<span class="built_in">nul</span></span><br><span class="line">@<span class="built_in">echo</span> :) 操作完成！</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Echo</span> Off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 删除所有空目录  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line">@<span class="built_in">echo</span> 删除所有空目录（含子目录）</span><br><span class="line">@<span class="built_in">echo</span> -----------------------------</span><br><span class="line">@ <span class="built_in">set</span> /p GTConfirm="继续操作吗？（y/n） "</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTConfirm:~0,1%</span>"=="y" (</span><br><span class="line"><span class="keyword">goto</span> GTYES</span><br><span class="line">) <span class="keyword">else</span> ( <span class="keyword">goto</span> GTNO )</span><br><span class="line">:GTYES</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b /s') <span class="keyword">do</span><span class="keyword">call</span> :RdEmptyDir "<span class="variable">%%i</span>"</span><br><span class="line"><span class="keyword">goto</span> :eof</span><br><span class="line">:RdEmptyDir</span><br><span class="line"><span class="built_in">rd</span> %<span class="number">1</span><span class="number">2</span>&gt;<span class="built_in">nul</span>||<span class="keyword">goto</span> :eof</span><br><span class="line"><span class="built_in">set</span> DirPath=%<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> (<span class="variable">%DirPath%</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> DirPath="<span class="variable">%%~</span>dpi"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%j</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b "<span class="variable">%%~</span>dpi"')<span class="keyword">do</span><span class="built_in">rd</span> "<span class="variable">%%~</span>dpi<span class="variable">%%j</span>" <span class="number">2</span>&gt;<span class="built_in">nul</span>||<span class="keyword">goto</span> :eof</span><br><span class="line">)</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%DirPath:~-2,1%</span>"=="\" <span class="built_in">set</span> DirPath="<span class="variable">%DirPath:~1,-2%</span>"</span><br><span class="line"><span class="keyword">if</span> /i <span class="keyword">not</span> "<span class="variable">%cd%</span>"==<span class="variable">%DirPath%</span><span class="keyword">call</span> :RdEmptyDir <span class="variable">%DirPath%</span></span><br><span class="line"><span class="keyword">goto</span> :eof</span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(7) - 文件名操作</title>
    <link href="/tech/batch-in-action-7-file-rename.html"/>
    <url>/tech/batch-in-action-7-file-rename.html</url>
    <content type="html">
      <![CDATA[<p>每次看到小伙伴<a href="http://www.bulkrenameutility.co.uk/Main_Intro.php" target="_blank" rel="noopener">Bulk Rename Utility</a>玩不转，手动对大量目录子目录下的文件进行加前缀、加后缀、替换、删除等改名操作，就非常心疼。</p><a id="more"></a><p>利用批处理对文件名进行操作。</p><p>操作文件前应当对原文件有备份，因为Windows系统对文件名排序这块是<code>02</code>在<code>1</code>之后。</p><p>保存代码到<code>文件名操作.bat</code>执行，将要改动的文件所在目录拖放进来，按提示执行。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="comment">@REM @Date:   2012-02-06</span></span><br><span class="line"><span class="built_in">mode</span><span class="built_in">con</span> cols=<span class="number">100</span> lines=<span class="number">38</span></span><br><span class="line"><span class="built_in">color</span><span class="number">02</span></span><br><span class="line"><span class="built_in">title</span> 文件名操作  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 文件名操作  [前后缀、序数、替换、删除]</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 所有操作按回车键 (Enter) 继续</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line"><span class="built_in">set</span> /p HandleDir=拖一个需处理的文件夹进来:</span><br><span class="line"></span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 文件名操作</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span> 处理的目录：<span class="variable">%HandleDir%</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">1</span>.加前缀-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">11</span> - 当前目录：目录名-文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">12</span> - 层级子目录：子目录名-文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">13</span> - 当前目录：前缀字符-文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">14</span> - 层级子目录：前缀字符-文件名</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">2</span>.加后缀-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">21</span> - 当前目录：文件名-目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">22</span> - 层级子目录：文件名-子目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">23</span> - 当前目录：文件名-后缀字符</span><br><span class="line">@<span class="built_in">echo</span><span class="number">24</span> - 层级子目录：文件名-后缀字符</span><br><span class="line">@<span class="built_in">echo</span> -----------------<span class="number">3</span>.加序数-----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">31</span> - 当前目录：序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">32</span> - 层级子目录：序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">33</span> - 当前目录：文件名-序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">34</span> - 层级子目录：文件名-序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">35</span> - 当前目录：目录名-序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">36</span> - 层级子目录：子目录名-序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">37</span> - 当前目录：字符-序数</span><br><span class="line">@<span class="built_in">echo</span> -------------<span class="number">31</span>.加序数(零占位)-------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">311</span> - 当前目录：目录名-两位序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">312</span> - 层级子目录：子目录名-两位序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">313</span> - 当前目录：字符-两位序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">314</span> - 当前目录：目录名-三位序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">315</span> - 层级子目录：子目录名-三位序数</span><br><span class="line">@<span class="built_in">echo</span><span class="number">316</span> - 当前目录：字符-三位序数</span><br><span class="line">@<span class="built_in">echo</span> ----------------<span class="number">4</span>.替换删除----------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">41</span> - 替换当前目录下文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">42</span> - 替换所有子层级中的文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">43</span> - 删除当前目录下文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">44</span> - 删除所有子层级中的文件名</span><br><span class="line">@<span class="built_in">echo</span> -------------------其它-------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span> - 重新选择目录</span><br><span class="line">@<span class="built_in">echo</span><span class="number">9</span> - 退出</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">set</span>  GTOperator=<span class="number">9</span></span><br><span class="line"><span class="built_in">set</span> /p GTOperator="选择操作数后: "</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">11</span><span class="keyword">goto</span> GTDIRPREFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">12</span><span class="keyword">goto</span> GTSUBDIRPREFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">13</span><span class="keyword">goto</span> GTDIRPREFIXCUSTOM</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">14</span><span class="keyword">goto</span> GTSUBDIRPREFIXCUSTOM</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">21</span><span class="keyword">goto</span> GTDIRSUFFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">22</span><span class="keyword">goto</span> GTSUBDIRSUFFIX</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">23</span><span class="keyword">goto</span> GTDIRSUFFIXCUSTOM</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">24</span><span class="keyword">goto</span> GTSUBDIRSUFFIXCUSTOM</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">31</span><span class="keyword">goto</span> GTDIRORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">32</span><span class="keyword">goto</span> GTSUBDIRORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">33</span><span class="keyword">goto</span> GTDIRFLIENAMEORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">34</span><span class="keyword">goto</span> GTSUBDIRFILENAMEORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">35</span><span class="keyword">goto</span> GTDIRNAMEORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">36</span><span class="keyword">goto</span> GTSUBDIRNAMEORDINAL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">37</span><span class="keyword">goto</span> GTDIRCUSTOMNAMEORDINAL</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">311</span><span class="keyword">goto</span> GTDIRNAMEORDINALOO</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">312</span><span class="keyword">goto</span> GTSUBDIRNAMEORDINALOO</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">313</span><span class="keyword">goto</span> GTDIRCUSTOMNAMEORDINALOO</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">314</span><span class="keyword">goto</span> GTDIRNAMEORDINALOOO</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">315</span><span class="keyword">goto</span> GTSUBDIRNAMEORDINALOOO</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">316</span><span class="keyword">goto</span> GTDIRCUSTOMNAMEORDINALOOO</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">41</span><span class="keyword">goto</span> GTDIRREPLACE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">42</span><span class="keyword">goto</span> GTSUBDIRREPLACE</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">43</span><span class="keyword">goto</span> GTDIRDEL</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">44</span><span class="keyword">goto</span> GTSUBDIRDEL</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">8</span><span class="keyword">goto</span> GTBegin</span><br><span class="line"><span class="keyword">if</span><span class="variable">%GTOperator%</span><span class="keyword">equ</span><span class="number">9</span><span class="keyword">goto</span> GTExit</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 请选择正确的操作数</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem @echo 不能做文件名称的字符</span></span><br><span class="line"><span class="comment">rem @echo \ / : * ? " &lt; &gt; |</span></span><br><span class="line"></span><br><span class="line"><span class="comment">rem 11.当前目录：目录名-文件名</span></span><br><span class="line">:GTDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ("<span class="variable">%cd%</span>") <span class="keyword">do</span><span class="built_in">set</span> "DirNamePrefix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="variable">%%~</span>nxi"</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 12.子目录：子目录名-文件名</span></span><br><span class="line">:GTSUBDIRPREFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="comment">rem for /r %%a in (*.*) do (for %%b in ("%%a\..") do (ren "%%a" "%%~nxb-%%~nxa"))</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="variable">%%~</span>nxj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 13.当前目录：前缀字符-文件名</span></span><br><span class="line">:GTDIRPREFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> FilePrefix=""</span><br><span class="line"><span class="built_in">set</span> /p FilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d/b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"==%<span class="number">0</span><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%FilePrefix%</span><span class="variable">%%~</span>nxi")</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 14.子目录：前缀字符-文件名</span></span><br><span class="line">:GTSUBDIRPREFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">set</span> /p SubFilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="comment">rem for /f "usebackq delims=" %%i in (`dir /a-d/b/s`) do (if not "%%i"==%0 ren "%%i" "%SubFilePrefix%%%~nxi")</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!SubFilePrefix!</span><span class="variable">%%~</span>nxj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 21.当前目录：文件名-目录名</span></span><br><span class="line">:GTDIRSUFFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ("<span class="variable">%cd%</span>") <span class="keyword">do</span><span class="built_in">set</span> "DirNameSuffix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%%~</span>ni-<span class="variable">%DirNameSuffix%</span><span class="variable">%%~</span>xi"</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 22.子目录：文件名-子目录名</span></span><br><span class="line">:GTSUBDIRSUFFIX</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="comment">rem for /r %%a in (*.*) do (for %%b in ("%%a\..") do (ren "%%a" "%%~na-%%~nxb%%~xa"))</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nj-<span class="variable">%%~</span>nxi<span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 23.当前目录：文件名-后缀字符</span></span><br><span class="line">:GTDIRSUFFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> FileSuffix=""</span><br><span class="line"><span class="built_in">set</span> /p FileSuffix="后缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d/b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"==%<span class="number">0</span><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%%~</span>ni<span class="variable">!FileSuffix!</span><span class="variable">%%~</span>xi")</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 24.子目录：文件名-后缀字符</span></span><br><span class="line">:GTSUBDIRSUFFIXCUSTOM</span><br><span class="line"><span class="built_in">set</span> SubFileSuffix=""</span><br><span class="line"><span class="built_in">set</span> /p SubFileSuffix="后缀字符:"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="comment">rem for /f "usebackq delims=" %%i in (`dir /a-d/b/s`) do (if not "%%i"==%0 ren "%%i" "%%~ni%SubFileSuffix%%%~xi")</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nj<span class="variable">!SubFileSuffix!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 31.当前目录：序数</span></span><br><span class="line">:GTDIRORDINAL</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRORDINALORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRORDINALORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> /tc`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"=="<span class="variable">%~n0%</span>~x0" (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!num!</span><span class="variable">%%~</span>xi" ))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 32.子目录：序数</span></span><br><span class="line">:GTSUBDIRORDINAL</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTSUBDIRORDINALORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTSUBDIRORDINALORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!num!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 33.当前目录：文件名-序数</span></span><br><span class="line">:GTDIRFLIENAMEORDINAL</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRFLIENAMEORDINALORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRFLIENAMEORDINALORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%%~</span>ni-<span class="variable">!num!</span><span class="variable">%%~</span>xi"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 34.子目录：文件名-序数</span></span><br><span class="line">:GTSUBDIRFILENAMEORDINAL</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTSUBDIRFILENAMEORDINALORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTSUBDIRFILENAMEORDINALORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nj-<span class="variable">!num!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 35.当前目录：目录名-序数</span></span><br><span class="line">:GTDIRNAMEORDINAL</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRNAMEORDINALORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRNAMEORDINALORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="variable">%cd%</span>') <span class="keyword">do</span><span class="built_in">set</span> "DirNamePrefix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="variable">!num!</span><span class="variable">%%~</span>xi"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 36.子目录：子目录名-序数</span></span><br><span class="line">:GTSUBDIRNAMEORDINAL</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="variable">!num!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 37.自定义字符和开始序数</span></span><br><span class="line">:GTDIRCUSTOMNAMEORDINAL</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">set</span> StartNum=<span class="number">0</span></span><br><span class="line"><span class="built_in">set</span> /p SubFilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">set</span> /p StartNum="开始序数:"</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"=="<span class="variable">%~n0%</span>~x0" (</span><br><span class="line"><span class="built_in">set</span> /a StartNum+=<span class="number">1</span></span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi" ))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 311.当前目录：目录名-两位序数</span></span><br><span class="line">:GTDIRNAMEORDINALOO</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRNAMEORDINALOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRNAMEORDINALOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="variable">%cd%</span>') <span class="keyword">do</span><span class="built_in">set</span> "DirNamePrefix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">10</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="number">0</span><span class="variable">!num!</span><span class="variable">%%~</span>xi"  ) <span class="keyword">else</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="variable">!num!</span><span class="variable">%%~</span>xi" )</span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 312.子目录：子目录名-两位序数</span></span><br><span class="line">:GTSUBDIRNAMEORDINALOO</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTSUBDIRNAMEORDINALOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTSUBDIRNAMEORDINALOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">10</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>ni-<span class="number">0</span><span class="variable">!num!</span><span class="variable">%%~</span>xj"  ) <span class="keyword">else</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>ni-<span class="variable">!num!</span><span class="variable">%%~</span>xj" )</span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 313.当前目录：自定义字符和开始序数(两位)</span></span><br><span class="line">:GTDIRCUSTOMNAMEORDINALOO</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">set</span> StartNum=<span class="number">0</span></span><br><span class="line"><span class="built_in">set</span> /p SubFilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">set</span> /p StartNum="开始序数:"</span><br><span class="line"><span class="built_in">set</span> /a StartNum-=<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRCUSTOMNAMEORDINALOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRCUSTOMNAMEORDINALOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"=="<span class="variable">%~n0%</span>~x0" (</span><br><span class="line"><span class="built_in">set</span> /a StartNum+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!StartNum!</span><span class="keyword">LSS</span><span class="number">10</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="number">0</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi"  ) <span class="keyword">else</span> ( <span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi" )</span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 314.当前目录：目录名-三位序数</span></span><br><span class="line">:GTDIRNAMEORDINALOOO</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRNAMEORDINALOOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRNAMEORDINALOOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="variable">%cd%</span>') <span class="keyword">do</span><span class="built_in">set</span> "DirNamePrefix=<span class="variable">%%~</span>nxi"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> *.* <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%~nx0"=="%</span>%i" (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">10</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="number">00</span><span class="variable">!num!</span><span class="variable">%%~</span>xi"</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">100</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="number">0</span><span class="variable">!num!</span><span class="variable">%%~</span>xi"</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%DirNamePrefix%</span>-<span class="variable">!num!</span><span class="variable">%%~</span>xi"</span><br><span class="line">)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 315.子目录：子目录名-三位序数</span></span><br><span class="line">:GTSUBDIRNAMEORDINALOOO</span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTSUBDIRNAMEORDINALOOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTSUBDIRNAMEORDINALOOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span> "<span class="variable">%%i</span>\*.*" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a num+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">10</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="number">00</span><span class="variable">!num!</span><span class="variable">%%~</span>xj"</span><br><span class="line">    ) <span class="keyword">else</span> (</span><br><span class="line"><span class="keyword">if</span><span class="variable">!num!</span><span class="keyword">LSS</span><span class="number">100</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="number">0</span><span class="variable">!num!</span><span class="variable">%%~</span>xj"</span><br><span class="line">      ) <span class="keyword">else</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">%%~</span>nxi-<span class="variable">!num!</span><span class="variable">%%~</span>xj"</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 316.自定义字符和开始序数(三位)</span></span><br><span class="line">:GTDIRCUSTOMNAMEORDINALOOO</span><br><span class="line"><span class="built_in">set</span> SubFilePrefix=""</span><br><span class="line"><span class="built_in">set</span> StartNum=<span class="number">0</span></span><br><span class="line"><span class="built_in">set</span> /p SubFilePrefix="前缀字符:"</span><br><span class="line"><span class="built_in">set</span> /p StartNum="开始序数:"</span><br><span class="line"><span class="built_in">set</span> /a StartNum-=<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> NOrderBy=<span class="number">1</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span> 文件排序方式</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span>.文件大小</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span>.文件小大</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span>.创建时间早晚</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span>.创建时间晚早</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span>.文件名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span>.文件名Z-A</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span>.扩展名A-Z</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span>.扩展名Z-A</span><br><span class="line">@<span class="built_in">echo</span> --------------------------------------------</span><br><span class="line">:GTDIRCUSTOMNAMEORDINALOOOORDERBY</span><br><span class="line"><span class="built_in">set</span> /p NOrderBy="文件排序方式:"</span><br><span class="line"><span class="built_in">set</span> OrderBy=d</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">1</span> (<span class="built_in">set</span> OrderBy=-s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">2</span> (<span class="built_in">set</span> OrderBy=s)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">3</span> (<span class="built_in">set</span> OrderBy=d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">4</span> (<span class="built_in">set</span> OrderBy=-d)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">5</span> (<span class="built_in">set</span> OrderBy=n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">6</span> (<span class="built_in">set</span> OrderBy=-n)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">7</span> (<span class="built_in">set</span> OrderBy=-e)</span><br><span class="line"><span class="keyword">if</span><span class="variable">%NOrderBy%</span><span class="keyword">equ</span><span class="number">8</span> (<span class="built_in">set</span> OrderBy=e)</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%NOrderBy%</span>|<span class="built_in">findstr</span> /be "[<span class="number">1</span>-<span class="number">8</span>]" &gt;<span class="built_in">nul</span> || (<span class="built_in">echo</span> 选择支持的排序方式 &amp; <span class="keyword">goto</span> GTDIRCUSTOMNAMEORDINALOOOORDERBY)</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /o<span class="variable">!OrderBy!</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%%i</span>"=="<span class="variable">%~n0%</span>~x0" (</span><br><span class="line"><span class="built_in">set</span> /a StartNum+=<span class="number">1</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!StartNum!</span><span class="keyword">LSS</span><span class="number">10</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="number">00</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi"</span><br><span class="line">     ) <span class="keyword">else</span> (</span><br><span class="line"><span class="keyword">if</span><span class="variable">!StartNum!</span><span class="keyword">LSS</span><span class="number">100</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="number">0</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi"</span><br><span class="line">       ) <span class="keyword">else</span> (</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">!SubFilePrefix!</span><span class="variable">!StartNum!</span><span class="variable">%%~</span>xi"</span><br><span class="line">       )</span><br><span class="line">     )</span><br><span class="line">))</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 替换当前目录下文件名</span></span><br><span class="line">:GTDIRREPLACE</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p oldStr=原字符:</span><br><span class="line"><span class="built_in">set</span> /p newStr=替换成:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">%%~</span>na"</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">!newFileName:%oldStr%=%newStr%!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%a</span>" "<span class="variable">!newFileName!</span><span class="variable">%%~</span>xa"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 替换所有子层级中的文件名</span></span><br><span class="line">:GTSUBDIRREPLACE</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p oldStr=原字符:</span><br><span class="line"><span class="built_in">set</span> /p newStr=替换成:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">%%~</span>nj"</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">!newFileName:%oldStr%=%newStr%!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!newFileName!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">set</span> oldStr=""</span><br><span class="line"><span class="built_in">set</span> newStr=""</span><br><span class="line"><span class="built_in">set</span> newFileName=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 删除当前目录下文件名</span></span><br><span class="line">:GTDIRDEL</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p DelStr=删除字符:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=*" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">%%~</span>na"</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">!str:%DelStr%=!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%a</span>" "<span class="variable">!str!</span><span class="variable">%%~</span>xa"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 删除所有子层级中的文件名</span></span><br><span class="line">:GTSUBDIRDEL</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">!HandleDir!</span>"</span><br><span class="line"><span class="built_in">set</span> /p DelStr=删除字符:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%i</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /ad /b /s^|sort /r`) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims=" <span class="variable">%%j</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b "<span class="variable">%%i</span>\" <span class="number">2</span>^&gt;<span class="built_in">nul</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">%%~</span>nj"</span><br><span class="line"><span class="built_in">set</span> "str=<span class="variable">!str:%DelStr%=!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%%i</span>\<span class="variable">%%j</span>" "<span class="variable">!str!</span><span class="variable">%%~</span>xj"))</span><br><span class="line"><span class="built_in">set</span> DelStr=""</span><br><span class="line"><span class="built_in">set</span> str=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> ：）  搞定(回车继续其它操作)</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTExit</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(6) - 多轮修改文件名</title>
    <link href="/tech/batch-in-action-6-multiple-times-rename-files.html"/>
    <url>/tech/batch-in-action-6-multiple-times-rename-files.html</url>
    <content type="html">
      <![CDATA[<p>多轮批量修改目录下文件名，更改文件名大写为小写。</p><a id="more"></a><p>保存代码到<code>替换文件名[便捷拖入].bat</code>，将要改动的目录拖放在本bat文件图标上，按提示执行。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 批量替换文件名  by：小可(xianghongai@gmail.com)</span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">set</span> /a count=<span class="variable">%count%</span>+<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> /p oldStr=原字符:</span><br><span class="line"><span class="built_in">set</span> /p newStr=替换成:</span><br><span class="line"><span class="keyword">for</span> /f "tokens=*" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> "%~<span class="number">1</span>" /a /b') <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">%%~</span>na"</span><br><span class="line"><span class="built_in">set</span> "newFileName=<span class="variable">!newFileName:%oldStr%=%newStr%!</span>"</span><br><span class="line"><span class="built_in">ren</span> "<span class="variable">%~1\%</span>%~nxa" "<span class="variable">!newFileName!</span><span class="variable">%%~</span>xa"</span><br><span class="line"><span class="built_in">ENDLOCAL</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 完成 <span class="variable">%count%</span> 轮</span><br><span class="line"><span class="built_in">set</span> oldStr=""</span><br><span class="line"><span class="built_in">set</span> newStr=""</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="keyword">goto</span> :GTCONTINUE</span><br></pre></td></tr></table></figure><hr><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">title</span> 更改文件名大写为小写</span><br><span class="line">::本代码原思路由yyykkkyyyy提供，依梦琴瑶修改并添加子目录的文件处理</span><br><span class="line"><span class="built_in">set</span><span class="built_in">dir</span>=%~dp0&amp;<span class="keyword">call</span>:cdto</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span>/s/b/ad') <span class="keyword">do</span><span class="built_in">set</span><span class="built_in">dir</span>=<span class="variable">%%i</span>&amp;<span class="keyword">call</span>:cdto</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"><span class="keyword">exit</span>/b</span><br><span class="line">:cdto</span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%dir%</span></span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%i</span><span class="keyword">in</span> ('<span class="built_in">dir</span>/b/a-d/l') <span class="keyword">do</span><span class="built_in">ren</span> "<span class="variable">%%i</span>" "<span class="variable">%%i</span>"</span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(5) - 根据文件名自动创建目录存放文件</title>
    <link href="/tech/batch-in-action-5-create-folder-using-part-of-filename-and-move-file-into.html"/>
    <url>/tech/batch-in-action-5-create-folder-using-part-of-filename-and-move-file-into.html</url>
    <content type="html">
      <![CDATA[<p>以前给画家杨彦作助理，要维护杨老师几十年的电子作品数据，若干文件，但是，有一定规则，如有按年份命名，这样，根据<code>&quot;tokens=1,* delims=-&quot;</code>按长度按指定字符切分文件名，自动创建年份的目录，保存对应的所有文件。</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1998-001.jpg ~ 1998-xxx.jpg</span><br><span class="line">1999-001.jpg ~ 1999-xxx.jpg</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>代码实现，按需设定切分规则。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span>   根据文件名自动创建目录存放文件  by：小可(xianghongai@gmail.com)</span><br><span class="line">@<span class="built_in">echo</span> 根据文件名自动创建目录存放文件</span><br><span class="line">@<span class="built_in">echo</span> -------------------------------------</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line">@<span class="built_in">echo</span> 默认处理目录下所有格式文件，确定继续？(y/n)</span><br><span class="line"><span class="built_in">set</span> /p GTConfirm=</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="Y" <span class="keyword">goto</span> GTYES</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="n" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%GTConfirm%</span>"=="N" <span class="keyword">goto</span> GTNO</span><br><span class="line"><span class="built_in">echo</span> 请输入正确的指令</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line">:GTYES</span><br><span class="line">@<span class="built_in">echo</span> -------------------------------------</span><br><span class="line"><span class="built_in">set</span> /p FilePath=需要处理的目录:</span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%FilePath%</span></span><br><span class="line"><span class="keyword">for</span> /f "tokens=<span class="number">1</span>,* delims=-" <span class="variable">%%J</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b *.*') <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span> "<span class="variable">%%J</span>\" <span class="built_in">md</span> "<span class="variable">%%J</span>"</span><br><span class="line"><span class="built_in">move</span> /-y "<span class="variable">%%J</span>-<span class="variable">%%K</span>" "<span class="variable">%%J</span>"</span><br><span class="line">    )</span><br><span class="line"><span class="built_in">echo</span>. :) 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"></span><br><span class="line">:GTNO</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(4) - 通过文本内容重命名文件</title>
    <link href="/tech/batch-in-action-4-rename-files-from-text.html"/>
    <url>/tech/batch-in-action-4-rename-files-from-text.html</url>
    <content type="html">
      <![CDATA[<p>对一个目录下，不能全部规则的命名文件，先按上文介绍的在Excel拖行数据保存在文本，然后用批处理一次性处理各文件，在处理前给一个对应命名的提示，先审检是否达到既定目的。</p><a id="more"></a><p>准备一个文本文件，里面是一行行即将要命名的文件名；准备一个要命名的目录文件；<br>保存本代码到<code>通过文本内容重命名文件.bat</code>，执行按提示操作。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 通过文本内容重命名文件  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">setlocal</span> EnableDelayedExpansion</span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line"><span class="built_in">echo</span> 通过文本内容重命名文件</span><br><span class="line"><span class="built_in">echo</span> -----------------------------</span><br><span class="line"><span class="built_in">set</span> /p importTxt=拖文本文件按Enter键:</span><br><span class="line"><span class="built_in">set</span> /p filesPath=拖目录路径按Enter键:</span><br><span class="line"><span class="built_in">set</span> i=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=<span class="number">1</span> delims==" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">more</span> /s <span class="variable">%importTxt%</span>`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a i+=<span class="number">1</span></span><br><span class="line"><span class="built_in">set</span> "author[<span class="variable">!i!</span>]=<span class="variable">%%a</span>"</span><br><span class="line">)</span><br><span class="line"><span class="built_in">set</span> j=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq" <span class="variable">%%b</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /b "<span class="variable">%filesPath%</span>\*.*"`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a j+=<span class="number">1</span></span><br><span class="line">)</span><br><span class="line"><span class="built_in">set</span> k=<span class="variable">!i!</span>,<span class="variable">!j!</span></span><br><span class="line"><span class="built_in">set</span> nMax=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span><span class="variable">%%a</span><span class="keyword">in</span> (<span class="variable">%k%</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="variable">%%~</span>a <span class="keyword">gtr</span><span class="variable">!nMax!</span><span class="built_in">set</span> nMax=<span class="variable">%%~</span>a</span><br><span class="line">)</span><br><span class="line"><span class="comment">rem echo 最大值：!nMax!</span></span><br><span class="line"><span class="built_in">set</span> nMin=<span class="variable">!nMax!</span></span><br><span class="line"><span class="keyword">for</span><span class="variable">%%a</span><span class="keyword">in</span> (<span class="variable">%k%</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="variable">%%~</span>a <span class="keyword">lss</span><span class="variable">!nMin!</span><span class="built_in">set</span> nMin=<span class="variable">%%~</span>a</span><br><span class="line">)</span><br><span class="line"><span class="comment">rem echo 最小值：!nMin!</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> c=<span class="number">0</span></span><br><span class="line"><span class="built_in">set</span> FilesExist=<span class="number">0</span></span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 文件即将按以下格式重命名：</span><br><span class="line"><span class="built_in">echo</span> -----------------------------</span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims==" <span class="variable">%%b</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /on /tc "<span class="variable">%filesPath%</span>"`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a c+=<span class="number">1</span></span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%filesPath%</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!c!</span><span class="keyword">leq</span><span class="variable">!nMin!</span> (</span><br><span class="line"><span class="keyword">for</span><span class="variable">%%a</span><span class="keyword">in</span> (<span class="variable">!c!</span>) <span class="keyword">do</span> (</span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">!author[%%a]!</span><span class="variable">%%~</span>xb (</span><br><span class="line"><span class="built_in">echo</span> "<span class="variable">%%b</span>" "<span class="variable">!author[%%a]!</span><span class="variable">%%~</span>xb"</span><br><span class="line">       ) <span class="keyword">else</span> (</span><br><span class="line"><span class="built_in">set</span> /a FilesExist+=<span class="number">1</span></span><br><span class="line"><span class="built_in">echo</span> 已有文件 "<span class="variable">!author[%%a]!</span><span class="variable">%%~</span>xb"</span><br><span class="line">       )</span><br><span class="line">      )</span><br><span class="line">   )</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> -----------------------------</span><br><span class="line"><span class="keyword">if</span><span class="variable">!FilesExist!</span><span class="keyword">gtr</span><span class="number">0</span> (</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line"><span class="built_in">echo</span> 当前目录有 <span class="variable">!FilesExist!</span> 个相同命名的文件，</span><br><span class="line"><span class="built_in">echo</span> 可能会引起文本内容行和对应文件的错位！</span><br><span class="line"><span class="built_in">echo</span>.</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> 按Enter键确认操作</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="built_in">set</span> d=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> /f "usebackq delims==" <span class="variable">%%b</span><span class="keyword">in</span> (`<span class="built_in">dir</span> /a-d /b /on /tc "<span class="variable">%filesPath%</span>"`) <span class="keyword">do</span> (</span><br><span class="line"><span class="built_in">set</span> /a d+=<span class="number">1</span></span><br><span class="line"><span class="built_in">cd</span> /d <span class="variable">%filesPath%</span></span><br><span class="line"><span class="keyword">if</span><span class="variable">!d!</span><span class="keyword">leq</span><span class="variable">!nMin!</span> (</span><br><span class="line"><span class="keyword">for</span><span class="variable">%%a</span><span class="keyword">in</span> (<span class="variable">!d!</span>) <span class="keyword">do</span> ( <span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span> "<span class="variable">!author[%%a]!</span><span class="variable">%%~</span>xb" ( <span class="built_in">ren</span> "<span class="variable">%%b</span>" "<span class="variable">!author[%%a]!</span><span class="variable">%%~</span>xb" ) )</span><br><span class="line">   )</span><br><span class="line">)</span><br><span class="line"><span class="built_in">echo</span> 搞定</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(3) - 通过文本内容行创建文件夹</title>
    <link href="/tech/batch-in-action-3-create-folders-from-each-line-of-a-textfile.html"/>
    <url>/tech/batch-in-action-3-create-folders-from-each-line-of-a-textfile.html</url>
    <content type="html">
      <![CDATA[<p>还是在电商团队，每次处理新商品和上架新商品，商品太多，小伙伴以前是一个一个复制粘贴改名建立目录归档文件，比较麻烦，各商品有一定属性，不能直接批处理建立，于是让小伙伴先Excel按他们命名规则拖一行行数据，然后保存在txt，然后用批处理一次性建立各目录。</p><a id="more"></a><p>要执行，准备一个文本文件，里面是一行行即将要创建为目录的目录名；准备一个空根目录；<br>保存本代码到<code>通过文本内容行创建文件夹.bat</code>，执行按提示拖相关文件和目录进去即可。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 通过文本创建目录  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">echo</span> 通过文本创建目录</span><br><span class="line"><span class="built_in">echo</span> -----------------------------</span><br><span class="line"><span class="built_in">set</span> /p importTxt=拖文本文件按Enter键:</span><br><span class="line"><span class="built_in">set</span> /p outputPath=拖保存路径按Enter键:</span><br><span class="line"><span class="keyword">for</span> /f "usebackq tokens=<span class="number">1</span> delims==" <span class="variable">%%a</span><span class="keyword">in</span> (`<span class="built_in">more</span> /s <span class="variable">%importTxt%</span>`) <span class="keyword">do</span><span class="built_in">mkdir</span> "<span class="variable">%outputPath%</span>\<span class="variable">%%a</span>"</span><br><span class="line">explorer.exe "<span class="variable">%outputPath%</span>"</span><br><span class="line"><span class="built_in">echo</span> :)  搞定啦!</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(2) - 获取目录名、文件名或路径</title>
    <link href="/tech/batch-in-action-2-get-path.html"/>
    <url>/tech/batch-in-action-2-get-path.html</url>
    <content type="html">
      <![CDATA[<p>以前在电商团队，小伙伴每天要处理很多商品文件，上千个商品找对应文件不方便。早先不知道有<a href="http://www.voidtools.com/" target="_blank" rel="noopener">Everything</a>这个工具，自己用C#写了快速搜寻和定位文件、目录的小工具，其中路径数据获取，用C#生成批处理文件执行调用实现，然后关键字匹配找目录和文件，还可以作用于局域网。</p><a id="more"></a><p>批处理部分代码如下：</p><p>要执行，保存代码到<code>获取目录文件名或路径.bat</code>执行，拖一个目录进去回车，按提示选择对应数字序数操作。</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="comment">@REM @Author: xianghongai@gmail.com</span></span><br><span class="line"><span class="built_in">title</span> 获取目录文件名或路径  by：小可(xianghongai@gmail.com)</span><br><span class="line"><span class="built_in">SETLOCAL</span> ENABLEDELAYEDEXPANSION</span><br><span class="line"></span><br><span class="line">:GTBegin</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 获取目录文件名或路径</span><br><span class="line">@<span class="built_in">echo</span> -----------------------------</span><br><span class="line"><span class="built_in">set</span> HandleDirTemp=:</span><br><span class="line"><span class="built_in">set</span> /p HandleDirTemp=需获取的目录：</span><br><span class="line"></span><br><span class="line"><span class="comment">rem 去除可能存在的双引号</span></span><br><span class="line"><span class="built_in">set</span> "HandleDirTemp=<span class="variable">%HandleDirTemp:"=%</span>"</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> "<span class="variable">%HandleDirTemp%</span>"==":" <span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span> "<span class="variable">%HandleDirTemp%</span>" <span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span><span class="variable">%%i</span><span class="keyword">in</span> ("<span class="variable">%HandleDirTemp%</span>") <span class="keyword">do</span><span class="keyword">if</span> /i "<span class="variable">%%~</span>di"==<span class="variable">%%i</span><span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> "HandleDir=<span class="variable">%HandleDirTemp%</span>"</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span> "<span class="variable">%HandleDirTemp:~-1%</span>"=="\" <span class="built_in">set</span> "HandleDir=<span class="variable">%HandleDirTemp%</span>\"</span><br><span class="line"></span><br><span class="line"><span class="comment">rem set "HandleDir=%HandleDirTemp%\"</span></span><br><span class="line"><span class="comment">rem set "HandleDir=%HandleDir:\\=\%"</span></span><br><span class="line"><span class="comment">rem set "op=%op:~,-1%"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">pushd</span> "<span class="variable">%HandleDir%</span>"</span><br><span class="line"><span class="built_in">cd</span> /d "<span class="variable">%HandleDir%</span>"&gt;<span class="built_in">nul</span><span class="number">2</span>&gt;<span class="built_in">nul</span> || <span class="keyword">exit</span></span><br><span class="line"><span class="built_in">set</span> CurrentDir=<span class="variable">%HandleDir%</span></span><br><span class="line"><span class="built_in">popd</span></span><br><span class="line"></span><br><span class="line">:GTCONTINUE</span><br><span class="line"><span class="built_in">cls</span></span><br><span class="line">@<span class="built_in">echo</span> 获取目录文件名或路径</span><br><span class="line">@<span class="built_in">echo</span> -----------------------------</span><br><span class="line">@<span class="built_in">echo</span> 处理目录：<span class="variable">%CurrentDir%</span></span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@<span class="built_in">echo</span><span class="number">1</span> - 退出</span><br><span class="line">@<span class="built_in">echo</span><span class="number">2</span> - 所有目录和文件路径</span><br><span class="line">@<span class="built_in">echo</span><span class="number">3</span> - 所有目录路径</span><br><span class="line">@<span class="built_in">echo</span><span class="number">4</span> - 指定格式的文件路径</span><br><span class="line">@<span class="built_in">echo</span><span class="number">5</span> - 所有目录名和文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">6</span> - 所有层级目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">7</span> - 所有层级文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">8</span> - 当前层级目录名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">9</span> - 当前层级文件名</span><br><span class="line">@<span class="built_in">echo</span><span class="number">0</span> - 重新设置目录</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line">@ <span class="built_in">set</span> /p GTOperator="选择操作编号，按回车键: "</span><br><span class="line">@<span class="built_in">echo</span>.</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> varDir= %~dp0</span><br><span class="line"><span class="built_in">set</span> varTimeTemp1=%<span class="built_in">time</span>: =<span class="number">0</span>%</span><br><span class="line"><span class="built_in">set</span> varTimeTemp2=<span class="variable">%varTimeTemp1::=%</span></span><br><span class="line"><span class="built_in">set</span> varTime=<span class="variable">%varTimeTemp2:~0,6%</span></span><br><span class="line"><span class="built_in">set</span> varDate=<span class="variable">%date:~0,4%</span><span class="variable">%date:~5,2%</span><span class="variable">%date:~8,2%</span><span class="variable">%varTime%</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">1</span>" <span class="keyword">goto</span> GTExit</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">2</span>" <span class="keyword">goto</span> GTDIRFILEPATH</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">3</span>" <span class="keyword">goto</span> GTDIRPATH</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">4</span>" <span class="keyword">goto</span> GTFILEPATHCUSTOMFORMAT</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">5</span>" <span class="keyword">goto</span> GTDIRFILENAME</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">6</span>" <span class="keyword">goto</span> GTDIRNAME</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">7</span>" <span class="keyword">goto</span> GTFILESNAME</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">8</span>" <span class="keyword">goto</span> GTDIRNAMECURRENT</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">9</span>" <span class="keyword">goto</span> GTFILESNAMECURRENT</span><br><span class="line"><span class="keyword">if</span> /i "<span class="variable">%GTOperator%</span>"=="<span class="number">0</span>" <span class="keyword">goto</span> GTBegin</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> 输入正确的操作编号</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTDIRFILEPATH</span><br><span class="line"><span class="built_in">set</span> ListFileName=所有目录和文件路径</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /s "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>a &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTDIRPATH</span><br><span class="line"><span class="built_in">set</span> ListFileName=所有目录</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b /s "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>a &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTFILEPATHCUSTOMFORMAT</span><br><span class="line">@ set /p FileExtension="文件扩展名(*.jpg/*.gif/*.png/*.mp4/*.mp3/*.exe/*.txt …):"</span><br><span class="line"><span class="built_in">set</span> ListFileName=指定格式的文件路径</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /s "<span class="variable">%HandleDir%</span>"<span class="variable">%FileExtension%</span>') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>a &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTDIRFILENAME</span><br><span class="line"><span class="built_in">set</span> ListFileName=所有目录和文件名</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /b /s "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>nxa &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTDIRNAME</span><br><span class="line"><span class="built_in">set</span> ListFileName=所有目录名</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b /s "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>nxa &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTFILESNAME</span><br><span class="line"><span class="built_in">set</span> ListFileName=所有文件名</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b /s "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>nxa &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTDIRNAMECURRENT</span><br><span class="line"><span class="built_in">set</span> ListFileName=当前层级目录名</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /ad /b "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>nxa &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTFILESNAMECURRENT</span><br><span class="line"><span class="built_in">set</span> ListFileName=当前层级文件名</span><br><span class="line"><span class="built_in">set</span> LISTFilePath=<span class="variable">%varDir%</span><span class="variable">%ListFileName%</span>-<span class="variable">%varDate%</span>.txt</span><br><span class="line">@<span class="built_in">echo</span> 需要一点时间，请耐心等待...</span><br><span class="line"><span class="keyword">for</span> /f "delims=" <span class="variable">%%a</span><span class="keyword">in</span> ('<span class="built_in">dir</span> /a-d /b "<span class="variable">%HandleDir%</span>"') <span class="keyword">do</span><span class="built_in">echo</span><span class="variable">%%~</span>nxa &gt;&gt; <span class="variable">%LISTFilePath%</span></span><br><span class="line"><span class="keyword">if</span><span class="keyword">not</span><span class="keyword">exist</span><span class="variable">%LISTFilePath%</span><span class="keyword">goto</span> GTNODOC</span><br><span class="line">:: <span class="built_in">echo</span> 完成操作</span><br><span class="line"><span class="built_in">start</span><span class="variable">%LISTFilePath%</span></span><br><span class="line">:: <span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line">:GTNODOC</span><br><span class="line"><span class="built_in">echo</span><span class="variable">%CurrentDir%</span> 没有相关目录或文档！</span><br><span class="line"><span class="built_in">pause</span> &gt;<span class="built_in">nul</span></span><br><span class="line"><span class="keyword">goto</span> GTCONTINUE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">:GTExit</span><br><span class="line"><span class="keyword">exit</span></span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>批处理笔记(1) - 基础</title>
    <link href="/tech/batch-in-action-1-preface.html"/>
    <url>/tech/batch-in-action-1-preface.html</url>
    <content type="html">
      <![CDATA[<p>本系列笔记是我在Windows平台上，多年工作和生活中积累下来的批处理相关技术点。</p><p>UPDATE: 2018-12-18 :</p><ul><li>不建议写基于 Windows CMD 的 Batch file，系统切换语言后，字符编码是最大的问题，并且，功能过于基础，组装成应用比较麻烦；</li><li>建议安装 Git 客户端，写基于 Bash 的脚本，适用性更强；或者 PowerShell 。</li></ul><a id="more"></a><p>批处理，维基上是这么定义的：“在DOS、OS/2、微软视窗系统中，是一种用来当成脚本语言运作程序的文件。它本身是文本文件，其中包含了一系列让具备命令行界面的解释器读取并运行的指令。它相当于是类Unix系统下的Shell script。文件扩展名为<code>.bat</code>或<code>.cmd</code>，Shell程序逐行运行命令”。</p><p>就是在命令行界面(CLI)执行指令，为的就是一个快，省事，偷懒，不依赖其它软件。</p><p>Windows 10,8,7，Vista和XP中的命令称为‘CMD命令’或‘命令提示符命令’，而Windows 98/95和MS-DOS中的命令则称为‘DOS命令’。</p><p>本篇讲基础，后面的讲实际实用。</p><p>基础部分扫一两遍，旨在认识，不在熟悉。</p><hr><ul><li><code>.</code>当前目录</li><li><code>..</code>上一层目录</li><li><code>\</code>根目录</li></ul><hr><ul><li>文件及目录路径：使用反斜杠<code>\</code>，不使用正斜杠<code>/</code></li><li>文件及目录路径：存在空格，使用双引号包裹路径</li><li>不可用于文件目录名的字符：<code>\ / : * ? &quot; &lt; &gt; |</code></li><li>需双引号包裹的字符：<code>( ) [ ] { } ^ = ; ! ‘ + , ` ~ &amp; 空格</code></li><li>转义字符<code>^</code></li><li>需要转义的字符：<code>^</code>、<code>&lt;</code>、<code>&gt;</code>、<code>|</code>、<code>&amp;</code></li><li><code>%%</code>自己可以转义自己</li><li><code>rem</code>(回显)和<code>::</code>(不回显)注释语句</li><li><code>@</code>隐藏命令的回显</li><li><code>echo</code>不显示命令本身，只显示执行后结果</li><li><code>pause &gt;nul</code> 暂停，隐藏pause显示的信息</li></ul><hr><h4 id="常用DOS命令"><a href="#常用DOS命令" class="headerlink" title="常用DOS命令"></a>常用DOS命令</h4><ul><li><code>command /?</code> 查看command命令帮助说明</li><li><code>cd/chdir /d [drive:][path]</code></li><li><code>md/mkdir [drive:][path]</code></li><li><code>rd/rmdir [/s] [/q] [drive:]path</code>  删除子目录树/安静模式</li><li><code>copy /?</code></li><li><code>ren/rename /?</code></li><li><code>move /?</code></li><li><code>del/erase /?</code></li><li><code>attrib /?</code></li><li><code>tree /?</code></li><li><code>dir /?</code></li><li><code>find /?</code></li><li><code>findstr /?</code></li><li><code>sort /?</code></li><li><code>xcopy /?</code></li><li><code>type /?</code></li><li><code>more</code> 逐屏显示输出</li><li><code>set</code> 显示、设置或删除 cmd.exe 环境变量。<code>/p</code> 用户输入，<code>/a</code> 数学运算</li></ul><p><strong>建议CMD <code>cd</code>到桌面以<code>help &gt;&gt; cli_help.txt</code>、<code>cd /? &gt;&gt; cd_help.txt</code>这类方式深入查阅相关命令说明。</strong></p><hr><h4 id="if-else-语句"><a href="#if-else-语句" class="headerlink" title="if/else 语句"></a><code>if/else</code> 语句</h4><ul><li><code>if exist</code>判断驱动器、文件或文件夹是否存在</li><li><code>if &quot;字符串1&quot;==&quot;字符串2&quot;</code> 判断某两个字符串是否相等</li><li><code>if defined str</code> 判断某个变量是否已经被赋值</li><li><code>if 数值1 equ 数值2</code> 判断某两个数值是否相等<pre><code>+ `equ`， equal+ `gtr`， greater than+ `geq`， greater than or equal+ `lss`， less than+ `leq`， less than or equal+ `neq`， no equal</code></pre></li></ul><h4 id="for-语句"><a href="#for-语句" class="headerlink" title="for 语句"></a><code>for</code> 语句</h4><p><code>for %variable in(set) do command [command-parameters]</code></p><ul><li><p>遍历目录（directory）<br><code>for /D %variable in(set) DO command [command-parameters]</code><br>如果集中包含通配符，则指定与目录名匹配，而不与文件名匹配。</p></li><li><p>递归遍历<br><code>for /R [[drive:]path] %variable IN (set) DO command [command-parameters]</code><br>检查以 [drive:]path 为根的目录树，指向每个目录中的 FOR 语句。如果在 /R 后没有指定目录规范，则使用当前目录。如果集仅为一个单点(.)字符，则枚举该目录树。</p></li><li><p>计数循环<br><code>for /L %variable IN (start,step,end) DO command [command-parameters]</code><br>该集表示以增量形式从开始到结束的一个数字序列。<br>(1,1,5)将产生序列1 2 3 4 5，<br>(5,-1,1)将产生序列5 4 3 2 1.</p></li><li><p><code>for /F</code></p><ul><li><code>for /F [&quot;options&quot;] %variable IN (file-set文件名) DO command [command-parameters]</code></li><li><code>for /F [&quot;options&quot;] %variable IN (&quot;string&quot;字符串) DO command [command-parameters]</code></li><li><code>for /F [&quot;options&quot;] %variable IN (&#39;command&#39;命令语句) DO command [command-parameters]</code></li></ul></li></ul><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- "options"（delims、tokens、skip、eol、userbackq、变量延迟）</span><br><span class="line">解析文本，读取字符串，</span><br><span class="line">eol=str           - 忽略以指定字符打头的行（默认忽略以分号打头的行的功能，因为以分号打头的行在很多语言中都是作为注释语句）</span><br><span class="line">skip=n          - 跳过无关内容，直奔主题</span><br><span class="line">delims=符号列表      - 切分字符串的利器，默认以空格和Tab作分割符</span><br><span class="line">tokens=x,y,m-n  - 定点提取</span><br><span class="line"></span><br><span class="line">     %~I          - 删除任何引号(")，扩展 %I(形式变量)</span><br><span class="line">     %~fI        - 将 %I 扩展到一个完全合格的路径名</span><br><span class="line">     %~dI        - 仅将 %I 扩展到一个驱动器号</span><br><span class="line">     %~pI        - 仅将 %I 扩展到一个路径</span><br><span class="line">     %~nI        - 仅将 %I 扩展到一个文件名</span><br><span class="line">     %~xI        - 仅将 %I 扩展到一个文件扩展名</span><br><span class="line">     %~sI        - 扩展的路径只含有短名</span><br><span class="line">     %~aI        - 将 %I 扩展到文件的文件属性</span><br><span class="line">     %~tI        - 将 %I 扩展到文件的日期/时间</span><br><span class="line">     %~zI        - 将 %I 扩展到文件的大小</span><br><span class="line">     %~$<span class="built_in">PATH</span>:I   - 查找列在路径环境变量的目录，并将 %I 扩展</span><br><span class="line">                   到找到的第一个完全合格的名称。如果环境变量名</span><br><span class="line">                   未被定义，或者没有找到文件，此组合键会扩展到</span><br><span class="line">                   空字符串</span><br><span class="line"></span><br><span class="line">可以组合修饰符来得到多重结果:</span><br><span class="line"></span><br><span class="line">     %~dpI       - 仅将 %I 扩展到一个驱动器号和路径</span><br><span class="line">     %~nxI       - 仅将 %I 扩展到一个文件名和扩展名</span><br><span class="line">     %~fsI       - 仅将 %I 扩展到一个带有短名的完整路径名</span><br><span class="line">     %~dp$<span class="built_in">PATH</span>:I - 搜索列在路径环境变量的目录，并将 %I 扩展</span><br><span class="line">                   到找到的第一个驱动器号和路径。</span><br><span class="line">     %~ftzaI     - 将 %I 扩展到类似输出线路的 <span class="built_in">DIR</span></span><br></pre></td></tr></table></figure><ul><li><code>usebackq</code>，增强型参数</li></ul><p>原来的for语句中第一个括号内的写法要做如下变动：</p><ul><li>如果第一个括号里的对象是<strong>一条命令语句</strong>，原来的单引号<code>&#39;</code>要改为后引号<code>`</code>；</li><li>如果第一个括号里的对象是<strong>字符串</strong>，原来的双引号<code>&quot;</code>要改为单引号<code>&#39;</code>；</li><li>如果第一个括号里的对象是<strong>文件名</strong>，要用双引号<code>&quot;</code>括起来。</li></ul><p><code>for</code> 语句不能直接读取Unicode编码的文本，需要借助<code>type</code>或<code>more</code></p><hr><h4 id="预处理机制"><a href="#预处理机制" class="headerlink" title="预处理机制"></a>预处理机制</h4><p>逐条，命令关键字，运算符，开关、参数，变量引用…</p><p>所有的变量引用都已被替换成字符串常量，变量值在复合语句内部被改变，不会影响到语句内部的其他任何地方。</p><h4 id="延迟变量的扩展行为"><a href="#延迟变量的扩展行为" class="headerlink" title="延迟变量的扩展行为"></a>延迟变量的扩展行为</h4><p>在适当位置使用 <code>SetLocal EnableDelayedExpansion</code> 语句，把原本使用<strong>百分号对</strong>闭合的变量引用改为使用<strong>感叹号对</strong>来闭合</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">SetLocal EnableDelayedExpansion</span><br><span class="line">set num=0&amp;&amp;echo !num!</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>在适当的位置使用 <code>call</code> 语句，把变量引用的<strong>单层百分号对</strong>改为<strong>双层百分号对</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set num=0&amp;&amp;call echo %%num%%</span><br><span class="line">pause</span><br></pre></td></tr></table></figure><p>为什么要使用变量延迟？因为要让复合语句内部的变量实时感知到变量值的变化。</p><p>复合语句有：<code>for</code> 语句、<code>if</code><code>else</code> 语句、用连接符<code>&amp;</code>、<code>||</code>和<code>&amp;&amp;</code>连接的语句、用管道符号<code>|</code>连接的语句，以及用<code>括号</code>括起来的、由多条语句组合而成的语句块。</p><hr><h4 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h4><ul><li><p><code>@</code>，隐藏命令的回显</p></li><li><p><code>~</code></p><ul><li>在<code>for</code>中表示使用增强的变量扩展</li><li>在<code>set</code>中表示使用扩展环境变量指定位置的字符串</li><li>在<code>set /a</code>中表示按位取反</li></ul></li><li><p><code>^</code></p><ul><li>取消特殊字符作用，字符转义；</li><li><code>echo</code>输出时，可以将<code>^</code>后的下一行的字符串拼接在当前行后输出</li><li>在<code>set /a</code>中是按位异；</li><li>在<code>findstr /r</code>的<code>[]</code>中表示不匹配指定的字符集</li></ul></li><li><p><code>&amp;</code></p><ul><li>命令连接字符，顺序执行多条命令，不论命令是否执行成功</li><li>在<code>set /a</code>中是按位与</li></ul></li><li><p><code>|</code></p><ul><li>管道符，就是将上一个命令的输出，作为下一个命令的输入;传输执行结果</li><li>在帮助文档中表示其前后两个开关、选项或参数是二选一的</li><li>在<code>set /a</code>中是按位或</li></ul></li><li><p><code>&amp;&amp;</code>，连接两个命令，<code>&amp;&amp;</code>前命令执行成功，则执行<code>&amp;&amp;</code>后命令；传输执行状态</p></li><li><p><code>||</code>，连接两个命令，<code>||</code>前命令执行失败，则执行<code>||</code>后命令。传输执行状态</p></li><li><p><code>()</code>，命令包含或者是具有优先权的界定符</p></li><li><p><code>[]</code></p><ul><li>在帮助文档表示其中的开关、选项或参数是可选的</li><li>在<code>findstr /r</code>中表示按其中指定的字符集匹配</li></ul></li><li><p><code>+</code></p><ul><li><code>copy</code>将很多个文件合并为一个文件</li><li>在<code>set /a</code>中是加法</li></ul></li><li><p><code>-</code></p><ul><li>范围表示符，如日期的查找，<code>for</code>命令里的<code>tokens</code>操作中就可以用到这个字符</li><li>在<code>findstr /r</code>中连接两个字符表示匹配范围；</li><li><code>-</code>跟在命令的<code>/</code>后表示取反向的开关。</li></ul></li><li><p><code>*</code></p><ul><li>通配符，代表任意个任意字符</li><li>在<code>set /a</code>中是乘法</li><li>在<code>findstr /r</code>中表示将前一个字符多次匹配</li><li><code>findstr</code> 正则表达式中，<code>.</code>代表任意字符，<code>*</code>代表0个或多个，<code>.*</code>表示0个或多个任意字符</li></ul></li><li><p><code>/</code></p><ul><li>表示其后的字符（串）是命令的功能开关（选项）</li><li>在<code>set /a</code>中表示除法</li></ul></li><li><p><code>=</code></p><ul><li>赋值符号，用于变量的赋值</li><li>在<code>set /a</code>中表示算术运算</li></ul></li><li><p><code>:</code>，标签定位符，可以接受<code>goto</code>命令所指向的标签</p></li><li><p><code>&quot; &quot;</code></p><ul><li>界定符，带有空格的路径，一些命令也需要<code>&quot; &quot;</code>符号</li><li>在<code>for /f</code>中将表示它们包含的内容当作字符串分析</li><li>在<code>for /f &quot;usebackq&quot;</code>表示它们包含的内容当作文件路径并分析其文件的内容</li><li>在其它情况下表示其中的内容是一个完整的字符串，其中的<code>&gt;</code>、<code>&gt;&gt;</code>、<code>&lt;</code>、<code>&amp;</code>、<code>|</code>、空格等不再转义</li></ul></li><li><p><code>&gt;</code></p><ul><li>命令重定向符，覆盖方式重定向提示信息</li><li>在<code>findstr /r</code>中表示匹配单词的右边界，需要配合转义字符<code>\</code>使用</li></ul></li><li><p><code>&gt;&gt;</code>，命令重定向符，追加方式重定向提示信息</p></li><li><p><code>&lt;</code></p><ul><li>将其后面的文件的内容作为其前面命令的输入</li><li>在<code>findstr /r</code>中表示匹配单词的左边界，需要配合转义字符<code>\</code>使用</li></ul></li><li><p><code>\</code></p><ul><li>当前路径的根目录</li><li>在<code>findstr /r</code>中表示正则转义字符</li></ul></li><li><p><code>&#39; &#39;</code></p><ul><li>在<code>for /f</code>中表示将它们包含的内容当作命令行执行并分析其输出</li><li>在<code>for /f &quot;usebackq&quot;</code>中表示将它们包含的字符串当作字符串分析</li></ul></li><li><p><code>.</code></p><ul><li><code>.</code>当前目录，<code>..</code>上一层目录</li><li>在路径中的文件名中出现时：最后的一个<code>.</code>表示主文件名与扩展文件名的分隔</li></ul></li><li><p><code>$</code>，在<code>findstr</code>命令里面表示一行的结束</p></li><li><p><code>``</code>，在<code>for /f</code>中表示它们所包含的内容当作命令行执行并分析它的输出</p></li><li><p><code>?</code></p><ul><li>在<code>findstr /r</code>中表示在此位置匹配一个任意字符</li><li><code>?</code>在路径中表示在此位置通配任意一个字符</li><li>紧跟在<code>/</code>后表示获取命令的帮助文档</li></ul></li><li><p><code>!</code></p><ul><li>当启用变量延迟时，使用<code>! !</code>将变量名扩起来表示对变量值的引用</li><li>在<code>set /a</code>中表示逻辑非，比如<code>set /a a=!0</code>，这时a就表示逻辑1</li></ul></li><li><p><code>% %</code>，非延迟环境变量引用符号</p></li><li><p><code>,</code>，相当于空格</p></li><li><p><code>;</code>，命令相同的时候，可以将不同的目标用<code>;</code>隔离开来，但执行效果不变。如执行过程中发生错误则只返回错误报告但程序还是会继续执行。</p></li></ul><p><code>&quot;\&gt;&quot;</code>、<code>&quot;\&lt;&quot;</code>、<code>&quot;\@&quot;</code>、<code>&quot;\|&quot;</code>不能实现自己想要的功能，将特殊字符替换成ASCII表中的十进制数，然后再把ASCII的10进制数换算成ASCII字符处理。</p><hr><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p><code>set varName=varValue</code></p><p><code>set /p var=请输入变量的值：</code>，等待用户输入到<code>var</code>变量中</p><p><code>set /p= hello world! &lt;nul</code></p><p><code>set /a</code> 运算表达式</p><hr><h4 id="内部处理变量"><a href="#内部处理变量" class="headerlink" title="内部处理变量"></a>内部处理变量</h4><p><code>if defined</code>和<code>set /a</code>因为都是在内部处理变量，而不是在预处理过程中处理，也就是说不需要使用变量扩展标记，所以天然具有变量延迟的特性；</p><p>至于逗号表达式，这是<code>set /a</code>才能处理的特性；</p><p>cmd的预处理过程，是把两个表达式理解为一句，而不是一个语句块，所以自然不可能延迟扩展变量。</p><hr><p><a href="https://commandwindows.com/command3.htm" target="_blank" rel="noopener">Windows Command Line |Shell List and Reference</a></p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> batch </tag>
    </tags>
  </entry>
  <entry>
    <title>《Web重构笔记》系列归档</title>
    <link href="/tech/pro-web-reconstruction.html"/>
    <url>/tech/pro-web-reconstruction.html</url>
    <content type="html">
      <![CDATA[<p>《Web重构笔记》系列归档</p><ul><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-1-preface.html">Web重构笔记(1): 为什么要写这个系列</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-2-getting-started.html">Web重构笔记(2): 来套Web重构装备</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-3-forecast.html">Web重构笔记(3): Web重构前的分析</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-4-generate-assets.html">Web重构笔记(4): 切图与标注</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-5-architecture.html">Web重构笔记(5): 搭建工程目录</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-6-semantics.html">Web重构笔记(6): 语义化</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-7-decoupling.html">Web重构笔记(7): 样式、结构、行为分离分割</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-8-tree-trunk.html">Web重构笔记(8): 主干结构</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-9-grid-layout.html">Web重构笔记(9): 栅格结构</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-10-component.html">Web重构笔记(10): 组件结构</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-11-css-pre-processors-and-declaration.html">Web重构笔记(11): 样式预处理与样式声明</a></li><li><a href="https://xinlu.ink/tech/pro-web-reconstruction-12-summary.html">Web重构笔记(12): 最后</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(12): 最后</title>
    <link href="/tech/pro-web-reconstruction-12-summary.html"/>
    <url>/tech/pro-web-reconstruction-12-summary.html</url>
    <content type="html">
      <![CDATA[<p>每篇写完，删了又删，只想再简单点、再少点，希望能快速看完，并能产生共鸣。</p><p>Web重构，选择好基础的框架/库、模块组件，合理分布静态资源，处理好标签和属性语义，基于OOP分离分割各代码，注意样式声明方式，页面结构必能合理，性能必能得到提升，可复用性、可伸缩性、可维护性显然得到实现，各种优点和好处，都是前期统筹和规范操作带来的，让优良之处成为一种习惯，而不是刻意为之。</p><a id="more"></a><p>毕竟最后的结果确定工作的成败，开发方式根据项目周期、团队技能现状，采用“渐进增强”、“优雅降级”方式开发，对于低版本客户端不支持的，能传递基本信息即可，没必要受兼容性的束缚。</p><p>最后，“不应当急于求成，应当去熟悉自己的研究对象，锲而不舍，时间会成全一切。凡事开始最难；然而更难的是何以善终”。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(11): 样式预处理与样式声明</title>
    <link href="/tech/pro-web-reconstruction-11-css-pre-processors-and-declaration.html"/>
    <url>/tech/pro-web-reconstruction-11-css-pre-processors-and-declaration.html</url>
    <content type="html">
      <![CDATA[<h4 id="样式预处理"><a href="#样式预处理" class="headerlink" title="样式预处理"></a>样式预处理</h4><p>样式最基本的语法(Syntax)是 <code>Selectors { Properties:Values }</code>，就是一个声明(Declaration)，告诉排版引擎：将我声明的选择器(Selectors)，按我的呈现规则(Rules)来渲染。</p><a id="more"></a><p>面向设计稿书写完样式，日常最基本需求：如颜色或内外间距要修改、公用部分样式、层级嵌套选择器书写、组件化样式分割然后合并、兼容性前缀…，都是要手动一条条修改添加；高级点的需求，如颜色计算、数学计算、条件执行、循环处理，要么借助第三方工具手动操作，要么无解。</p><p>因此，我们需要一个样式“工程化”的解决方案，因此，CSS预处理来了，它提供了编程语言中基本语法和函数接口等一般编程所需的抽象机制，可以“编译”打包成符合CSS标准的样式文件，这样逻辑化、程序化CSS代码，好重用、好维护、好扩展。另外还有<a href="http://postcss.org/" target="_blank" rel="noopener">PostCSS</a>这类CSS后处理实现。区别在于预处理器需要先按特定的语法和逻辑规则书写代码，然后进行编译，后处理器是直接操作CSS源代码进行解析编译。</p><p>CSS预处理目前实现有<a href="http://sass-lang.com" target="_blank" rel="noopener">Sass</a>、<a href="http://lesscss.org" target="_blank" rel="noopener">Less</a>、<a href="http://stylus-lang.com" target="_blank" rel="noopener">Stylus</a>；</p><p>它们大多具有“变量(Variables)嵌套(Nesting)、混合(Mixins)、扩展(Extends)、色彩函数(Color Operations)、循环(Loops)、Math、导入(Imports)、流程控制声明(if/else/for/each/while)、运算符”等编程语言风格的语法和功能，使用场景、需求方案上都差不多，拥护群体都多；</p><p>熟悉一种，切换到另一种也不是难事，最终都是要结合中大型项目和打包才能发挥其作用；</p><p>如果有用到像<code>jade</code>这种缩进式风格模板引擎(Template Engine)的，就选<code>Sass</code>或<code>Stylus</code>，接近CSS语法的就选<code>Less</code>、<code>Scss</code>；</p><p>建议参考<a href="https://github.com/twbs/bootstrap/tree/v4-dev/scss" target="_blank" rel="noopener">Bootstrap</a>和<a href="https://github.com/Tencent/weui/tree/master/src/style" target="_blank" rel="noopener">WeUI</a>源码。</p><p>预处理只是囿于当前标准规范在技术方案上的权宜之计，随着需求，必定会有标准规范和更先进的技术方案诞生(适用于其它方面)，可以关注<a href="http://cssnext.io/" target="_blank" rel="noopener">cssnext</a>了解CSS Features。</p><h4 id="样式声明"><a href="#样式声明" class="headerlink" title="样式声明"></a>样式声明</h4><p>遵循选定的规范，不用标签选择器、全局选择器，不用<code>!important</code>。</p><p>书写样式，建议采用<a href="https://docs.emmet.io/" target="_blank" rel="noopener">Emmet</a>方案，快。</p><p>建议按以下顺序声明样式，便于维护：</p><ul><li>影响文档流的属性</li><li>盒模型的属性</li><li>排版属性</li><li>背景装饰属性</li><li>生成内容属性</li><li>其它CSS3属性(兼容性前缀由<a href="https://github.com/postcss/autoprefixer" target="_blank" rel="noopener">autoprefixer</a>打包添加)</li></ul><p>盒模型方位顺序：上、右、下、左；</p><p>不建议按属性首字母顺序声明样式，如<code>position: absolute;</code>中的<code>top</code>/<code>right</code>/<code>bottom</code>/<code>left</code>定位声明，还有<code>width</code>/<code>height</code>的声明，中间会有其它属性间隔，不能便捷的添加和修改。</p><p>参考：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* # 样式声明顺序 */</span></span><br><span class="line"><span class="selector-tag">selector</span> &#123;</span><br><span class="line"><span class="comment">/* ## 布局 / Layout */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### 显示、定位 / Display, Position */</span></span><br><span class="line"><span class="attribute">display</span>: ;</span><br><span class="line"><span class="attribute">visibility</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">float</span>: ;</span><br><span class="line"><span class="attribute">clear</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">position</span>: ;</span><br><span class="line"><span class="attribute">top</span>: ;</span><br><span class="line"><span class="attribute">right</span>: ;</span><br><span class="line"><span class="attribute">bottom</span>: ;</span><br><span class="line"><span class="attribute">left</span>: ;</span><br><span class="line"><span class="attribute">z-index</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Flex */</span></span><br><span class="line"><span class="attribute">flex-direction</span>: ;</span><br><span class="line"><span class="attribute">flex-wrap</span>: ;</span><br><span class="line"><span class="attribute">flex-flow</span>: ;</span><br><span class="line"><span class="attribute">justify-content</span>: ;</span><br><span class="line"><span class="attribute">align-items</span>: ;</span><br><span class="line"><span class="attribute">align-content</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">flex-grow</span>: ;</span><br><span class="line"><span class="attribute">flex-shrink</span>: ;</span><br><span class="line"><span class="attribute">flex-basis</span>: ;</span><br><span class="line"><span class="attribute">flex</span>: ;</span><br><span class="line"><span class="attribute">align-self</span>: ;</span><br><span class="line"><span class="attribute">order</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Grid */</span></span><br><span class="line"><span class="attribute">grid</span>: ;</span><br><span class="line"><span class="attribute">grid-area</span>: ;</span><br><span class="line"><span class="attribute">grid-template</span>: ;</span><br><span class="line"><span class="attribute">grid-template-areas</span>: ;</span><br><span class="line"><span class="attribute">grid-template-rows</span>: ;</span><br><span class="line"><span class="attribute">grid-template-columns</span>: ;</span><br><span class="line"><span class="attribute">grid-column</span>: ;</span><br><span class="line"><span class="attribute">grid-column-start</span>: ;</span><br><span class="line"><span class="attribute">grid-column-end</span>: ;</span><br><span class="line"><span class="attribute">grid-row</span>: ;</span><br><span class="line"><span class="attribute">grid-row-start</span>: ;</span><br><span class="line"><span class="attribute">grid-row-end</span>: ;</span><br><span class="line"><span class="attribute">grid-auto-rows</span>: ;</span><br><span class="line"><span class="attribute">grid-auto-columns</span>: ;</span><br><span class="line"><span class="attribute">grid-auto-flow</span>: ;</span><br><span class="line"><span class="attribute">grid-gap</span>: ;</span><br><span class="line"><span class="attribute">grid-row-gap</span>: ;</span><br><span class="line"><span class="attribute">grid-column-gap</span>: ;</span><br><span class="line"><span class="attribute">justify-items</span>: ;</span><br><span class="line"><span class="attribute">align-items</span>: ;</span><br><span class="line"><span class="attribute">place-items</span>: ;</span><br><span class="line"><span class="attribute">justify-self</span>: ;</span><br><span class="line"><span class="attribute">align-self</span>: ;</span><br><span class="line"><span class="attribute">place-self</span>: ;</span><br><span class="line"><span class="attribute">justify-content</span>: ;</span><br><span class="line"><span class="attribute">align-content</span>: ;</span><br><span class="line"><span class="attribute">place-content</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Columns */</span></span><br><span class="line"><span class="attribute">columns</span>: ;</span><br><span class="line"><span class="attribute">column-gap</span>: ;</span><br><span class="line"><span class="attribute">column-fill</span>: ;</span><br><span class="line"><span class="attribute">column-rule</span>: ;</span><br><span class="line"><span class="attribute">column-rule-width</span>: ;</span><br><span class="line"><span class="attribute">column-rule-style</span>: ;</span><br><span class="line"><span class="attribute">column-rule-color</span>: ;</span><br><span class="line"><span class="attribute">column-span</span>: ;</span><br><span class="line"><span class="attribute">column-count</span>: ;</span><br><span class="line"><span class="attribute">column-width</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ## 盒模型 / Box */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Box */</span></span><br><span class="line"><span class="attribute">box-sizing</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">width</span>: ;</span><br><span class="line"><span class="attribute">min-width</span>: ;</span><br><span class="line"><span class="attribute">max-width</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">height</span>: ;</span><br><span class="line"><span class="attribute">min-height</span>: ;</span><br><span class="line"><span class="attribute">max-height</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">margin</span>: ;</span><br><span class="line"><span class="attribute">margin-top</span>: ;</span><br><span class="line"><span class="attribute">margin-right</span>: ;</span><br><span class="line"><span class="attribute">margin-bottom</span>: ;</span><br><span class="line"><span class="attribute">margin-left</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">padding</span>: ;</span><br><span class="line"><span class="attribute">padding-top</span>: ;</span><br><span class="line"><span class="attribute">padding-right</span>: ;</span><br><span class="line"><span class="attribute">padding-bottom</span>: ;</span><br><span class="line"><span class="attribute">padding-left</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">overflow</span>: ;</span><br><span class="line"><span class="attribute">overflow-x</span>: ;</span><br><span class="line"><span class="attribute">overflow-y</span>: ;</span><br><span class="line"><span class="attribute">resize</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Border */</span></span><br><span class="line"><span class="attribute">border</span>: ;</span><br><span class="line"><span class="attribute">border-top</span>: ;</span><br><span class="line"><span class="attribute">border-right</span>: ;</span><br><span class="line"><span class="attribute">border-bottom</span>: ;</span><br><span class="line"><span class="attribute">border-left</span>: ;</span><br><span class="line"><span class="attribute">border-width</span>: ;</span><br><span class="line"><span class="attribute">border-top-width</span>: ;</span><br><span class="line"><span class="attribute">border-right-width</span>: ;</span><br><span class="line"><span class="attribute">border-bottom-width</span>: ;</span><br><span class="line"><span class="attribute">border-left-width</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border-style</span>: ;</span><br><span class="line"><span class="attribute">border-top-style</span>: ;</span><br><span class="line"><span class="attribute">border-right-style</span>: ;</span><br><span class="line"><span class="attribute">border-bottom-style</span>: ;</span><br><span class="line"><span class="attribute">border-left-style</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border-radius</span>: ;</span><br><span class="line"><span class="attribute">border-top-left-radius</span>: ;</span><br><span class="line"><span class="attribute">border-top-right-radius</span>: ;</span><br><span class="line"><span class="attribute">border-bottom-left-radius</span>: ;</span><br><span class="line"><span class="attribute">border-bottom-right-radius</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">border-color</span>: ;</span><br><span class="line"><span class="attribute">border-top-color</span>: ;</span><br><span class="line"><span class="attribute">border-right-color</span>: ;</span><br><span class="line"><span class="attribute">border-bottom-color</span>: ;</span><br><span class="line"><span class="attribute">border-left-color</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">outline</span>: ;</span><br><span class="line"><span class="attribute">outline-color</span>: ;</span><br><span class="line"><span class="attribute">outline-offset</span>: ;</span><br><span class="line"><span class="attribute">outline-style</span>: ;</span><br><span class="line"><span class="attribute">outline-width</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ## 背景装饰，文字排版 / Backgrounds, Fonts */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### box-shadow */</span></span><br><span class="line"><span class="attribute">box-shadow</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Background */</span></span><br><span class="line"><span class="attribute">background</span>: ;</span><br><span class="line"><span class="attribute">background-attachment</span>: ;</span><br><span class="line"><span class="attribute">background-clip</span>: ;</span><br><span class="line"><span class="attribute">background-color</span>: ;</span><br><span class="line"><span class="attribute">background-image</span>: ;</span><br><span class="line"><span class="attribute">background-repeat</span>: ;</span><br><span class="line"><span class="attribute">background-position</span>: ;</span><br><span class="line"><span class="attribute">background-size</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Text */</span></span><br><span class="line"><span class="attribute">color</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">font</span>: ;</span><br><span class="line"><span class="attribute">font-family</span>: ;</span><br><span class="line"><span class="attribute">font-size</span>: ;</span><br><span class="line"><span class="attribute">font-smoothing</span>: ;</span><br><span class="line"><span class="attribute">font-style</span>: ;</span><br><span class="line"><span class="attribute">font-variant</span>: ;</span><br><span class="line"><span class="attribute">font-weight</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">letter-spacing</span>: ;</span><br><span class="line"><span class="attribute">line-height</span>: ;</span><br><span class="line"><span class="attribute">list-style</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">text-align</span>: ;</span><br><span class="line"><span class="attribute">text-decoration</span>: ;</span><br><span class="line"><span class="attribute">text-indent</span>: ;</span><br><span class="line"><span class="attribute">text-overflow</span>: ;</span><br><span class="line"><span class="attribute">text-rendering</span>: ;</span><br><span class="line"><span class="attribute">text-shadow</span>: ;</span><br><span class="line"><span class="attribute">text-transform</span>: ;</span><br><span class="line"><span class="attribute">text-wrap</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="attribute">white-space</span>: ;</span><br><span class="line"><span class="attribute">word-spacing</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ## CSS3 动画 / Animation */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Transform */</span></span><br><span class="line"><span class="attribute">backface-visibility</span>: ;</span><br><span class="line"><span class="attribute">perspective</span>: ;</span><br><span class="line"><span class="attribute">perspective-origin</span>: ;</span><br><span class="line"><span class="attribute">transform</span>: ;</span><br><span class="line"><span class="attribute">transform-box</span>: ;</span><br><span class="line"><span class="attribute">transform-origin</span>: ;</span><br><span class="line"><span class="attribute">transform-style</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Transition */</span></span><br><span class="line"><span class="attribute">transition</span>: ;</span><br><span class="line"><span class="attribute">transition-delay</span>: ;</span><br><span class="line"><span class="attribute">transition-duration</span>: ;</span><br><span class="line"><span class="attribute">transition-property</span>: ;</span><br><span class="line"><span class="attribute">transition-timing-function</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ### Animation */</span></span><br><span class="line"><span class="attribute">animation</span>: ;</span><br><span class="line"><span class="attribute">animation-name</span>: ;</span><br><span class="line"><span class="attribute">animation-delay</span>: ;</span><br><span class="line"><span class="attribute">animation-duration</span>: ;</span><br><span class="line"><span class="attribute">animation-iteration-count</span>: ;</span><br><span class="line"><span class="attribute">animation-play-state</span>: ;</span><br><span class="line"><span class="attribute">animation-timing-function</span>: ;</span><br><span class="line"><span class="attribute">animation-fill-mode</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ## 表格 / Table */</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">table-layout</span>: ;</span><br><span class="line"><span class="attribute">border-collapse</span>: ;</span><br><span class="line"><span class="attribute">border-spacing</span>: ;</span><br><span class="line"><span class="attribute">caption-side</span>: ;</span><br><span class="line"><span class="attribute">empty-cells</span>: ;</span><br><span class="line"><span class="attribute">vertical-align</span>: ;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ## 其它 / Other */</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">content</span>: ;</span><br><span class="line"><span class="attribute">quotes</span>: ;</span><br><span class="line"><span class="attribute">cursor</span>: ;</span><br><span class="line"><span class="attribute">opacity</span>: ;</span><br><span class="line"><span class="attribute">speak</span>: ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><hr><p>扩展阅读：</p><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Introduction_to_CSS/Selectors" target="_blank" rel="noopener">MDN: CSS介绍 - 选择器</a></li><li><a href="https://htmlmag.com/article/an-introduction-to-css-preprocessors-sass-less-stylus" target="_blank" rel="noopener">An Introduction to CSS Pre-Processors: SASS, LESS and Stylus</a></li><li><a href="https://webdesign.tutsplus.com/tutorials/using-postcss-together-with-sass-stylus-or-less--cms-24591" target="_blank" rel="noopener">Using PostCSS Together with Sass, Stylus, or LESS</a></li><li><a href="https://ey-intuitive.com/we-see/blog-post/css-preprocessors-compared-less-vs-sass-vs-stylus/" target="_blank" rel="noopener">CSS preprocessors compared: Less vs. Sass vs. Stylus - EY-Intuitive</a></li><li><a href="https://stackshare.io/stackups/less-vs-postcss-vs-sass" target="_blank" rel="noopener">Sass vs Less vs PostCSS 2018 Comparison | StackShare</a></li><li><a href="https://csspre.com/compare/" target="_blank" rel="noopener">Compare ◩ CSS PREprocessors</a></li><li><a href="http://www.yinwang.org/blog-cn/2017/05/25/dsl" target="_blank" rel="noopener">DSL</a></li><li><a href="https://zhuanlan.zhihu.com/p/22824177" target="_blank" rel="noopener">谈谈DSL以及DSL的应用</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(10): 组件结构</title>
    <link href="/tech/pro-web-reconstruction-10-component.html"/>
    <url>/tech/pro-web-reconstruction-10-component.html</url>
    <content type="html">
      <![CDATA[<p>主干和栅格是文档的骨骼，内容依赖组件进行呈现。</p><p>组件，主要是围绕交互体验对文字、图片、视频、表单等数据信息进行排版设计，以提供可复用、好维护、识别度统一规范的视觉呈现。</p><a id="more"></a><p><img src="/assets/pro-web-reconstruction-component.png" alt=""></p><p>框架中会提供丰富的组件，便于快捷开发功能型网页应用；展示型网页建议开发者平时多积累一些常用图文视频组件。</p><p>通过<code>module</code>包裹组件，并设置各组件上下间距。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"module"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span><span class="attr">class</span>=<span class="string">"module__header"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span><span class="attr">class</span>=<span class="string">"module__title"</span>&gt;</span>模块标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span><span class="attr">class</span>=<span class="string">"module__container"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Component --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span><span class="attr">class</span>=<span class="string">"module__footer"</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如按钮结构：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span><span class="attr">class</span>=<span class="string">"btn btn-default"</span><span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span><span class="attr">class</span>=<span class="string">"btn btn-primary btn_large"</span><span class="attr">type</span>=<span class="string">"button"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如选项卡组件结构：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"tab"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span><span class="attr">class</span>=<span class="string">"tab__nav"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span><span class="attr">class</span>=<span class="string">"tab__trigger tab__trigger_active"</span>&gt;</span>trigger 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span><span class="attr">class</span>=<span class="string">"tab__trigger"</span>&gt;</span>trigger 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span><span class="attr">class</span>=<span class="string">"tab__trigger"</span>&gt;</span>trigger 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"tab__panel"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"tab__container tab__container_active"</span>&gt;</span>container 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"tab__container"</span>&gt;</span>container 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"tab__container"</span>&gt;</span>container 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如手风琴结构：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__panel accordion__panel_active"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__header"</span>&gt;</span>header 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__container"</span>&gt;</span>container 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__panel"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__header"</span>&gt;</span>header 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__container"</span>&gt;</span>container 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__panel"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__header"</span>&gt;</span>header 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"accordion__container"</span>&gt;</span>container 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如图文结构：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"media-normal"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"media__object"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span><span class="attr">href</span>=<span class="string">"#"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span><span class="attr">class</span>=<span class="string">"img-responsive"</span><span class="attr">src</span>=<span class="string">"http://placeholder.qiniudn.com/220x132/ff9500/000"</span><span class="attr">alt</span>=<span class="string">"一张配图"</span><span class="attr">width</span>=<span class="string">"width"</span><span class="attr">height</span>=<span class="string">"height"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"media__caption"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span><span class="attr">class</span>=<span class="string">"media__title"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span><span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>一个标题<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"media__abstract"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>一段简要信息<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>组件嵌套层级不要冗余，有条理，结构及命名要有语义。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(9): 栅格结构</title>
    <link href="/tech/pro-web-reconstruction-9-grid-layout.html"/>
    <url>/tech/pro-web-reconstruction-9-grid-layout.html</url>
    <content type="html">
      <![CDATA[<p>页面由几个主干结构支撑和区分，主干结构(Site/Page)内部由多个区块(Section)组成的布局，区块作为弹性布局或定宽布局的钩子，可以实现通栏背景。区块内部则是栅格列(Grid)，格子列里是各模块(Module)和组件(Component)，各模块和组件可有边框、内外边距。</p><a id="more"></a><p>栅格的实现：将区域按比例纵(Column)横(Row)划分成多个单元，各单元间距一致。</p><p>关键的三个数值：Count(栅格划分的个数)、Width/Height(栅格单元尺寸)、Gutter（槽宽/间距）；</p><p>选择了框架和库，会带有网页栅格模块，如<a href="https://getbootstrap.com/docs/3.3/css/#grid" target="_blank" rel="noopener">Bootstrap</a>、<a href="https://yuilibrary.com/yui/docs/cssgrids/" target="_blank" rel="noopener">YUI</a>、<a href="https://ant.design/components/grid/" target="_blank" rel="noopener">Ant Design</a>、<a href="http://element-cn.eleme.io/#/en-US/component/layout" target="_blank" rel="noopener">Element UI</a>、<a href="https://www.iviewui.com/components/grid" target="_blank" rel="noopener">iView</a>；也可以从框架和库中单独抽取栅格部分出来，本篇案例是从<a href="https://purecss.io/grids/" target="_blank" rel="noopener">PureCSS</a>中抽取：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span><span class="attr">class</span>=<span class="string">"section"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"section__wrapper"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"pure-u-3-8"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- module --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"pure-u-5-8"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"gutter"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- module --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure><p>左右间距的实现有两种方案，如果不考虑IE8以下浏览器，可以直接给列选择器声明<code>box-sizing: border-box; padding-right: $grid-gutter-width/2; padding-left: $grid-gutter-width/2;</code>样式属性(要兼容IE8不可给列选择器声明<code>min/max-width/height</code>)；如果要兼容旧浏览器可以采用 <a href="https://github.com/Schepp/box-sizing-polyfill" target="_blank" rel="noopener">polyfill</a> 或在列选择器中再添加一个只用来控制间距的层<code>&lt;div class=&quot;gutter&quot;&gt;&lt;/div&gt;</code>。</p><p>栅格用结构层不设置边框和外边距。</p><p>传统布局方案可以采用<code>float</code>、<code>display: inline-block/table/table-cell</code>、<code>position</code>实现，<br>现代浏览器可用采用进入“候选推荐标准”阶段的<a href="https://www.w3.org/TR/css-flexbox-1/" target="_blank" rel="noopener"><code>flexbox</code></a>布局模型；<br>也可以尝试尚在“首个公开工作草案”阶段的<a href="https://www.w3.org/TR/css-grid-2/" target="_blank" rel="noopener"><code>grid</code></a>布局模型。</p><p>经过主干结构和栅格结构，至此文档大致如下图所示：</p><p><img src="/assets/pro-web-reconstruction-layout.png" alt=""></p><hr><p>扩展阅读：</p><ul><li><a href="https://blog.csdn.net/xianghongai/article/details/8641840" target="_blank" rel="noopener">网页栅格系统研究(1): 960的秘密</a></li><li><a href="https://blog.csdn.net/xianghongai/article/details/8641853" target="_blank" rel="noopener">网页栅格化研究(2): 蛋糕的切法</a></li><li><a href="https://blog.csdn.net/xianghongai/article/details/8641875" target="_blank" rel="noopener">网页栅格系统研究(3): 粒度问题</a></li><li><a href="https://blog.csdn.net/xianghongai/article/details/8641887" target="_blank" rel="noopener">网页栅格系统研究(4)：技术实现</a></li><li><a href="https://css-tricks.com/guides/layout/" target="_blank" rel="noopener">The Different Kinds of CSS Layout - CSS-Tricks</a></li><li><a href="https://blog.csdn.net/xianghongai/article/details/8641916" target="_blank" rel="noopener">渐进增强式布局探讨(上)</a></li><li><a href="https://blog.csdn.net/xianghongai/article/details/8641924" target="_blank" rel="noopener">渐进增强式布局探讨(下)</a></li><li><a href="https://www.w3.org/Consortium/Process/" target="_blank" rel="noopener">W3C Process Document</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(8): 主干结构</title>
    <link href="/tech/pro-web-reconstruction-8-tree-trunk.html"/>
    <url>/tech/pro-web-reconstruction-8-tree-trunk.html</url>
    <content type="html">
      <![CDATA[<p>前面章节方法论，从本章节开始实践。</p><p>布局中的层级关系，主要体现在主干结构、栅格结构、组件模块结构三部分，本篇讲主干结构。</p><p>主干结构按级别分成“站点”和“页面”，即<code>site</code>和<code>page</code>。如电商或门户站点，站点有统一的头尾、悬浮挂件，站点有很多不一样的子站和栏目。</p><a id="more"></a><h4 id="站点主干结构"><a href="#站点主干结构" class="headerlink" title="站点主干结构"></a>站点主干结构</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"site__topbar"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- nav, user info, sign  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span><span class="attr">class</span>=<span class="string">"site__header"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- logo, menu, category, search, cart --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span><span class="attr">class</span>=<span class="string">"site__container"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- page --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span><span class="attr">class</span>=<span class="string">"site__footer"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- service, copyright, beian --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"site__pendant"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- qr, back to top --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="页面主干结构"><a href="#页面主干结构" class="headerlink" title="页面主干结构"></a>页面主干结构</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"page"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span><span class="attr">class</span>=<span class="string">"page__header"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- logo, nav --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span><span class="attr">class</span>=<span class="string">"page__container"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- container --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span><span class="attr">class</span>=<span class="string">"page__footer"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- service, copyright, beian --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">class</span>=<span class="string">"page__pendant"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- qr, back to top --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>class=&quot;site__*&quot; 、class=&quot;page__*&quot;</code> 作为主干结构部分，不声明 <code>border, margin, padding, float</code> 等样式属性，主干结构主要用来表意，做各页面进出切换效果，节假日、做促销活动时可以挂个情景背景。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(7): 样式、结构、行为分离分割</title>
    <link href="/tech/pro-web-reconstruction-7-decoupling.html"/>
    <url>/tech/pro-web-reconstruction-7-decoupling.html</url>
    <content type="html">
      <![CDATA[<p>Web重构工作主要是语义化排版文档信息，排版文档信息的最佳实现就是基于OOP分离分割结构、样式、行为。</p><p>分离分割皆为解耦。</p><p>分离，使HTML、CSS、JavaScript三基石职责清晰，HTML逻辑化内容，CSS视觉呈现，JavaScript承载控制、驱动、交互；</p><p>分割就是模块化、组件化，对系统各业务各功能按一定粒度进行分割、解耦、独立处理，减少冗余，提升可靠性、统一性、复用性、扩展性、维护性。</p><a id="more"></a><p>各业务各功能涉及到基础层、中间层、应用层呈现交互等技术环节，同时受制于工程需求、项目周期、角色协作等因素，分割粒度粗细要把控好，找到合适的平衡点。</p><p>模块化、组件化都是为了解耦和封装，把事务分割成小单元；</p><p>模块化侧重的是拆分、接口和功能；</p><p>组件化侧重的是重用、呈现和交互。</p><p>Web重构，不能通过文件的组织分布来谈模块化、组件化，要从OOP的角度去分析和实现，尤其是SPA开发，结构、样式、脚本文件组织不同于传统的Web开发方式，其侧重JavaScript在控制、驱动、交互方面的承载力，SPA中JavaScript决定一切。</p><h4 id="分离"><a href="#分离" class="headerlink" title="分离"></a>分离</h4><p>分离HTML、CSS、JavaScript，不限于文件方式隔离，以OOP思想作为指导。</p><p>不可在HTML结构标签上写行内样式，</p><p>不可在HTML结构标签上定义DOM0级事件，</p><p>不通过JavaScript在标签上操作 <code>style</code> 属性控制样式。</p><h4 id="分割"><a href="#分割" class="headerlink" title="分割"></a>分割</h4><p>在分离的基础上再各个进行分割。</p><p>HTML结构，分割成站点级和页面级主干结构、栅格结构、组件结构，</p><p>CSS结合预处理分割成Variables/变量、Mixins/混合、Utilities/辅助类(normalize, reset, visibility, position …)、Layout/布局(section/grid)、Components/组件(alert, popover, modal, dropdown, tooltip, accordion, tabs, slide, media …)、Pages/页面、Themes/主题等单元，</p><p>JavaScript根据选定的CommonJS、AMD、CMD、ES6等规范，并结合引入的框架和库定义模块和组件，分割成Common/通用、Components/组件、View/页面等单元，</p><h4 id="组合构建"><a href="#组合构建" class="headerlink" title="组合构建"></a>组合构建</h4><p>最后，使用<a href="http://gulpjs.com" target="_blank" rel="noopener">Gulp</a>、<a href="https://webpack.js.org/" target="_blank" rel="noopener">Webpack</a>、<a href="https://rollupjs.org/guide/en" target="_blank" rel="noopener">Rollup</a>、<a href="https://babeljs.io/" target="_blank" rel="noopener">Babel</a>等工具及相关插件组合模块和组件，打包构建成目标宿主环境支持的代码。</p><p>Web重构中的模块化、组件化实现，是对模块和组件的定义与加载管理。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(6): 语义化</title>
    <link href="/tech/pro-web-reconstruction-6-semantics.html"/>
    <url>/tech/pro-web-reconstruction-6-semantics.html</url>
    <content type="html">
      <![CDATA[<p>语义化概念：通过丰富的语义关系对数据进行逻辑化描述，便于数据人机可读、检索挖掘和共享交换，实现信息处理的自动化和智能化；即人类提供良好结构的、作为人能识别的数据给机器，让不同机器能准确高效的意会和处理数据反馈给人类。</p><p>语义化实现方案有多种，如<a href="https://www.w3.org/RDF/" target="_blank" rel="noopener">RDF</a>、<a href="https://www.w3.org/TR/rdfa-lite/" target="_blank" rel="noopener">RDFa</a>、<a href="http://microformats.org/wiki/Main_Page" target="_blank" rel="noopener">Microformats</a>、<a href="https://www.w3.org/TR/microdata/" target="_blank" rel="noopener">Microdata</a>等规范，虽其复杂性、数据模型、属性类型等特性不尽相同，但都支持HTML5语言，项目如有特定需求可采用相关规范，实现丰富的语义关系。本篇Web语义化仅从HTML5语言标准下的“标签语义”和“属性命名语义”两部分展开。</p><a id="more"></a><h4 id="标签语义"><a href="#标签语义" class="headerlink" title="标签语义"></a>标签语义</h4><p>Web重构工作主要是语义化排版文档信息，构建语义明确、结构清晰的文档，便于浏览器解析渲染、搜索引擎建立索引抓取页面，提升内容的交互性、可读性和可维护性，视觉呈现上即使没有引入样式，人还是能“愉快”的阅读主体内容，如标题就是标题、段落就是段落、列表就列表…</p><p>根据文档特征，在<a href="https://www.w3.org/TR/html401/" target="_blank" rel="noopener">HTML 4.01</a>规范中定义了大量的语义标签，如<a href="https://www.w3.org/TR/html401/struct/text.html" target="_blank" rel="noopener">文本</a>、<a href="https://www.w3.org/TR/html401/struct/lists.html" target="_blank" rel="noopener">列表</a>、<a href="https://www.w3.org/TR/html401/struct/tables.html" target="_blank" rel="noopener">表格</a>、<a href="https://www.w3.org/TR/html401/struct/links.html" target="_blank" rel="noopener">链接</a>、<a href="https://www.w3.org/TR/html401/struct/objects.html" target="_blank" rel="noopener">媒体对象</a>、<a href="https://www.w3.org/TR/html401/interact/forms.html" target="_blank" rel="noopener">表单</a>等范畴下的标签元素；在<a href="https://www.w3.org/TR/html52/" target="_blank" rel="noopener">HTML 5</a>中更为详细的规范化了文档特征，添加了新的标签元素用以更明确的定义和描述文档的结构，并且对所有元素按 Metadata、Flow、Sectioning、Heading、Phrasing、Embedded、Interactive 等属性重新定义了分类规则，如下图(来源：<a href="https://www.w3.org/TR/html52/dom.html#kinds-of-content" target="_blank" rel="noopener">W3C/HTML 5.2 / 3.2.4.2. Kinds of content</a>)：</p><object data="/assets/pro-web-reconstruction-content-venn.svg" width="1000" height="288"><img alt="" src="/assets/pro-web-reconstruction-content-venn.png" width="512" height="288"></object><p>合理使用语义标签，主要是分明层次嵌套、清晰标签职责。</p><h4 id="属性命名语义"><a href="#属性命名语义" class="headerlink" title="属性命名语义"></a>属性命名语义</h4><p>属性命名语义，主要是<code>class</code>、<code>id</code>、<code>data-*</code>等属性的命名，其中最主要的是<code>class</code>属性命名，主要有<a href="https://github.com/stubbornella/oocss/wiki" target="_blank" rel="noopener">OOCSS</a>、<a href="http://getbem.com/naming/" target="_blank" rel="noopener">BEM</a>、<a href="https://smacss.com/" target="_blank" rel="noopener">SMACSS</a>、<a href="https://suitcss.github.io/" target="_blank" rel="noopener">SUITCSS</a>、<a href="https://acss.io/" target="_blank" rel="noopener">Atomic</a>等方案，各种方案都是意图通过样式命名让文档具备逻辑表达能力。OOCSS主要侧重样式的抽象、独立、封装与复用，BEM、SMACSS、SUITCSS主要侧重减轻样式对HTML层级结构嵌套依赖，Atomic主要侧重剥离具体样式表现的特性。</p><p>属性命名依赖于HTML结构，早期在项目中尝试过长命名、短命名方案，团队小、项目小都还可以定义与维护，在多人参与的一定规模的项目中，长命名<code>kebab-case</code>会变得很长很晦涩，短命名层级嵌套会变得越来越深，总有队友深怕会与他人产生冲突刻意为之。</p><p>属性命名具体实现建议：</p><ul><li>采用<code>BEM + OOCSS + Atomic + SCSS/LESS/Stylus/PostCSS</code>组合方案</li><li>样式用属性使用<code>.class</code>，数据钩子使用<code>#id</code></li><li>不用‘大小、颜色、方位、形状’等表象的词</li><li>JavaScript钩子属性名采用<code>j_lowerCamelCase</code>前缀加小驼峰方式</li></ul><p><code>BEM</code>规则可参考：</p><ul><li><code>Block</code>独立模块：中横线</li><li><code>Element</code>子元素：俩下划线</li><li><code>Modifier</code>模块状态：一个下划线</li><li><code>Block</code>下的所有<code>Element</code>不考虑层级嵌套关系，扁平化处理都属于<code>Block</code>，即连续的<code>__</code>下划线只能出现一次</li></ul><p><code>BEM</code>实现为：</p><ul><li>模块：<code>.block</code></li><li>模块_状态：<code>.block_modifier</code></li><li>模块__子元素：<code>.block__element</code></li><li>模块__子元素_状态：<code>.block__element_modifier</code></li></ul><hr><p>附上常用命名词：</p><table><thead><tr><th>用途</th><th>ClassName</th></tr></thead><tbody><tr><td>主次</td><td>primary, secondary, accent, weak, bold, light <small>建议用于变量</small></td></tr><tr><td>大小</td><td>base, normal, regular, small, medium, large, xlarge, xxlarge, xxxlarge <small>建议用于变量</small></td></tr><tr><td>结构</td><td>site, page, topbar, header, footer, container, title, main, content, aside, pendant, section, module, wrapper, inner, row, column</td></tr><tr><td>导航</td><td>nav, navigation, navbar, menu, breadcrumb, prev, next, first, last, pagination, pager, forward, back, up</td></tr><tr><td>列表</td><td>list, item, group, panel</td></tr><tr><td>组件</td><td>alert, dialog, popover, modal, dropdown, tooltip, accordion, collapse, tabs, carousel, slide, media, card, colorpicker, timepicker, datepicker, datetimepicker, calendar, switch, select, radio, checkbox, transfer, upload, cascader, tree-select, label, badge, avatar, backtop, loading, spin, message, notification, overlay, steps, timeline, progress, scroll, rate, divider, spacer, gallery</td></tr><tr><td>页面</td><td>index, archive, detail, special, contact, search, about, forum</td></tr><tr><td>状态</td><td>default, toggle, active, current, cancel, checked, hover, focus, success, fail, warning, danger, info, error, close, on, off, in</td></tr><tr><td>常用</td><td>vertical, horizontal, btn, more, icon, attach</td></tr></tbody></table><hr><p>扩展阅读：</p><ul><li><a href="http://manu.sporny.org/2011/uber-comparison-rdfa-md-uf/" target="_blank" rel="noopener">An Uber-comparison of RDFa, Microdata and Microformats</a></li></ul>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(5): 搭建工程目录</title>
    <link href="/tech/pro-web-reconstruction-5-architecture.html"/>
    <url>/tech/pro-web-reconstruction-5-architecture.html</url>
    <content type="html">
      <![CDATA[<p>Web重构搭建工程目录，即是合理分布项目静态资源。</p><p>目录和文件名，只能是英文、数字和<code>-</code>字符组成，名称不宜过长和生涩，不加排序前缀，干扰阅读和查找文件名，层级不宜过深，这样便于后期维护调整，交付后端程序清晰明了。</p><p>组织目录和文件，处理好两个点：一是设计模式框架中<strong>类型</strong>，二是<strong>业务功能</strong>；</p><a id="more"></a><h3 id="页面型、内容型多页面项目"><a href="#页面型、内容型多页面项目" class="headerlink" title="页面型、内容型多页面项目"></a>页面型、内容型多页面项目</h3><h4 id="项目目录规划"><a href="#项目目录规划" class="headerlink" title="项目目录规划"></a>项目目录规划</h4><ul><li>移动Web端 &srarr; Project-H5</li><li>微信端 &srarr; Project-WeiXin</li><li>桌面Web端 &srarr; Project-PC</li><li>Android端 &srarr; Project-Android</li><li>AndroidTV端 &srarr; Project-AndroidTV</li><li>iOS端 &srarr; Project-iOS</li><li>Linux端 &srarr; Project-Linux</li><li>UWP端 &srarr; Project-UWP</li><li>WP端 &srarr; Project-WP</li></ul><h4 id="通用页面规划"><a href="#通用页面规划" class="headerlink" title="通用页面规划"></a>通用页面规划</h4><ul><li>通用列表页</li><li>通用详情页</li><li>通用评论页</li><li>通用图片列表页</li><li>通用图片详情页</li><li>通用视频列表页</li><li>通用视频详情页</li></ul><h4 id="栏目-频道页面规划"><a href="#栏目-频道页面规划" class="headerlink" title="栏目/频道页面规划"></a>栏目/频道页面规划</h4><ul><li>栏目-首页</li><li>栏目-列表页</li><li>栏目-详情页</li><li>栏目-其它业务操作页面</li></ul><h4 id="用户中心页面规划"><a href="#用户中心页面规划" class="headerlink" title="用户中心页面规划"></a>用户中心页面规划</h4><ul><li>账户相关</li><li>个人资料相关</li><li>业务相关</li><li>积分等级</li><li>设置</li></ul><h4 id="例：采用Gulp打包、SCSS预处理"><a href="#例：采用Gulp打包、SCSS预处理" class="headerlink" title="例：采用Gulp打包、SCSS预处理"></a>例：采用Gulp打包、SCSS预处理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">+ project-a/</span><br><span class="line">+ project-b/</span><br><span class="line">+ project-c/</span><br><span class="line">...</span><br><span class="line">- project-x/</span><br><span class="line">  - dist/               (打包文件)</span><br><span class="line">    - css/</span><br><span class="line">        main.min.css</span><br><span class="line">    + font/</span><br><span class="line">    + img/</span><br><span class="line">    + lib/</span><br><span class="line">    + js/</span><br><span class="line">      index.html</span><br><span class="line">      about.html</span><br><span class="line">      archive.html</span><br><span class="line">  + dev/                (开发预览，样式脚本都未合并或混合，方便调试)</span><br><span class="line">  - src/</span><br><span class="line">    + font/             (Icon)</span><br><span class="line">    + img/              (项目用图形图标)</span><br><span class="line">    - js/</span><br><span class="line">      + common/         (内部编写公用模块脚本，打包成common.min.js单文件)</span><br><span class="line">          entry.js      (入口文件，定义一个全局变量，项目所有脚本对象都挂在它名下，即类似声明一个命名空间，避免污染)</span><br><span class="line">      + view/           (每个页面的脚本)</span><br><span class="line">    + lib/              (第三方依赖，不可改动)</span><br><span class="line">    - page/             (页面，采用`gulp-file-include`从tpl引入模块)</span><br><span class="line">        index.html</span><br><span class="line">        about.html</span><br><span class="line">        archive.html</span><br><span class="line">    - scss/             (所有样式打包成main.min.css单文件)</span><br><span class="line">      + component/      (组件类)</span><br><span class="line">      + core/           (核心样式)</span><br><span class="line">      + dependencies/   (第三方依赖)</span><br><span class="line">      + mixins/         (混合器)</span><br><span class="line">      + variables/      (全局样式变量)</span><br><span class="line">        _component.scss</span><br><span class="line">        _mixins.scss</span><br><span class="line">        _variables.scss</span><br><span class="line">        app.scss        (全局样式)</span><br><span class="line">    - tpl/              (模块)</span><br><span class="line">        page-header.html</span><br><span class="line">        page-breadcrumb.html</span><br><span class="line">        page-footer.html</span><br><span class="line">        page-aside.html</span><br><span class="line">        page-meta.html</span><br><span class="line">        page-pendant.html</span><br><span class="line">        page-style.html</span><br><span class="line">        script-head.html</span><br><span class="line">        script-foot.html</span><br><span class="line">        site-topbar.html</span><br><span class="line">        site-footer.html</span><br><span class="line">  .gitignore            (Gulp task 代码校验配置、Git 版本控制配置)</span><br><span class="line">  .babelrc</span><br><span class="line">  .csslintrc</span><br><span class="line">  .eslintignore</span><br><span class="line">  .eslintrc</span><br><span class="line">  .htmlhintrc</span><br><span class="line">  .jshintignore</span><br><span class="line">  .jshintrc</span><br><span class="line">  .scss-lint.yml</span><br><span class="line">  gulpfile.js           (Gulp配置)</span><br><span class="line">  package.json          (项目配置)</span><br></pre></td></tr></table></figure><h3 id="单页面：业务功能优先、类型其次的目录规划"><a href="#单页面：业务功能优先、类型其次的目录规划" class="headerlink" title="单页面：业务功能优先、类型其次的目录规划"></a>单页面：业务功能优先、类型其次的目录规划</h3><p>一般使用设计模式框架 CLI 和打包工具实现</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+ project-a/</span><br><span class="line">+ project-b/</span><br><span class="line">+ project-c/</span><br><span class="line">...</span><br><span class="line">- project-x/</span><br><span class="line">  - node_modules/</span><br><span class="line">  - dist/</span><br><span class="line">  - dev/</span><br><span class="line">  - src/</span><br><span class="line">    + common/</span><br><span class="line">    + feature-a/</span><br><span class="line">    + feature-b/</span><br><span class="line">    + feature-c/</span><br><span class="line">    ...</span><br><span class="line">    - feature-x/</span><br><span class="line">        xxxx.js/ts</span><br><span class="line">        xxx.svg/png/jpg</span><br><span class="line">        xxx.css/scss</span><br><span class="line">    - index.html</span><br><span class="line">    - lint</span><br></pre></td></tr></table></figure>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(4): 切图与标注</title>
    <link href="/tech/pro-web-reconstruction-4-generate-assets.html"/>
    <url>/tech/pro-web-reconstruction-4-generate-assets.html</url>
    <content type="html">
      <![CDATA[<p>本篇讲从设计稿中提取基础资源和信息：切图与标注。</p><a id="more"></a><p>合格的设计师，会使每个元素组基于矩形层，形成一个个单元，并做好图层分类及命名，不在‘组’上使用蒙版，按照栅格化模块化设计，考虑各组件的复用性、扩展性和兼容性。</p><p>遇到不合格的设计师，那就把设计稿退回去，深入交流沟通。</p><p>不建议设计师切图，因为要考虑到图形压缩格式、编码实现方式及图形替代方案。</p><p>不要直接用Adobe Photoshop/Fireworks划切片范围导出切片。</p><p>采用<code>lower_snake_case</code>命名规则修改要导出的组或图层名称，命名方式为<code>模块/组件_用途_状态</code>，绝不用表象的具体词汇，如大小尺寸、颜色、形状、新旧之类。推荐<a href="http://www.klaia.com/Renamy/" target="_blank" rel="noopener">Renamy</a>进行批量命名。</p><p>输出切片方式有很多，目前最新版CC非常便捷，选择要导出的组和图层，鼠标右键<code>导出为</code>，进行“缩放设置、文件格式、图像大小、画布大小”配置后导出即可，并且还可以复制图层CSS样式；也可以选择切图插件，如<a href="http://www.cutterman.cn/zh/cutterman" target="_blank" rel="noopener">Cutterman</a>。</p><p>图标不建议做 Sprite 图，而是采用Web Font，推荐<a href="http://www.iconfont.cn/" target="_blank" rel="noopener">Iconfont</a>。</p><p>方便接下来编码读取页面元素信息（尺寸、文字、色彩、间距、位置、属性），强烈建议“标注”，推荐<a href="http://www.cutterman.cn/zh/parker" target="_blank" rel="noopener">Parker</a>、<a href="http://ink.chrometaphore.com/" target="_blank" rel="noopener">Ink</a>、<a href="http://www.fancynode.com.cn/pxcook" target="_blank" rel="noopener">PxCook</a>。</p><p>也可以使用<a href="https://zeplin.io/" target="_blank" rel="noopener">Zeplin</a>、<a href="https://www.lanhuapp.com/" target="_blank" rel="noopener">蓝湖</a>等在线产品设计协作平台，它们提供了标注切图、页面逻辑、批注讨论、原型演示、版本管理等丰富的功能。</p><p>各种列表配图、焦点轮播图、详情页用图、Banner，产品设计阶段应已按宽高比指定了多种尺寸，推荐用<a href="https://placeholder.com/" target="_blank" rel="noopener">Placeholder</a>、<a href="http://temp.im/" target="_blank" rel="noopener">temp.im</a>占位。</p><hr><p>从设计稿提取了基础资源，接下来可以搭建工程目录了。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(3): Web重构前的分析</title>
    <link href="/tech/pro-web-reconstruction-3-forecast.html"/>
    <url>/tech/pro-web-reconstruction-3-forecast.html</url>
    <content type="html">
      <![CDATA[<p>本篇讲重构前的分析。从“工作状态、工作环境和工作角色”和具体重构工作两方面分析。</p><a id="more"></a><h4 id="凡是经过考验的朋友，就应该把他们紧紧地团结在你的周围"><a href="#凡是经过考验的朋友，就应该把他们紧紧地团结在你的周围" class="headerlink" title="凡是经过考验的朋友，就应该把他们紧紧地团结在你的周围"></a>凡是经过考验的朋友，就应该把他们紧紧地团结在你的周围</h4><p>比较理想的工作状态：制定了各种设计和开发规范，各团队之间邮件、团队内部即时通讯工具或声波传输沟通，对已有的或将要孵化的项目和产品，或多或少会有参与和认识，较早的进入开发环境中，进行准备、分析和实施相关的思考。但也可能会是产品需求未确定和频繁变更，技术规范、产品文档和开发文档尚未定义，已经要求团队进行并行开发的充满风险的工作状态。</p><p>工作环境多是公司内部，但也有可能接触或成为 Outsourcing 开发伙伴，将会经历工期、需求、各规范、技术栈、开发模式、开发流程、产品性能迭代等方面的严峻考验。</p><p>接触过产品需求、交互文档中的各种描述，如一级页面二级页面三级页面，直接从不确定的类目名定义具体的模块，造成“这个就是以前的/上一个版本的**分类”；接触过设计师比较随意，页面无栅格，图层无分组不命名，图标不矢量处理，间距颜色字体凭手感视觉；也有设计师非常严谨，栅格参考线锁定，组件式所有模块置于一个PSD并标注，图标<a href="http://www.iconfont.cn/" target="_blank" rel="noopener">iconfont</a>拉你进项目成员组；也接触过其他同行的编码，差不多和设计稿相同的经历；</p><p>综上所述，项目开发越多，跨项目周期、跨组织跨地域、跨角色的协作问题也会越多，需要结合项目参与人员、时间节点和伸缩性等因素分析，作出合适的技术选型，和行之有效的沟通。</p><h4 id="如果做好心理准备，一切准备都已经完成"><a href="#如果做好心理准备，一切准备都已经完成" class="headerlink" title="如果做好心理准备，一切准备都已经完成"></a>如果做好心理准备，一切准备都已经完成</h4><p>到具体重构工作的分析，从收到设计师的稿，要考虑：站点风格，如何栅格，内容、结构、样式、行为如何分离，站点、页面公用部分和业务模块组件有哪些，主次颜色，行高是多少，标题、段落字体字号有哪几种，图文组合有几种，列表有几种，模块内外间距是多少，ICON图标有哪些，响应式布局处理…</p><p>重构不是完全还原设计稿，是基于设计稿，提炼和整理，分析和统计，得到各个方面数据。</p><hr><p>分析完成，开始动手。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(2): 来套Web重构装备</title>
    <link href="/tech/pro-web-reconstruction-2-getting-started.html"/>
    <url>/tech/pro-web-reconstruction-2-getting-started.html</url>
    <content type="html">
      <![CDATA[<p>本篇主要从语言入门、规范、工具、构建、库、框架、版本控制等各方面展开，篇幅会有点长，涉及到的工具类，会另开博文详细介绍。</p><a id="more"></a><p>另外说明Web重构是Web前端的开始，主要侧重Web页面，如实现布局与兼容，符合W3C标准规范，组件化框架化，实现页面视觉效果，提升代码的可维护性、可读性和性能优化。</p><h4 id="三生万物"><a href="#三生万物" class="headerlink" title="三生万物"></a>三生万物</h4><p>HTML、CSS、JavaScript 是为Web开发三基石。</p><p>人类社会的工作，各方面各环节都是林林总总，Web开发亦是如此，具体的可以查阅<a href="https://github.com/kamranahmedse/developer-roadmap" target="_blank" rel="noopener">Web Developer Roadmap</a>、<a href="http://html5ify.com/fks/fks_chart/" target="_blank" rel="noopener">Frontend Knowledge Structure</a>，看看Web开发技能树。各“分支”涉及知识点非常广，对于Web重构工作，最初、最终、最重要的还是三基石。</p><p>打好基础是持久战，要理论和实践结合，不能急于求成。不建议看“七天入门/学会”、“从入门到精通”之类视频、帖子和书籍作为教程，甚至都不建议将其作为辅助指导！前期不建议报培训班。</p><p>一门学科和技术，还是需要一个系统的学习过程，这也是本系列文章没有相关基础知识的原因。</p><p>入门学习路线：HTML &srarr; CSS &srarr; JavaScript</p><p>HTML，很多时候仅仅是作为标签标记使用，但它不仅仅就是十几个标签，像Local Storage、SVG、Canvas、Web Workers等部分，必须要结合JavaScript、几何学、线程等知识才能讲解的下去，没法单纯的独立的全面展开，这已经不是一本书就能解释清楚的了。目前已有的书籍，像Mark Pilgrim的《HTML5揭秘》，知识点如蜻蜓点水，留下太多扩展阅读链接；而像Adam Freeman的《HTML5权威指南》，太臃肿了，某些章节写了进来，但又不够全面和详细，如第4、5章及第16章节之后的样式与脚本部分。即使它第3、6-15章对了解基本的HTML有帮助，但被翻译弄得比较尴尬，如’Void Elements’翻译为’虚元素’。因此，HTML这块我不推荐阅读书籍，建议先阅读MDN“<a href="https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Introduction_to_HTML/Getting_started" target="_blank" rel="noopener">开始 HTML</a>”，之后在<a href="http://www.runoob.com/html/html-tutorial.html" target="_blank" rel="noopener">RUNOOB: HTML教程</a>系统学习，然后再阅读MDN“<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element" target="_blank" rel="noopener">元素参考</a>、<a href="https://developer.mozilla.org/zh-TW/docs/Web/HTML/Attributes" target="_blank" rel="noopener">属性参考</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Inline_elemente" target="_blank" rel="noopener">行内元素</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Block-level_elements" target="_blank" rel="noopener">块级元素</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/HTML/Content_categories" target="_blank" rel="noopener">元素内容模型</a>”等内容，作为总结和回顾。</p><p>很多Web开发初学者多是去<a href="http://www.w3school.com.cn/index.html" target="_blank" rel="noopener">www.w3school.com.cn</a>，我不建议参考这个网站的内容，其部分内容过时和有问题。可以阅读<a href="https://www.w3schools.com/" target="_blank" rel="noopener">www.w3schools.com</a>。</p><p>CSS学习推荐Lea Verou的《CSS揭秘》和Eric A. Meyer的《CSS权威指南》，顺序是：《CSS权威指南》第1-4章先看几遍，再跟着《CSS揭秘》全书动手做，再回到《CSS权威指南》剩下章节。熟悉之后可以去<a href="http://www.w3help.org/zh-cn/home/compatibility.html" target="_blank" rel="noopener">W3Help</a>查看一些兼容性问题，。</p><p>JavaScript学习推荐Nicholas C.Zakas的《JavaScript高级程序设计(第3版)》，学习路线：先A部分(第1-7章)必知必会；深入了解B部分(第10-14章)；接着深入了解C部分(第20、21章)；再接着深入D部分(第8、23章)；再了解E部分(第9、17、22、24章，附录A)；最后读一下F部分(第18、19、15、16、25章，附录B、C、D)。其中B、C、D部分实际工作中会运用到第三方库。F部分附录章节，由于第3版成书年代较早，许多新技术未收录，这里了解一下即可，第4版今年(2018年)7月底才发售，里面会有ES6之后的相关技术介绍；David Flanagan的《JavaScript 权威指南》适合做字典。</p><p>经过上面的语言学习，或多或少知道一个HTML文档是怎么个情况了，源代码直接到浏览器运行，很方便。这时应该思考它肯定不会这么简单，抛出各种问题，如：多重样式权重优先级是怎样的呢？<code>!important</code>为什么要少用不用？ HTML、CSS、JavaScript可以写在一个文档中实现效果，可为什么要采用外部样式、脚本引入呢？为什么要合理运用h1~h6之类的HTML标签，为什么要合理命名CSS类？样式面向设计稿书写，连简单的调整颜色和字体都是体力活替换，有没有什么方法让它具备可编程性？多个页面模块相同怎么处理？脚本全局变量冲突不好控制，业务繁多功能复杂代码越来越臃肿？团队和技术现状如何选择一个合适的库/框架呢？<a href="https://github.com/fouber/blog/issues/6" target="_blank" rel="noopener">大公司里怎样开发和部署前端代码？</a>太多太多问题…打好语言基础，然后多去发掘问题关注问题分析问题，释然解决问题。</p><p>入门巩固学习推荐张容铭的《JavaScript 设计模式》、Douglas Crockford的《JavaScript 语言精粹》</p><p>JavaScript部分不在本系列中讨论，已经有《JavaScript高级程序设计》、<a href="http://es6.ruanyifeng.com/" target="_blank" rel="noopener">《ES6 标准入门》</a>、《JavaScript 设计模式》、<a href="https://github.com/Huxpro/js-module-7day" target="_blank" rel="noopener">JavaScript模块化之旅</a>等资源，可以辅助深入学习和应用。</p><h4 id="规所以正圆，矩所以正方"><a href="#规所以正圆，矩所以正方" class="headerlink" title="规所以正圆，矩所以正方"></a>规所以正圆，矩所以正方</h4><p>编程规范部分，像代码命名风格、Tab/Space缩进之类，差不多是程序员的一种价值观，算是编程领域的圣战导火索。建议有了语言基础之后，读Nicholas Zakas的《编写可维护的JavaScript》，然后编码遵守<a href="https://google.github.io/styleguide/htmlcssguide.html" target="_blank" rel="noopener">HTML/CSS Style Guide</a>、<a href="https://github.com/standard/standard" target="_blank" rel="noopener">JavaScript Style Guide</a>，不建议自己搞一套规范出来，建议接受大厂已有的成熟的“潜规则”；调教IDE/编辑器，使“格式化文档”与编码风格规则一致；了解变量名、方法名中<code>UpperCamelCase</code>、<code>lowerCamelCase</code>、<code>lower_snake_case</code>、<code>UPPER_SNAKE_CASE</code>、<code>kebab-case</code>、<code>Camel_Snake_Case</code>等命名风格，方便查阅和沟通。</p><p>代码需要校验，编辑器或构建工具中添加<a href="http://jslint.com/" target="_blank" rel="noopener">JSLint</a>、<a href="http://jshint.com/" target="_blank" rel="noopener">JSHint</a>、<a href="http://jscs.info/" target="_blank" rel="noopener">JSCS</a>、<a href="https://eslint.org/" target="_blank" rel="noopener">ESLint</a>、<a href="https://stylelint.io/" target="_blank" rel="noopener">stylelint</a>、<a href="http://htmlhint.com/" target="_blank" rel="noopener">HTMLHint</a>这类工具，可以在代码编写时候或构建命令中，进行代码检验。</p><p>JavaScript 校验工具这块：</p><ul><li>JSLint，古老，不可配置，不可扩展，不可禁用许多特性的校验，Douglas Crockford之作</li><li>JSHint，可配置的JSLint版本</li><li>JSCS，代码样式检查，只捕获与代码格式化相关的问题，而不是潜在的bug或错误。已经与 ESLint 合并</li><li>ESLint，易于扩展，可自定义规则，可以插件形式安装更多的规则，Nicholas C. Zakas之作</li></ul><p>一个 linting 工具是解决问题的一个很好的步骤，但是它基于一定的规则发现错误，具有一定的局限性。</p><h4 id="工以利器为助"><a href="#工以利器为助" class="headerlink" title="工以利器为助"></a>工以利器为助</h4><p>开发工具、构建工具依赖开发环境，建议根据操作系统安装和配置好各环境平台，如：<a href="https://www.microsoft.com/net/download/Windows/run" target="_blank" rel="noopener">.NET Framework</a>、<a href="/Microsoft-Visual-C++-Redistributable-Package.html">Microsoft Visual C++ Redistributable Package</a>、<a href="http://nodejs.org/" target="_blank" rel="noopener">Nodejs</a>、<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="noopener">JDK</a>、<a href="http://python.org/" target="_blank" rel="noopener">Python</a>、<a href="http://ruby-lang.org/" target="_blank" rel="noopener">Ruby</a>。</p><p>开发工具也是编程领域的圣战导火索，如编辑器之神<a href="https://www.vim.org/" target="_blank" rel="noopener">Vim</a>和神的编辑器<a href="https://www.gnu.org/software/emacs/" target="_blank" rel="noopener">Emacs</a>。</p><p>开发工具只要是紧贴当下技术更新的就可以了，然后按预算、硬件和调教精力筛选，无所谓哪一个IDE或编辑器。</p><p>预算足，微软家的<a href="https://www.visualstudio.com/" target="_blank" rel="noopener">Visual Studio</a>(没有之一)，<a href="https://www.jetbrains.com/" target="_blank" rel="noopener">Jetbrain</a>家的IDE，Adobe家的<a href="https://www.adobe.com/uk/products/dreamweaver.html" target="_blank" rel="noopener">Dreamweaver</a>最新版；预算不多可以考虑<a href="http://www.sublimetext.com" target="_blank" rel="noopener">Sublime Text</a>，没预算可以考虑<a href="https://code.visualstudio.com/" target="_blank" rel="noopener">Visual Studio Code</a>、<a href="https://atom.io/" target="_blank" rel="noopener">Github Atom</a>、<a href="http://brackets.io/" target="_blank" rel="noopener">Adobe Brackets</a>。不建议使用<a href="http://www.dcloud.io/" target="_blank" rel="noopener">Hbuilder</a>。</p><p>构建工具同样选择紧贴当下技术更新的就可以了，如当下结合使用<a href="http://gulpjs.com" target="_blank" rel="noopener">Gulp</a>、<a href="https://webpack.js.org/" target="_blank" rel="noopener">Webpack</a>、<a href="https://rollupjs.org/guide/en" target="_blank" rel="noopener">Rollup</a>、<a href="https://babeljs.io/" target="_blank" rel="noopener">Babel</a>；</p><p>调试工具推荐<a href="https://www.google.com/chrome/" target="_blank" rel="noopener">Chrome Developer Tools</a>；</p><p>计算机硬件固态硬盘和8G以上内存。</p><h4 id="枪，兵工厂"><a href="#枪，兵工厂" class="headerlink" title="枪，兵工厂"></a>枪，兵工厂</h4><p>Web重构中，并非是“九层之台，起于垒土”。</p><p>Web重构，有旧项目的改造和完善，涉及到架构的变动、业务功能的增删；也有新项目的建造，或大，或小；这里无论新旧，多是基于各种库和框架，很少全部原生CSS、脚本一砖一瓦式建之筑之。</p><p>库的作用主要是提供API，便捷操作DOM、AJAX和兼容各宿主环境事件(Event)，如<a href="https://jquery.com/" target="_blank" rel="noopener">jQuery</a>、<a href="http://zeptojs.com/" target="_blank" rel="noopener">Zepto</a>、<a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a>，以及实现函数式编程来处理数据和事件，如<a href="http://underscorejs.org/" target="_blank" rel="noopener">Underscore</a>、<a href="https://lodash.com/" target="_blank" rel="noopener">Lodash</a>。还有许多库其功能仅仅专注某一事务，如Cookie操作、Local Storage、切换交互、视觉差交互、代码着色、宿主环境侦测、延迟加载、图表报表、游戏引擎等。</p><p>MVC、MVP、MVVM等框架，加以数据接口规范，主要作用是提供一套完整的、规模化的、跨平台的解决方案，复杂业务项目采用它的机制和工作流，可解耦数据、业务逻辑与视觉呈现，使项目得以按一定粒度拆分隔离，清晰化控制、调用、传递等关联环节，降低耦合，减少冗余混乱污染，减轻团队协作任务依赖带来的制约，统一实现风格，提高项目可伸缩性、可维护性，侧重底层驱动。当然，也提高了Web开发难度和成本。这些框架主要有<a href="https://angular.cn/" target="_blank" rel="noopener">Angular</a>、<a href="https://reactjs.org/" target="_blank" rel="noopener">React</a>、<a href="https://cn.vuejs.org/" target="_blank" rel="noopener">Vue</a>、<a href="http://backbonejs.org/#Model-View-separation" target="_blank" rel="noopener">Backbone</a>、<a href="https://emberjs.com/" target="_blank" rel="noopener">Ember</a>、<a href="https://www.meteor.com/developers" target="_blank" rel="noopener">Meteor</a>、<a href="http://knockoutjs.com/" target="_blank" rel="noopener">Knockout</a>、<a href="https://www.polymer-project.org/" target="_blank" rel="noopener">Polymer</a>。一部分框架，还提供了UI层，如<a href="https://yuilibrary.com/" target="_blank" rel="noopener">YUI</a>、<a href="https://www.sencha.com/" target="_blank" rel="noopener">ExtJS</a>、<a href="https://dojo.io/" target="_blank" rel="noopener">Dojo</a>。</p><p>另一部分则是UI库，提供了一整套丰富的客户端组件和资源，UI库有独立设计不依赖其它库和框架，或为其它一种或多种库和框架设计。无依赖项的有<a href="https://semantic-ui.com/" target="_blank" rel="noopener">Semantic UI</a>、<a href="https://foundation.zurb.com/" target="_blank" rel="noopener">Foundation</a>、<a href="https://purecss.io/" target="_blank" rel="noopener">Pure</a>、<a href="https://bulma.io/" target="_blank" rel="noopener">Bulma</a>等；有依赖项的有<a href="http://www.bootcss.com/" target="_blank" rel="noopener">Bootstrap</a>、<a href="https://www.jeasyui.com/" target="_blank" rel="noopener">EasyUI</a>、<a href="https://ant.design/index-cn" target="_blank" rel="noopener">Ant Design</a>、<a href="https://www.iviewui.com/" target="_blank" rel="noopener">iView</a>、<a href="http://element-cn.eleme.io" target="_blank" rel="noopener">Element</a>、<a href="https://weui.io" target="_blank" rel="noopener">WeUI</a>、<a href="https://onsen.io/" target="_blank" rel="noopener">Onsen UI</a>等。</p><p>还有另一类使用 JavaScript, HTML 和 CSS 等 Web 技术创建原生应用程序的软件开发框架，如<a href="https://facebook.github.io/react-native/" target="_blank" rel="noopener">React Native</a>、<a href="https://electronjs.org/" target="_blank" rel="noopener">Electron</a>、<a href="http://weex.apache.org/cn/" target="_blank" rel="noopener">Weex</a>、<a href="http://phonegap.com/" target="_blank" rel="noopener">PhoneGap/Cordova</a>、<a href="http://www.appcelerator.com/mobile-app-development-products/" target="_blank" rel="noopener">Titanium</a>、<a href="https://www.nativescript.org/" target="_blank" rel="noopener">NativeScript</a>、<a href="https://ionicframework.com/" target="_blank" rel="noopener">Ionic</a>。</p><p>各框架在模块规范、加载器机制、应用性能、用户体验、技术门槛、开发部署等方面存在差异，至于选择哪种框架，一要看其功能、文档、活跃度，二要结合项目实际情况、团队技术水准；没有好不好，只有合不合适。</p><h4 id="凡是过去，皆为序曲"><a href="#凡是过去，皆为序曲" class="headerlink" title="凡是过去，皆为序曲"></a>凡是过去，皆为序曲</h4><p>无论工程大小，无论个人还是团队，都需要采用版本控制系统，以便工程文件的协作、追踪、维护、备份和版本存储。</p><p>版本控制系统主要有以下几类：</p><ul><li>本地版本控制系统，如<a href="https://www.gnu.org/software/rcs/" target="_blank" rel="noopener">RCS</a>；</li><li>集中式的版本控制系统，如<a href="http://savannah.nongnu.org/projects/cvs" target="_blank" rel="noopener">CVS</a>、<a href="http://subversion.apache.org/" target="_blank" rel="noopener">SVN</a>、<a href="https://www.visualstudio.com/zh-hans/tfs/" target="_blank" rel="noopener">TFS</a>，工具主要有<a href="https://www.visualsvn.com/server/" target="_blank" rel="noopener">VisualSVN Server</a>、<a href="https://tortoisesvn.net/about.zh.html" target="_blank" rel="noopener">TortoiseSVN</a>、<a href="http://anrichter.github.io/qsvn/" target="_blank" rel="noopener">QSvn</a>、<a href="https://rapidsvn.org/" target="_blank" rel="noopener">RapidSVN</a>、<a href="https://www.smartsvn.com/" target="_blank" rel="noopener">SmartSVN</a>、<a href="http://versionsapp.com/" target="_blank" rel="noopener">Versions</a>、<a href="https://www.zennaware.com/cornerstone/" target="_blank" rel="noopener">Cornerstone</a>；集中式版本系统可以为每个开发者分配访问权限；</li><li>分布式版本控制系统，如<a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a>、<a href="https://www.mercurial-scm.org/" target="_blank" rel="noopener">Mercurial</a>、<a href="http://bazaar.canonical.com/en/" target="_blank" rel="noopener">Bazaar</a>，工具主要有<a href="https://about.gitlab.com/installation/" target="_blank" rel="noopener">GitLab</a>、<a href="https://gogs.io/" target="_blank" rel="noopener">Gogs</a>、<a href="http://gitblit.com/" target="_blank" rel="noopener">Gitblit</a>、<a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">Sourcetree</a>、<a href="https://git-scm.com/downloads" target="_blank" rel="noopener">Git</a>、<a href="https://www.git-tower.com/" target="_blank" rel="noopener">Tower</a>、<a href="https://tortoisegit.org/" target="_blank" rel="noopener">TortoiseGit</a>、<a href="https://tortoisehg.bitbucket.io/" target="_blank" rel="noopener">TortoiseHg</a>。</li></ul><p>提供项目托管服务的有<a href="https://bitbucket.org" target="_blank" rel="noopener">Bitbucket</a>、<a href="https://coding.net/" target="_blank" rel="noopener">Coding</a>、<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>、<a href="https://sourceforge.net/" target="_blank" rel="noopener">SourceForge</a>等SaaS平台。</p><p>在线托管服务注意仓库的Public/Private属性，可以私有部署。</p><hr><p>语言有了，规范有了，工具有了，架子有了，仓库有了，装备齐了，可以做了。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title>Web重构笔记(1): 为什么要写这个系列</title>
    <link href="/tech/pro-web-reconstruction-1-preface.html"/>
    <url>/tech/pro-web-reconstruction-1-preface.html</url>
    <content type="html">
      <![CDATA[<p>出于兴趣，选择从事Web重构工作，也非常幸运，能够将兴趣与工作结合在一起，既保证了公司和个人的收入，又能倒腾爱好。</p><p>到目前为止，一直就职于中小型互联网公司从事Web重构开发，在项目与技术结合方面，比较幸运的是项目有“旧衣翻新”，也有“无中生有”，技术点是“无所不用其极”；当然，在小团队中会有较多局限性，姑且不说新项目以当前团队力量很难采用Angular、React这类技术，就是已有项目的工作流中，都存在各种各样的问题，如需求变动频繁原型难定，设计师比较随意设计稿无栅格、未组件化模块化，前端定了规范还是会出现层级嵌套不合理、样式随意命名、脚本面向过程，后端不和前端玩一堆源码、console、debugger上线…</p><a id="more"></a><p>在小团队中，重构工作主要是跟PM和同事讨论下网站大概怎么个做法，从设计师那接稿输出HTML给后端，和市场、编辑互动做些活动专题，帮后端封装些功能性脚本。</p><p>平时较多关注<a href="http://www.aliued.com/" target="_blank" rel="noopener">阿里</a>、<a href="http://taobaofed.org/" target="_blank" rel="noopener">淘宝</a>、<a href="http://www.alloyteam.com/" target="_blank" rel="noopener">腾讯</a>、<a href="http://jdc.jd.com/" target="_blank" rel="noopener">京东</a>、<a href="http://uedc.163.com/" target="_blank" rel="noopener">网易</a>、<a href="http://efe.baidu.com/" target="_blank" rel="noopener">百度</a>等互联网技术团队及其开源项目；关注<a href="http://www.weibo.com/lifesinger" target="_blank" rel="noopener">玉伯</a>、<a href="http://www.weibo.com/wintercn" target="_blank" rel="noopener">寒冬</a>、<a href="http://www.weibo.com/ruanyf" target="_blank" rel="noopener">承玉</a>、<a href="http://www.zhangxinxu.com/wordpress/" target="_blank" rel="noopener">张鑫旭</a>，<a href="http://www.ruanyifeng.com/blog/javascript/" target="_blank" rel="noopener">阮一峰</a>、<a href="http://blog.cssforest.org/" target="_blank" rel="noopener">CSS森林</a>、<a href="http://www.css88.com/" target="_blank" rel="noopener">css88</a>等博客和SNS；<a href="https://www.w3cplus.com/" target="_blank" rel="noopener">w3cplus</a>、<a href="http://www.w3help.org/zh-cn/causes/index.html" target="_blank" rel="noopener">w3help</a>、<a href="http://css-tricks.com/" target="_blank" rel="noopener">CSS-Tricks</a>、<a href="http://www.w3.org/TR/" target="_blank" rel="noopener">W3C</a>、<a href="https://developer.mozilla.org/zh-CN/" target="_blank" rel="noopener">MDN</a>、<a href="http://www.ibm.com/developerworks/cn/" target="_blank" rel="noopener">IBM DeveloperWorks</a>、<a href="http://stackoverflow.com/" target="_blank" rel="noopener">stackoverflow</a>、<a href="http://www.infoq.com/cn/" target="_blank" rel="noopener">infoQ</a>、<a href="http://oschina.net/" target="_blank" rel="noopener">oschina</a>、<a href="http://www.open-open.com/" target="_blank" rel="noopener">open-open</a>、<a href="http://www.slideshare.net/" target="_blank" rel="noopener">slideshare</a>、<a href="http://segmentfault.com/" target="_blank" rel="noopener">segmentfault</a>、<a href="https://www.v2ex.com/" target="_blank" rel="noopener">V2EX</a>、<a href="http://www.cnblogs.com/" target="_blank" rel="noopener">博客园</a>、<a href="http://www.zhihu.com/" target="_blank" rel="noopener">知乎</a>、<a href="https://juejin.im/" target="_blank" rel="noopener">掘金</a>等社区；还有在<a href="https://github.com/" target="_blank" rel="noopener">Github</a>上<a href="https://github.com/xianghongai?tab=stars" target="_blank" rel="noopener">Star</a>一些项目…</p><p>在Web重构开发中，接触了很多优秀的人、优秀的项目，上线了很多项目；</p><p>所见，所闻，所事，所感，就促使我写下了这个系列文章，以抛砖引玉，以交流互动，以温故知新。</p><p>接下来的系列文章中，不涉及基础知识，大多是方法、分析和总结。</p><hr><p>注：本系列成文于2014年，于2015年发布于博客园，今年(2018年)再次修订，As Little as Possible, as Much as Necessary，故再删再增。</p>]]>
    </content>
    <categories>
      <category> tech </category>
    </categories>
    <tags>
      <tag> web </tag>
    </tags>
  </entry>
  <entry>
    <title></title>
    <link href="/assets/iconfont/iconfont.js"/>
    <url>/assets/iconfont/iconfont.js</url>
    <content type="html">
      <![CDATA[(function(window){var svgSprite='<svg><symbol id="icon-i" viewbox="0 0 1050 1024"><path d="M919.40340732 541.40061832L520.87752432 142.91760532c-33.399832-33.399832-96.574857-59.608261-143.815191-59.645772l-180.613523-0.133968-0.075022 0c-28.133281 0-54.701817 10.420567-72.853946 28.589844-14.506056 14.506056-22.486262 32.98078-22.464827 52.029959l0.037511 61.5374 38.172308-0.021435-0.037511-61.570624c0-11.319761 6.129304-19.851915 11.279034-25.005932C161.40813732 127.82101832 178.54854032 121.31017332 196.37485932 121.31017332l0.053587 0 180.618882 0.133968c37.083416 0.021435 90.599884 22.218326 116.844752 48.458907l398.521596 398.504448c22.330859 22.330859 22.330859 58.653337 0 80.984196L667.30884232 874.51689032c-22.330859 22.308352-58.653337 22.308352-80.984196 0L187.78375932 475.93634832c-28.535185-28.535185-48.399961-70.219599-48.421396-89.783215l-0.020363-49.279863-38.17338 0.017148 0.021435 49.283079c0 32.064439 26.186994 83.349535 59.607189 116.749367l398.559107 398.57947c18.608692 18.609764 43.041241 27.907143 67.469503 27.907143 24.452912 0 48.881175-9.314528 73.207621-31.480338L925.13723732 672.80822932C956.62186232 639.18118732 956.62186232 578.61907432 919.40340732 541.40061832L919.40340732 541.40061832zM919.40340732 541.40061832"/><path d="M334.21507732 423.10258132c-27.522387 0-53.402863-10.726014-72.891457-30.193173-40.157178-40.177541-40.177541-105.566789 0-145.761478 19.488594-19.467159 45.369069-30.176026 72.891457-30.176026 27.521316 0 53.385715 10.708867 72.852874 30.155662 40.157178 40.194689 40.157178 105.587152 0.017148 145.761478C387.61794032 412.37656732 361.73639232 423.10258132 334.21507732 423.10258132L334.21507732 423.10258132zM334.21507732 255.14421232c-17.332245 0-33.630257 6.757346-45.900654 18.990233-25.291016 25.291016-25.291016 66.460992 0 91.768085 24.523647 24.507571 67.259442 24.507571 91.784161 0 25.269581-25.289944 25.269581-66.460992 0-91.784161C367.82818632 261.90155832 351.52588732 255.14421232 334.21507732 255.14421232L334.21507732 255.14421232zM334.21507732 255.14421232"/></symbol><symbol id="icon-top" viewbox="0 0 1024 1024"><path d="M512 960C264.6 960 64 759.4 64 512 64 264.5 264.6 64 512 64c247.5 0 448 200.5 448 448 0 247.4-200.5 448-448 448z m214.9-394.7L533.2 371.6c-11.7-11.7-30.7-11.7-42.4 0L297.1 565.3c-11.5 11.8-11.3 30.7 0.5 42.2 11.6 11.3 30.1 11.3 41.7 0L512 434.9l172.7 172.7c11.7 11.6 30.6 11.5 42.2-0.2 11.5-11.7 11.5-30.4 0-42.1z"/></symbol><symbol id="icon-category" viewbox="0 0 1024 1024"><path d="M514.133333 592.59259232c-3.792593 0-5.688889 0-9.481481-1.896296L127.288889 378.31111132c-5.688889-3.792593-9.481481-9.481481-9.481482-17.066667s3.792593-13.274074 9.481482-17.066667L504.651852 143.17037032c5.688889-3.792593 13.274074-3.792593 17.066667 0l377.362962 202.903704c5.688889 3.792593 9.481481 9.481481 9.481482 17.066666s-3.792593 13.274074-9.481482 17.066667l-375.466666 208.592593c-1.896296 1.896296-5.688889 3.792593-9.481482 3.792592zM176.592593 363.14074032l337.54074 187.733334 337.540741-187.733334-337.540741-182.044444L176.592593 363.14074032z" fill=""/><path d="M514.133333 744.29629632c-3.792593 0-5.688889 0-9.481481-1.896296L127.288889 531.91111132c-9.481481-5.688889-11.377778-17.066667-7.585185-26.548148 5.688889-9.481481 17.066667-13.274074 26.548148-7.585186l367.881481 204.8 367.881482-204.8c9.481481-5.688889 20.859259-1.896296 26.548148 7.585186 5.688889 9.481481 1.896296 20.859259-7.585185 26.548148L523.614815 742.40000032c-1.896296 1.896296-5.688889 1.896296-9.481482 1.896296z" fill=""/><path d="M514.133333 897.89629632c-3.792593 0-5.688889 0-9.481481-1.896296L127.288889 685.51111132c-9.481481-5.688889-11.377778-17.066667-7.585185-26.548148 5.688889-9.481481 17.066667-13.274074 26.548148-7.585186l367.881481 204.8 367.881482-204.8c9.481481-5.688889 20.859259-1.896296 26.548148 7.585186 5.688889 9.481481 1.896296 20.859259-7.585185 26.548148L523.614815 896.00000032c-1.896296 1.896296-5.688889 1.896296-9.481482 1.896296z" fill=""/></symbol><symbol id="icon-Noncommercial" viewbox="0 0 1024 1024"><path d="M515 72C272 72 75 269 75 512s197 440 440 440 440-197 440-440S758 72 515 72z m3 800c-198.8 0-360-161.2-360-360 0-65.5 17.5-126.9 48-179.7l209.4 155.6c11.9 11.9 26.2 21.8 41.2 30.6l112.8 83.8c1.1 4.1 1.6 8.4 1.6 13 0 35.2-19.8 54.4-63 54.4-35.2 0-68-15.4-101.9-42l-40.2 61.2c32.7 29.7 80.3 48.8 122.3 53.8v69.2h61.2V740c51-9.8 84.8-38.3 99.8-78.5l130.9 97.3C714.4 828.5 621.3 872 518 872z m131.4-310c-37-89.8-179.1-89.7-179.1-156.3 0-34 20.4-51.3 56.8-51.3 31.5 0 53.8 13 79.1 36.5l45.7-51.9c-26.6-27.8-58.1-50-102.6-56.2v-70.4h-61.2V284c-50.5 9.6-86 39.8-99.3 84.5L253.5 267.8C319.2 196.6 413.4 152 518 152c198.8 0 360 161.2 360 360 0 66.8-18.2 129.3-49.8 182.9L649.4 562z"/></symbol><symbol id="icon-Attribution" viewbox="0 0 1024 1024"><path d="M512 72C269 72 72 269 72 512s197 440 440 440 440-197 440-440S755 72 512 72z m0 800c-198.8 0-360-161.2-360-360s161.2-360 360-360 360 161.2 360 360-161.2 360-360 360z"/><path d="M512 262.2m-70 0a70 70 0 1 0 140 0 70 70 0 1 0-140 0Z"/><path d="M652 410.6c0-33.1-26.9-60-60-60H432c-33.1 0-60 26.9-60 60v200h70v214h140v-214h70v-200z"/></symbol><symbol id="icon-No_Derivative_Works" viewbox="0 0 1024 1024"><path d="M512 72C269 72 72 269 72 512s197 440 440 440 440-197 440-440S755 72 512 72z m0 800c-198.8 0-360-161.2-360-360s161.2-360 360-360 360 161.2 360 360-161.2 360-360 360z"/><path d="M692 469.5H332c-5.5 0-10-4.5-10-10v-60c0-5.5 4.5-10 10-10h360c5.5 0 10 4.5 10 10v60c0 5.6-4.5 10-10 10zM692 634.5H332c-5.5 0-10-4.5-10-10v-60c0-5.5 4.5-10 10-10h360c5.5 0 10 4.5 10 10v60c0 5.5-4.5 10-10 10z"/></symbol><symbol id="icon-creative_commons_licenses" viewbox="0 0 1024 1024"><path d="M512 72C269 72 72 269 72 512s197 440 440 440 440-197 440-440S755 72 512 72z m0 800c-198.8 0-360-161.2-360-360s161.2-360 360-360 360 161.2 360 360-161.2 360-360 360z"/><path d="M264.8 513.5c0-94.2 63.1-148.2 134.9-148.2 36.9 0 66.5 17.1 85.9 36.9l-35.7 43.3c-14.1-12.9-28.9-22-49-22-36.5 0-66.5 32.7-66.5 87.8 0 56.2 25.8 88.9 65.7 88.9 22.4 0 40.7-11.4 54-25.8l35.7 42.6c-23.9 27.7-55.5 41.8-92.3 41.8-71.9-0.1-132.7-49.5-132.7-145.3zM534.2 513.5c0-94.2 63.1-148.2 134.9-148.2 36.9 0 66.5 17.1 85.9 36.9l-35.7 43.3c-14.1-12.9-28.9-22-49-22-36.5 0-66.5 32.7-66.5 87.8 0 56.2 25.8 88.9 65.7 88.9 22.4 0 40.7-11.4 54-25.8l35.7 42.6c-23.9 27.7-55.5 41.8-92.3 41.8-71.9-0.1-132.7-49.5-132.7-145.3z"/></symbol><symbol id="icon-Share_Alike" viewbox="0 0 1024 1024"><path d="M512 72C269 72 72 269 72 512s197 440 440 440 440-197 440-440S755 72 512 72z m0 800c-198.8 0-360-161.2-360-360s161.2-360 360-360 360 161.2 360 360-161.2 360-360 360z"/><path d="M511.6 233.7c-117.8 0-208.3 58.8-245.8 161.8h-52.7L315 512l101.9-116.4h-48c27.5-56.4 77.7-88.2 142.7-88.2 100.9 0 167 76.6 167 202.8s-66.1 206.4-167 206.4c-83.5 0-142.7-55-160.6-145.6h-99.2c22.6 136.8 122.7 219.3 259.8 219.3C667.9 790.3 777 683 777 510.2S667.9 233.7 511.6 233.7z"/></symbol><symbol id="icon-xinlu-logo" viewbox="0 0 1024 1024"><path d="M55.1 419.4c23.2 68 9.5 115.5-6.8 139.1-10.6 16.7-29.3 20.9-39.5 11-8-8.4-5.3-20.9 3-30.4 19.4-19 38-67.6 37.2-119.3l6.1-0.4z m94.2-41.4c-0.4 4.9-4.2 9.1-13.3 10.3v202.9c0 9.9 4.2 12.9 23.2 12.9h49.4c20.1 0 36.1-0.4 43.3-0.8 6.1-0.8 9.1-2.3 11.4-6.8 4.6-8 11-31.5 18.2-61.6h4.6l1.1 64.2c12.2 4.6 15.6 8.7 15.6 16 0 17.9-18.2 25.1-96.9 25.1h-51.3c-41.8 0-54.7-7.6-54.7-38.8V373.1l49.4 4.9z m59.3 36.1c-7.2-34.2-33.8-75.2-56.6-103l4.2-2.7c120.4 50.2 91.9 135.3 52.4 105.7z m114 148.6c-4.2-35.7-16.3-93.5-48.3-133l3.8-3c122.4 79.7 76.1 174.7 44.5 136zM617 636.8c-5.8 0-11-0.8-15.5-2.4s-8.6-3.8-12.4-6.8c-3.8-2.9-7.5-6.5-11-10.7-3.5-4.2-7.3-9-11.2-14.3-4.1 4.4-8.9 8.7-14.2 12.8-5.4 4.1-11.4 7.8-17.9 10.9-6.6 3.2-13.8 5.7-21.6 7.6-7.8 1.9-16.3 2.8-25.4 2.8-11.1 0-21.2-1.4-30.5-4.2-9.2-2.8-17.1-6.9-23.7-12.2-6.6-5.4-11.7-12-15.3-19.9-3.6-7.9-5.5-17-5.5-27.3 0-15.7 4.5-29.1 13.4-40.3 8.9-11.1 21.6-20.2 37.9-27.3-3.1-2.3-6.2-4.9-9.2-7.9-3.1-3-5.8-6.5-8.2-10.3-2.4-3.8-4.4-8.1-5.9-12.8-1.5-4.7-2.2-9.8-2.2-15.3 0-8.1 1.5-15.3 4.4-21.6 2.9-6.3 7-11.5 12.1-15.9 5.1-4.3 11.2-7.6 18.2-9.8 7-2.2 14.5-3.3 22.6-3.3 8 0 15.3 1.1 21.9 3.3 6.6 2.2 12.3 5.4 17.1 9.5 4.8 4.1 8.5 9 11.2 14.8 2.7 5.7 4 12.2 4 19.2 0 12.3-3.5 22.6-10.5 30.7-7 8.2-17.6 15.1-31.6 20.9 7.1 2.8 13.5 6.2 19.2 10.2 5.7 4 11.1 8.5 15.9 13.4 4.9 4.9 9.4 10.2 13.6 15.9 4.2 5.6 8.4 11.5 12.5 17.6 8.3-11.6 14.6-24.4 18.8-38.3 4.2-14 6.3-28.6 6.3-43.9 0-3.9-0.2-7.6-0.7-11-0.5-3.4-1.1-6.9-1.9-10.2h24.5c0.8 3.4 1.3 6.6 1.5 9.6 0.2 3 0.3 6.6 0.5 10.9 0 9.3-1 18.7-2.9 28.2-2 9.4-4.6 18.6-7.9 27.5-3.3 8.9-7.1 17.3-11.5 25.3s-9 15.3-13.8 22c3.6 4.9 6.9 9.2 9.9 12.9 3 3.6 6 6.7 9 9.2 3 2.5 6.2 4.3 9.4 5.5 3.2 1.2 6.9 1.8 11 1.8 3.1 0 6.2-0.4 9.4-1.2 3.2-0.8 6.5-1.8 9.9-3.1v23.4c-3.7 1.4-7.6 2.5-11.6 3.2-4.2 0.6-8.2 0.9-12.1 0.9z m-140.5-23.1c7.8 0 15-0.8 21.6-2.5 6.6-1.7 12.6-4 18.2-6.8 5.5-2.8 10.6-6.1 15.1-9.9 4.5-3.7 8.6-7.7 12.3-11.8-6.3-9.7-12-18.1-17.3-25-5.3-6.9-10.6-12.9-16-17.9-5.4-5-11.1-9.3-17.2-12.9-6.1-3.6-13.2-6.9-21.2-10-6.5 2.6-12.4 5.4-17.9 8.5-5.4 3.1-10.1 6.8-14.1 11.1s-7.1 9.2-9.3 14.9c-2.3 5.6-3.4 12.3-3.4 19.9 0 7 1.3 13.1 3.8 18.5 2.6 5.3 6.1 9.8 10.5 13.3 4.5 3.5 9.7 6.2 15.6 8 6.1 1.7 12.5 2.6 19.3 2.6zM515 456.5c0-5.1-1-9.5-2.8-13.1-1.9-3.6-4.3-6.6-7.2-8.9-2.9-2.4-6.2-4.1-9.8-5.2-3.6-1.1-7.1-1.6-10.6-1.6-10.1 0-18.1 2.7-24.1 8.2-6 5.4-9.1 12.8-9.2 22.2 0 4.2 0.6 8.2 1.9 11.9 1.3 3.7 3.1 7.1 5.4 10.3 2.3 3.2 5 6 8.1 8.5 3.1 2.5 6.4 4.6 9.9 6.3 12.9-4.5 22.6-9.8 28.9-15.8 6.4-6.1 9.5-13.6 9.5-22.8zM666.7 430.4c27.4-19.8 49-46.4 62.7-74.5h-50.5l-3-11h66.9v-42.6l45.6 4.6c-1.1 4.6-4.2 8-12.9 9.5v28.5h14.4l17.5-23.9s20.1 16.7 32.3 28.9c-0.8 4.2-4.6 6.1-9.9 6.1h-54.3v6.1c74.1 4.6 54 56.2 25.5 40.7-4.2-10.6-14.8-23.6-25.5-32.3v50.2c0 3-14.8 9.1-26.6 9.1h-6.1v-42.6c-19.4 19.8-43.7 36.1-72.2 49l-3.9-5.8z m282.8-74.8c17.9 17.1 46.7 29.6 71.8 35.3l-0.4 4.2c-11.8 3-19.8 13.3-23.2 30-25.1-15.2-46.4-38.8-59.7-69.5h-1.5v65c0 3-14.8 9.1-27.4 9.1H903v-50.9c-14.8 12.5-32.7 23.6-52.8 32.7 23.9 3.4 22 22.8 9.5 29.6h86.6l19-22.8s22.4 15.6 36.5 27.7c-1.1 4.2-4.9 6.1-10.3 6.1h-90.8v28.5h43.7l15.6-16.7 33.8 25.5c-1.9 2.3-6.8 5.3-13.3 6.5v41c-0.4 2.3-16.7 8.4-27 8.4h-5.7v-9.5H743.5c-4.6 42.2-19.8 89.7-72.2 122.4l-3.8-3.8c38.8-46 43.7-103.4 43.7-154.3v-74.5l39.5 15.6h90.8l-1.5-0.8c-0.8-7.2-5.3-14.8-11-19.8-4.2 1.5-8.7 2.7-13.3 4.2l-3.8-5.3c30.8-16.7 56.2-39.1 73.7-63.8h-41.8l-3-11h62.3v-41l46.4 4.6c-0.8 4.9-3.4 8.4-12.9 9.9v26.6h27l18.2-24.7s22 17.1 34.2 29.6c-0.8 4.2-4.6 6.1-9.9 6.1h-56.6zM745 500c0 8 0 16-0.8 24.7h47.5v-33.1H745v8.4z m0-47.9v28.5h46.7v-28.5H745z m121.2 160.7c-19.8 7.6-55.9 22.4-95 36.1-2.3 3.4-5.3 5.7-8 6.8l-16.7-31.5c12.5-6.8 14.4-9.5 14.4-15.6v-73l42.6 4.6c-0.8 4.6-3.8 7.2-10.3 8.7v23.2h23.6l17.1-22s19.4 15.6 31.2 27c-1.1 4.2-4.9 6.1-9.9 6.1h-61.9v33.4c20.9-2.7 46.4-6.1 71.4-9.5l1.5 5.7z m3.5-160.7H823v28.5h46.7v-28.5z m-46.8 72.6h46.7v-33.1h-46.7v33.1z m182.8 92.3c11.4 4.6 12.9 6.1 12.9 11.8 0 11.8-10.6 20.1-41.8 20.1h-62.3c-34.6 0-41-7.2-41-39.1v-70.7l44.8 4.9c-0.4 4.9-4.2 8.4-11.4 9.5v27c23.2-10.3 46-23.6 59.3-34.2l33.1 26.6c-3.4 3.4-10.3 3.8-19.8 0.8-17.9 6.8-46 13.7-72.6 17.9v19.8c0 9.5 0.4 9.9 11.4 9.9h60c6.1 0 9.9 0 12.5-3 2.3-3 5.3-11.8 9.5-25.5h4.6l0.8 24.2zM900.8 491.6v33.1h47.1v-33.1h-47.1z"/></symbol><symbol id="icon-logo" viewbox="0 0 1024 1024"><path d="M277.046 580.112l441.969 21.874-10.94 221.034-441.969-21.874zM907.4 333.9l-10-96-25.2 2.6L856.4 66l-722.9 64.4 15.9 175.8-32.9 3.4 10 96 31.5-3.2 15.7 174.4 722.9-64.4-15.8-175.6 26.6-2.9z m-580.3 76.7c-40.1 3.6-75.6-25.8-79.2-65.6-3.6-39.8 26-75 66.2-78.5 40.1-3.6 75.6 25.8 79.2 65.6 3.5 39.8-26.1 75-66.2 78.5zM716 377.2c-40.1 3.6-75.6-25.8-79.2-65.6-3.6-39.8 26-75 66.2-78.5 40.1-3.6 75.6 25.8 79.2 65.6 3.6 39.8-26.1 75-66.2 78.5zM446.4 947.1l-1.6-112-124.1-6.1 1.8 129zM694.1 925.3l-19.7-78.8-129.4-6.4 24.1 96.2z"/></symbol><symbol id="icon-edit-copy" viewbox="0 0 1024 1024"><path d="M165.23153433 908.30681779c-4.49808231 0-8.89708846-1.52578125-12.46384906-4.4089135C148.12098745 900.14289788 145.41619279 894.47571038 145.41619279 888.49147712L145.41619279 135.50852288C145.41619279 129.61345842 148.05163336 124.015625 152.59925419 120.24080217 157.13696764 116.48579577 163.13110827 114.93029158 168.93700308 116.04985827l479.08540513 91.2100145c6.81647711 1.29790514 12.44403433 6.05358649 14.8615053 12.55301871l18.24992913 48.97361467c3.82436048 10.25443861-1.3969813 21.66807505-11.65142077 25.48252818-10.26434683 3.82436048-21.66807505-1.38707394-25.48252817-11.65142077l-14.3463072-38.52102289L185.046875 159.45536245l0 704.53444586 625.54058956-133.71392076L700.29527706 439.77308231c-3.88380721-10.23462389 1.26818221-21.67798327 11.49289789-25.56178962 10.20490096-3.88380721 21.67798327 1.258274 25.56178961 11.49289789l118.48583121 312.09161969c2.05088755 5.40958846 1.63476563 11.43345202-1.11956669 16.50617914-2.76423967 5.08263533-7.61899889 8.69893442-13.26637081 9.90767076l-672.07691769 143.66122183C167.99577399 908.15820313 166.60870005 908.30681779 165.23153433 908.30681779z"/><path d="M504.68813952 553.98870731c-5.07272711 0-10.13554688-1.93199581-14.00944586-5.80589481-7.73789062-7.73789062-7.73789062-20.28100111 0-28.01889173L861.97855106 148.85415514c7.73789062-7.73789062 20.28100111-7.73789062 28.01889173 0 7.73789062 7.73789062 7.73789062 20.28100111 0 28.01889174L518.69758539 548.1828125C514.83359375 552.05671149 509.75095842 553.98870731 504.68813952 553.98870731z"/></symbol></svg>';var script=function(){var scripts=document.getElementsByTagName("script");return scripts[scripts.length-1]}();var shouldInjectCss=script.getAttribute("data-injectcss");var ready=function(fn){if(document.addEventListener){if(~["complete","loaded","interactive"].indexOf(document.readyState)){setTimeout(fn,0)}else{var loadFn=function(){document.removeEventListener("DOMContentLoaded",loadFn,false);fn()};document.addEventListener("DOMContentLoaded",loadFn,false)}}else if(document.attachEvent){IEContentLoaded(window,fn)}function IEContentLoaded(w,fn){var d=w.document,done=false,init=function(){if(!done){done=true;fn()}};var polling=function(){try{d.documentElement.doScroll("left")}catch(e){setTimeout(polling,50);return}init()};polling();d.onreadystatechange=function(){if(d.readyState=="complete"){d.onreadystatechange=null;init()}}}};var before=function(el,target){target.parentNode.insertBefore(el,target)};var prepend=function(el,target){if(target.firstChild){before(el,target.firstChild)}else{target.appendChild(el)}};function appendSvg(){var div,svg;div=document.createElement("div");div.innerHTML=svgSprite;svgSprite=null;svg=div.getElementsByTagName("svg")[0];if(svg){svg.setAttribute("aria-hidden","true");svg.style.position="absolute";svg.style.width=0;svg.style.height=0;svg.style.overflow="hidden";prepend(svg,document.body)}}if(shouldInjectCss&&!window.__iconfont__svg__cssinject__){window.__iconfont__svg__cssinject__=true;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(e){console&&console.log(e)}}ready(appendSvg)})(window)]]>
    </content>
  </entry>
  <entry>
    <title></title>
    <link href="/assets/iconfont/iconfont.css"/>
    <url>/assets/iconfont/iconfont.css</url>
    <content type="html">
      <![CDATA[@font-face {font-family: "iconfont";  src: url('iconfont.eot?t=1525424394764'); /* IE9*/  src: url('iconfont.eot?t=1525424394764#iefix') format('embedded-opentype'), /* IE6-IE8 */  url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAzUAAsAAAAAE0gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADMAAABCsP6z7U9TLzIAAAE8AAAAQwAAAFZW7kh8Y21hcAAAAYAAAACqAAACOjT+bYtnbHlmAAACLAAACCQAAAu4KEQldGhlYWQAAApQAAAALwAAADYRQ8gRaGhlYQAACoAAAAAeAAAAJAfeA6hobXR4AAAKoAAAABYAAAA0NAMAAGxvY2EAAAq4AAAAHAAAABwO9hK6bWF4cAAACtQAAAAfAAAAIAEnAWRuYW1lAAAK9AAAAUUAAAJtPlT+fXBvc3QAAAw8AAAAlQAAAL6ehxHoeJxjYGRgYOBikGPQYWB0cfMJYeBgYGGAAJAMY05meiJQDMoDyrGAaQ4gZoOIAgCKIwNPAHicY2BkYWCcwMDKwMHUyXSGgYGhH0IzvmYwYuRgYGBiYGVmwAoC0lxTGBwYKp51MTf8b2CIYW5gaAAKM4LkAN13C/8AeJzFkTsSgzAMRNfBJj+KVCk4AFWuxUBoCB1noE6VKqfba5C1ReGcAGmeZ7RjW5oVgACgEA/hAfeBQ4y3VJf0Apeke/Sqb8p4f2Zgw5YDJy7rmikdx03Jw6WXlnfUSTnop4ASR5xwVpcrqjRDid3C7df6P6p0frNq3tCIDIYcBBsjboWtEbfKzpC/YG/IafBpyHNwMOQ+OBpx23wZ2gg4GXEGLgb8DzSMNRIAAHicfVZvjFxVFX/n3nfvffe9N+/fzHt3/uzM7Mz0zdvd2Z1l528ju9OtlaWUCqUFjDSaCohNDLCWxkaCsZVYKqmlGBOpGqNGoiYCJqZCbIMUv9TUfmiJfCOmCt9N/CCJ7uh5WxYbSjt5c+bMOefee855v3vO0Zim/fcKPUvzWlab0ha0T2m7NA14C+oOKUMt6bVJC8IaC1XOoUkjqYlGvU2XQNV5LuoMek3FBXfBgQp0a51B0iYJ9Hsjcit0ojJAoVTcE8QTAT0JZj6pfGu8g/wMwmpjwh3Nje+Y3ZLrTGaNQ3YQFILguMEZMwjRXQceVZFk0uTjnzO3GJ6tTpMq2IWkuPOzmclS8IVjvcfKsZIAhw9DtjTp/GKLX/TxeaoYZYOC8DJGvphpbMrBoXetfNYuN/+u4SeN9R16ms5pt2Ckt2q3aSuaJqENSaOOUZSh2+8NhoNhtwIKopwLvJ6k2n4jTCUV2AKDZrIQ15u9QSfK8UZ/IwmNBfr98YHSrvh02MyopmD+xOnythBO+P4Vvx2MD0RFaEKtCCcqd266kicTa6/OLC3dt7jYKjWTfrNZgofgRLEGrhNVlpakrfsAE7nxgaDt/83z4DnV9RYWCp8sjr9SgskrpTsrXx3tHuHzy6TXbPYSjI1gbG/QN+iyZmkTGCq6PYIhuu1ANmnWMZYKdLaASt0l2utrjK29vk4Lb8q8fFNCoORLL8l8sLyhQApHz0l5zlSB/PVLRqDSHOp4zhp9nvxLcxExsTZEtNSTuNkbxgPFopxgPGZz4PMkbsMIFIsHFeAoFfWPSghh+violPCkKeBrUo6/rY9/BffA7vHLqUJQ4QpYhVXhSibGz+j8Y6UwT/7CFP8T5xe4Ypfoe2fP/m7tItDLzHF1/eJFHeHELtNT5DJDJhWggl3GfGkUYzlPz9DNmLPpFAsIY4Epw8S1gWIGEQ0qqkIURqKZpJqw20dlmlPUDoadSA2v4gMXfpDvHBeEnnmfsffPrNPXTl3QC+pSVq0SWO51pgpbJ5eSjvV052i/ccyAzaoZtHOd2lKzaz6zcOxutC7m6eaN1Uj/855+4dTC3qkfBfa9XAwAppeiCf227cZU9cH+rdAfLcx1IRv0wgq7fbuYrT08WAJc0fnc1Abmz9PX1mNUWl6rafPXx7mBFNpAkCCc61y1AUsAF2EXQ+4S7ZqAzqCLuP9VugLJYoLPJagXflKow8rxleud31hAPl9JbZPfFuv14vm3397A0//9a9zMu2ytnvQHw1qkQi6u4W/oXWn8ApYICftTeg1/Yw/hOXMxNVs0X9xgrvOxjXXjhj7CVUagyIFc1O0ggni9GV8jJh9Kb+j4eJV8enNp1t1kKXei2aj4JXNT/PhOsMldw4mWu8nMuxMxNKpeyWpsWr3zJvE8dPtOgNBtSRugfW/btVozO7Z/jOyDu7ARY/cmGEFUNNSwsf4fwZ5Wzw27G+PkgW+U+488ckt4x8LOBx7YubzHeSh4dv+hk4ScvAlcnrz3roMHW3MAX/7DYwA7b/vSEwDfe/qbz6e48VJCx2S3ZmsJvpO+dkh7VvuBdhY42ODBNMzBAuyBz2haNuLCgaQ5GI6gP8yJMBdhdxp20OWuqkAYYbfjzWEfMZ+kMaY/EWf1NsyDQ7HdkbQttGna1joVEmLQFWxHuFmvn3QRgTmHCFUh+FaxDiSdEUHjxKG5Chli+8TeEiKbZmgwbCTdvkIXulhYFJ6Lhyd4Hq5rQZ+LOK0xHItNIz2lgZIKiA9tkcEbuW7auFpwkr7qJliako/u3GA50e03+nh78Z0Jnhpj0+bXnLwFGmE3NUpzkEs7fpoD3CGtcBzhmyZq2I2wHya4zdCTjqEMToQbPZyRTqdqG0IyBlLA1Ce61QI8KiYD/X7YRaO8fr8NUmZsZnEvl8/4pZxVyjMpdMML8znHCEPLd4SdsUkegJsZYTIpLZNx+7tWzs9w0/MC2/RsYWSCBW5YzAt0IXk2+8J02KHb5mzHty2TGIMezVPHAF/ycgtUJskGLAmJb/KoGhDz/mzGtomxt+XVqQmBwf9Mqwmd8GBqLyEyo8+XZuhoPlMKbBs3G/8bbpmf3+F2KpR5krVwYvEtExWj7Ww+/bxqsKwaFT2YtYKqWWOOk+SosSgFZ/vn4Z3eCnpucF+4W5MZg1wwGGQm1TI1WMYGX707XRxGtHXP0xM7qnR5X4dJ7vCM5NJTnqqburRcw85mOM/4ZjYvdds1An9GcWYy3XLKxbyZ4UKnJE+IYtLibuiiRmb8yDP5j4UlqOdwWxpEBFPVltVigpTzJs5QXMwYRiC6RLQq2V12VtdZQbW3Eg7dLKKUK9Mwedkv6HSacDm5taA3diU7XLAMnRea1rRukFLBNE1+0s7Upsrln/Ksxcgk4/oduiA4qEnJ6+YPy7O1r1N0yPLU7TjGlYysUWI6k3pW6ABG+MVaDa8sxzpzjh6nI6w47no/irH3asBEDIhjpoQaqjhhPJ0VcE6INxi8jCrGL4Twe2u8Qo6YBW+t7U6aVY+85a29XZ1j8Qi/8MgGN34LngI4mDuSh8XonQje2kdeXv6Nvk9/ZesrO0g8mmXx0myFIOHx0tzaH1f5kdrdfN/VWeqf9DB1tEltTtNUHa+Yn04u6SzgQHMeYj+mzRFEKq0tDG9ObwjpSCiAvyiYAHAk/NXSAxxWXOqMt5EDjxPuOfQQlXJtH+wybA5PcM/m4+9wW+cm+Ydpk73UXDAcLkRy39qWo1A3XC6M8XnDIyfhQdtLVyDFFZjG/wHztxSZeJxjYGRgYABi+RXn6uL5bb4ycLMwgMB1IScuBP3/AAsDswOQy8HABBIFAPsJCD4AeJxjYGRgYG7438AQwyLFAAQsDAyMDKiAFwBJnQKQAAB4nGNhYGBgfsnAwCIFxAzEYQA02QE3AAAAAAAAAHYA5AEYAX4B8AJAApIDBANcBTgFigXceJxjYGRgYOBljGAQYAABJiDmAkIGhv9gPgMAE8sBjQB4nGWPTU7DMBCFX/oHpBKqqGCH5AViASj9EatuWFRq911036ZOmyqJI8et1ANwHo7ACTgC3IA78EgnmzaWx9+8eWNPANzgBx6O3y33kT1cMjtyDRe4F65TfxBukF+Em2jjVbhF/U3YxzOmwm10YXmD17hi9oR3YQ8dfAjXcI1P4Tr1L+EG+Vu4iTv8CrfQ8erCPuZeV7iNRy/2x1YvnF6p5UHFockikzm/gple75KFrdLqnGtbxCZTg6BfSVOdaVvdU+zXQ+ciFVmTqgmrOkmMyq3Z6tAFG+fyUa8XiR6EJuVYY/62xgKOcQWFJQ6MMUIYZIjK6Og7VWb0r7FDwl57Vj3N53RbFNT/c4UBAvTPXFO6stJ5Ok+BPV8bUnV0K27LnpQ0kV7NSRKyQl7WtlRC6gE2ZVeOEXpc0Yk/KGdI/wAJWm7IAAAAeJxti7sOgkAQAG8BlYfYWPkRfASJNY2F5eU8N7jhuCV3K4G/N4TWKSaZYlSidkr1nxoSSCGDAxzhBDkUUEIFZ6jhomABSoWn3BrBnsNad+wtjyMGS8ZVrUig11eI/bVjfcdAsxGaUT85DPFmA+65PeyjdmTRR4zV42MC6tbRgOVC3n0bxz1nmwp8kzSWp1WpH1+PL/wAAAA=') format('woff'),  url('iconfont.ttf?t=1525424394764') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+*/  url('iconfont.svg?t=1525424394764#iconfont') format('svg'); /* iOS 4.1- */}.iconfont {  font-family:"iconfont" !important;  font-size:16px;  font-style:normal;  -webkit-font-smoothing: antialiased;  -moz-osx-font-smoothing: grayscale;}.icon-i:before { content: "\e605"; }.icon-top:before { content: "\e626"; }.icon-category:before { content: "\e68a"; }.icon-Noncommercial:before { content: "\e665"; }.icon-Attribution:before { content: "\e667"; }.icon-No_Derivative_Works:before { content: "\e668"; }.icon-creative_commons_licenses:before { content: "\e669"; }.icon-Share_Alike:before { content: "\e66a"; }.icon-xinlu-logo:before { content: "\e66f"; }.icon-logo:before { content: "\e670"; }.icon-edit-copy:before { content: "\e671"; }]]>
    </content>
  </entry>
</search>
